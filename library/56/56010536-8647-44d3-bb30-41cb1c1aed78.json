{
  "__type__": "cc.EffectAsset",
  "_name": "../Load/Effect/sprite-BurnOut",
  "_objFlags": 0,
  "__editorExtras__": {},
  "_native": "",
  "techniques": [
    {
      "passes": [
        {
          "blendState": {
            "targets": [
              {
                "blend": true,
                "blendSrc": 2,
                "blendDst": 4,
                "blendDstAlpha": 4
              }
            ]
          },
          "rasterizerState": {
            "cullMode": 0
          },
          "program": "../Load/Effect/sprite-BurnOut|sprite-vs:vert|sprite-fs:frag",
          "depthStencilState": {
            "depthTest": false,
            "depthWrite": false
          },
          "properties": {
            "subTexture": {
              "value": "grey",
              "type": 28
            }
          }
        }
      ]
    }
  ],
  "shaders": [
    {
      "blocks": [],
      "samplerTextures": [
        {
          "name": "subTexture",
          "type": 28,
          "count": 1,
          "defines": [],
          "stageFlags": 16,
          "sampleType": 0,
          "binding": 0
        }
      ],
      "samplers": [],
      "textures": [],
      "buffers": [],
      "images": [],
      "subpassInputs": [],
      "attributes": [
        {
          "name": "a_position",
          "defines": [],
          "format": 32,
          "location": 0
        },
        {
          "name": "a_texCoord",
          "defines": [],
          "format": 21,
          "location": 1
        },
        {
          "name": "a_color",
          "defines": [],
          "format": 44,
          "location": 2
        }
      ],
      "varyings": [
        {
          "name": "color",
          "type": 16,
          "count": 1,
          "defines": [],
          "stageFlags": 17,
          "location": 0
        },
        {
          "name": "uv0",
          "type": 14,
          "count": 1,
          "defines": [],
          "stageFlags": 17,
          "location": 1
        }
      ],
      "fragColors": [
        {
          "name": "cc_FragColor",
          "typename": "vec4",
          "type": 16,
          "count": 1,
          "defines": [],
          "stageFlags": 16,
          "location": 0
        }
      ],
      "descriptors": [
        {
          "rate": 0,
          "blocks": [],
          "samplerTextures": [
            {
              "tags": {
                "builtin": "local"
              },
              "name": "cc_spriteTexture",
              "typename": "sampler2D",
              "type": 28,
              "count": 1,
              "defines": [],
              "stageFlags": 16,
              "sampleType": 0
            }
          ],
          "samplers": [],
          "textures": [],
          "buffers": [],
          "images": [],
          "subpassInputs": []
        },
        {
          "rate": 1,
          "blocks": [],
          "samplerTextures": [
            {
              "name": "subTexture",
              "type": 28,
              "count": 1,
              "defines": [],
              "stageFlags": 16,
              "sampleType": 0,
              "binding": 0
            }
          ],
          "samplers": [],
          "textures": [],
          "buffers": [],
          "images": [],
          "subpassInputs": []
        },
        {
          "rate": 2,
          "blocks": [],
          "samplerTextures": [],
          "samplers": [],
          "textures": [],
          "buffers": [],
          "images": [],
          "subpassInputs": []
        },
        {
          "rate": 3,
          "blocks": [
            {
              "tags": {
                "builtin": "global"
              },
              "name": "CCGlobal",
              "members": [
                {
                  "name": "cc_time",
                  "typename": "vec4",
                  "type": 16,
                  "count": 1,
                  "precision": "highp "
                },
                {
                  "name": "cc_screenSize",
                  "typename": "vec4",
                  "type": 16,
                  "count": 1,
                  "precision": "mediump "
                },
                {
                  "name": "cc_nativeSize",
                  "typename": "vec4",
                  "type": 16,
                  "count": 1,
                  "precision": "mediump "
                },
                {
                  "name": "cc_probeInfo",
                  "typename": "vec4",
                  "type": 16,
                  "count": 1,
                  "precision": "mediump "
                },
                {
                  "name": "cc_debug_view_mode",
                  "typename": "vec4",
                  "type": 16,
                  "count": 1,
                  "precision": "mediump "
                }
              ],
              "defines": [],
              "stageFlags": 1
            },
            {
              "tags": {
                "builtin": "global"
              },
              "name": "CCCamera",
              "members": [
                {
                  "name": "cc_matView",
                  "typename": "mat4",
                  "type": 25,
                  "count": 1,
                  "precision": "highp "
                },
                {
                  "name": "cc_matViewInv",
                  "typename": "mat4",
                  "type": 25,
                  "count": 1,
                  "precision": "highp "
                },
                {
                  "name": "cc_matProj",
                  "typename": "mat4",
                  "type": 25,
                  "count": 1,
                  "precision": "highp "
                },
                {
                  "name": "cc_matProjInv",
                  "typename": "mat4",
                  "type": 25,
                  "count": 1,
                  "precision": "highp "
                },
                {
                  "name": "cc_matViewProj",
                  "typename": "mat4",
                  "type": 25,
                  "count": 1,
                  "precision": "highp "
                },
                {
                  "name": "cc_matViewProjInv",
                  "typename": "mat4",
                  "type": 25,
                  "count": 1,
                  "precision": "highp "
                },
                {
                  "name": "cc_cameraPos",
                  "typename": "vec4",
                  "type": 16,
                  "count": 1,
                  "precision": "highp "
                },
                {
                  "name": "cc_surfaceTransform",
                  "typename": "vec4",
                  "type": 16,
                  "count": 1,
                  "precision": "mediump "
                },
                {
                  "name": "cc_screenScale",
                  "typename": "vec4",
                  "type": 16,
                  "count": 1,
                  "precision": "mediump "
                },
                {
                  "name": "cc_exposure",
                  "typename": "vec4",
                  "type": 16,
                  "count": 1,
                  "precision": "mediump "
                },
                {
                  "name": "cc_mainLitDir",
                  "typename": "vec4",
                  "type": 16,
                  "count": 1,
                  "precision": "mediump "
                },
                {
                  "name": "cc_mainLitColor",
                  "typename": "vec4",
                  "type": 16,
                  "count": 1,
                  "precision": "mediump "
                },
                {
                  "name": "cc_ambientSky",
                  "typename": "vec4",
                  "type": 16,
                  "count": 1,
                  "precision": "mediump "
                },
                {
                  "name": "cc_ambientGround",
                  "typename": "vec4",
                  "type": 16,
                  "count": 1,
                  "precision": "mediump "
                },
                {
                  "name": "cc_fogColor",
                  "typename": "vec4",
                  "type": 16,
                  "count": 1,
                  "precision": "mediump "
                },
                {
                  "name": "cc_fogBase",
                  "typename": "vec4",
                  "type": 16,
                  "count": 1,
                  "precision": "mediump "
                },
                {
                  "name": "cc_fogAdd",
                  "typename": "vec4",
                  "type": 16,
                  "count": 1,
                  "precision": "mediump "
                },
                {
                  "name": "cc_nearFar",
                  "typename": "vec4",
                  "type": 16,
                  "count": 1,
                  "precision": "mediump "
                },
                {
                  "name": "cc_viewPort",
                  "typename": "vec4",
                  "type": 16,
                  "count": 1,
                  "precision": "mediump "
                }
              ],
              "defines": [],
              "stageFlags": 1
            }
          ],
          "samplerTextures": [],
          "samplers": [],
          "textures": [],
          "buffers": [],
          "images": [],
          "subpassInputs": []
        }
      ],
      "hash": 2750666674,
      "glsl4": {
        "vert": "\n precision highp float;\n layout(set = 0, binding = 0) uniform CCGlobal {\n   highp   vec4 cc_time;\n   mediump vec4 cc_screenSize;\n   mediump vec4 cc_nativeSize;\n   mediump vec4 cc_probeInfo;\n   mediump vec4 cc_debug_view_mode;\n };\n layout(set = 0, binding = 1) uniform CCCamera {\n   highp   mat4 cc_matView;\n   highp   mat4 cc_matViewInv;\n   highp   mat4 cc_matProj;\n   highp   mat4 cc_matProjInv;\n   highp   mat4 cc_matViewProj;\n   highp   mat4 cc_matViewProjInv;\n   highp   vec4 cc_cameraPos;\n   mediump vec4 cc_surfaceTransform;\n   mediump vec4 cc_screenScale;\n   mediump vec4 cc_exposure;\n   mediump vec4 cc_mainLitDir;\n   mediump vec4 cc_mainLitColor;\n   mediump vec4 cc_ambientSky;\n   mediump vec4 cc_ambientGround;\n   mediump vec4 cc_fogColor;\n   mediump vec4 cc_fogBase;\n   mediump vec4 cc_fogAdd;\n   mediump vec4 cc_nearFar;\n   mediump vec4 cc_viewPort;\n };\n layout(location = 0) in vec3 a_position;\n layout(location = 1) in vec2 a_texCoord;\n layout(location = 2) in vec4 a_color;\n layout(location = 0) out vec4 color;\n layout(location = 1) out vec2 uv0;\nvec4 vert () {\n   vec4 pos = vec4(a_position, 1);\n   pos = cc_matViewProj * pos;\n   uv0 = a_texCoord;\n   color = a_color;\n   return pos;\n }\nvoid main() { gl_Position = vert(); }",
        "frag": "\nprecision highp float;\nfloat fr(vec2 c, float seed)\n{\nreturn fract(43.0 * sin(c.x + 7.0 * c.y) * seed);\n}\nfloat fn(vec2 p, float seed)\n{\n    vec2 i = floor(p), w = p - i, j = vec2(1.0, 0.0);\n    w = w * w * (3.0 - w - w);\n    return mix(mix(fr(i, seed), fr(i + j, seed), w.x), mix(fr(i + j.yx, seed), fr(i + 1.0, seed), w.x), w.y);\n}\nfloat fa(vec2 p, float seed)\n{\n    float m = 0.0, f = 2.0;\n    for (int i = 0; i < 6; i++) {\n    m += fn(f * p, seed) / f;\n    f += f;\n    }\n    return m;\n}\nvec4 BurnOut(vec4 MainColor, vec2 uv, float progression)\n{\n    float t = fract(progression * 0.9999);\n    float cc = smoothstep(t / 1.2, t + 0.1, fa(3.5 * uv, 1.));\n    vec4 c = vec4(cc);\n    c = MainColor * c;\n    if (c.a < 0.8) {\n        discard;\n    }\n    c.r = mix(c.r, c.r * 15.0 * (1.0 - c.a) * 8.0, progression);\n    c.g = mix(c.g, c.g * 10.0 * (1.0 - c.a) * 4.0, progression);\n    c.b = mix(c.b, c.b * 5.0 * (1.0 - c.a), progression);\n    return vec4(c.rgb, c.a);\n}\nlayout(location = 0) in vec4 color;\nlayout(location = 1) in vec2 uv0;\nlayout(set = 2, binding = 12) uniform sampler2D cc_spriteTexture;\nlayout(set = 1, binding = 0) uniform sampler2D subTexture;\nvec4 frag () {\n  vec4 mainColor = texture(cc_spriteTexture, uv0);\n  vec4 mixColor = texture(subTexture, uv0);\n  float progression = 1.-color.r;\n  mainColor = BurnOut(mainColor, uv0, progression);\n  mainColor.rgb = mix(mainColor.rgb,mixColor.rgb,1.-mainColor.a);\n  mainColor.a = 1.;\n  return mainColor;\n }\nlayout(location = 0) out vec4 cc_FragColor;\nvoid main() { cc_FragColor = frag(); }"
      },
      "glsl3": {
        "vert": "\n precision highp float;\n layout(std140) uniform CCGlobal {\n   highp   vec4 cc_time;\n   mediump vec4 cc_screenSize;\n   mediump vec4 cc_nativeSize;\n   mediump vec4 cc_probeInfo;\n   mediump vec4 cc_debug_view_mode;\n };\n layout(std140) uniform CCCamera {\n   highp   mat4 cc_matView;\n   highp   mat4 cc_matViewInv;\n   highp   mat4 cc_matProj;\n   highp   mat4 cc_matProjInv;\n   highp   mat4 cc_matViewProj;\n   highp   mat4 cc_matViewProjInv;\n   highp   vec4 cc_cameraPos;\n   mediump vec4 cc_surfaceTransform;\n   mediump vec4 cc_screenScale;\n   mediump vec4 cc_exposure;\n   mediump vec4 cc_mainLitDir;\n   mediump vec4 cc_mainLitColor;\n   mediump vec4 cc_ambientSky;\n   mediump vec4 cc_ambientGround;\n   mediump vec4 cc_fogColor;\n   mediump vec4 cc_fogBase;\n   mediump vec4 cc_fogAdd;\n   mediump vec4 cc_nearFar;\n   mediump vec4 cc_viewPort;\n };\n in vec3 a_position;\n in vec2 a_texCoord;\n in vec4 a_color;\n out vec4 color;\n out vec2 uv0;\nvec4 vert () {\n   vec4 pos = vec4(a_position, 1);\n   pos = cc_matViewProj * pos;\n   uv0 = a_texCoord;\n   color = a_color;\n   return pos;\n }\nvoid main() { gl_Position = vert(); }",
        "frag": "\nprecision highp float;\nfloat fr(vec2 c, float seed)\n{\nreturn fract(43.0 * sin(c.x + 7.0 * c.y) * seed);\n}\nfloat fn(vec2 p, float seed)\n{\n    vec2 i = floor(p), w = p - i, j = vec2(1.0, 0.0);\n    w = w * w * (3.0 - w - w);\n    return mix(mix(fr(i, seed), fr(i + j, seed), w.x), mix(fr(i + j.yx, seed), fr(i + 1.0, seed), w.x), w.y);\n}\nfloat fa(vec2 p, float seed)\n{\n    float m = 0.0, f = 2.0;\n    for (int i = 0; i < 6; i++) {\n    m += fn(f * p, seed) / f;\n    f += f;\n    }\n    return m;\n}\nvec4 BurnOut(vec4 MainColor, vec2 uv, float progression)\n{\n    float t = fract(progression * 0.9999);\n    float cc = smoothstep(t / 1.2, t + 0.1, fa(3.5 * uv, 1.));\n    vec4 c = vec4(cc);\n    c = MainColor * c;\n    if (c.a < 0.8) {\n        discard;\n    }\n    c.r = mix(c.r, c.r * 15.0 * (1.0 - c.a) * 8.0, progression);\n    c.g = mix(c.g, c.g * 10.0 * (1.0 - c.a) * 4.0, progression);\n    c.b = mix(c.b, c.b * 5.0 * (1.0 - c.a), progression);\n    return vec4(c.rgb, c.a);\n}\nin vec4 color;\nin vec2 uv0;\nuniform sampler2D cc_spriteTexture;\nuniform sampler2D subTexture;\nvec4 frag () {\n  vec4 mainColor = texture(cc_spriteTexture, uv0);\n  vec4 mixColor = texture(subTexture, uv0);\n  float progression = 1.-color.r;\n  mainColor = BurnOut(mainColor, uv0, progression);\n  mainColor.rgb = mix(mainColor.rgb,mixColor.rgb,1.-mainColor.a);\n  mainColor.a = 1.;\n  return mainColor;\n }\nlayout(location = 0) out vec4 cc_FragColor;\nvoid main() { cc_FragColor = frag(); }"
      },
      "glsl1": {
        "vert": "\n precision highp float;\n uniform highp mat4 cc_matViewProj;\n attribute vec3 a_position;\n attribute vec2 a_texCoord;\n attribute vec4 a_color;\n varying vec4 color;\n varying vec2 uv0;\nvec4 vert () {\n   vec4 pos = vec4(a_position, 1);\n   pos = cc_matViewProj * pos;\n   uv0 = a_texCoord;\n   color = a_color;\n   return pos;\n }\nvoid main() { gl_Position = vert(); }",
        "frag": "\nprecision highp float;\nfloat fr(vec2 c, float seed)\n{\nreturn fract(43.0 * sin(c.x + 7.0 * c.y) * seed);\n}\nfloat fn(vec2 p, float seed)\n{\n    vec2 i = floor(p), w = p - i, j = vec2(1.0, 0.0);\n    w = w * w * (3.0 - w - w);\n    return mix(mix(fr(i, seed), fr(i + j, seed), w.x), mix(fr(i + j.yx, seed), fr(i + 1.0, seed), w.x), w.y);\n}\nfloat fa(vec2 p, float seed)\n{\n    float m = 0.0, f = 2.0;\n    for (int i = 0; i < 6; i++) {\n    m += fn(f * p, seed) / f;\n    f += f;\n    }\n    return m;\n}\nvec4 BurnOut(vec4 MainColor, vec2 uv, float progression)\n{\n    float t = fract(progression * 0.9999);\n    float cc = smoothstep(t / 1.2, t + 0.1, fa(3.5 * uv, 1.));\n    vec4 c = vec4(cc);\n    c = MainColor * c;\n    if (c.a < 0.8) {\n        discard;\n    }\n    c.r = mix(c.r, c.r * 15.0 * (1.0 - c.a) * 8.0, progression);\n    c.g = mix(c.g, c.g * 10.0 * (1.0 - c.a) * 4.0, progression);\n    c.b = mix(c.b, c.b * 5.0 * (1.0 - c.a), progression);\n    return vec4(c.rgb, c.a);\n}\nvarying vec4 color;\nvarying vec2 uv0;\nuniform sampler2D cc_spriteTexture;\nuniform sampler2D subTexture;\nvec4 frag () {\n  vec4 mainColor = texture2D(cc_spriteTexture, uv0);\n  vec4 mixColor = texture2D(subTexture, uv0);\n  float progression = 1.-color.r;\n  mainColor = BurnOut(mainColor, uv0, progression);\n  mainColor.rgb = mix(mainColor.rgb,mixColor.rgb,1.-mainColor.a);\n  mainColor.a = 1.;\n  return mainColor;\n }\nvoid main() { gl_FragColor = frag(); }"
      },
      "builtins": {
        "globals": {
          "blocks": [
            {
              "name": "CCGlobal",
              "defines": []
            },
            {
              "name": "CCCamera",
              "defines": []
            }
          ],
          "samplerTextures": [],
          "buffers": [],
          "images": []
        },
        "locals": {
          "blocks": [],
          "samplerTextures": [
            {
              "name": "cc_spriteTexture",
              "defines": []
            }
          ],
          "buffers": [],
          "images": []
        },
        "statistics": {
          "CC_EFFECT_USED_VERTEX_UNIFORM_VECTORS": 42,
          "CC_EFFECT_USED_FRAGMENT_UNIFORM_VECTORS": 0
        }
      },
      "defines": [],
      "name": "../Load/Effect/sprite-BurnOut|sprite-vs:vert|sprite-fs:frag"
    }
  ],
  "combinations": [],
  "hideInEditor": false
}