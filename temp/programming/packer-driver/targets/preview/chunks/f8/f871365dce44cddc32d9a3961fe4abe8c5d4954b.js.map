{"version":3,"sources":["file:///Users/jingfaxie/Documents/UGit/minigame3/Aby/assets/scripts/game/item/Hexagon.ts"],"names":["_decorator","find","BaseLayer","utilTools","ccclass","property","Hexagon","recipeId","setView","data","id","setString","node","row","name","setSpriteFrame2","icon","bg","refreshNumString","seq","lastRecipeId","thisObj","forArr","parent","children","index","nodeRecipeId","getComponent","uuid","clearNumString"],"mappings":";;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,I,OAAAA,I;;AACZC,MAAAA,S,iBAAAA,S;;AACAC,MAAAA,S,iBAAAA,S;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBL,U;;yBAGjBM,O,WADZF,OAAO,CAAC,SAAD,C,gBAAR,MACaE,OADb;AAAA;AAAA,kCACuC;AAAA;AAAA;AAEnC;AAFmC,eAGnCC,QAHmC;AAAA;;AAKnCC,QAAAA,OAAO,CAACC,IAAD,EAAY;AACf;AACA,eAAKF,QAAL,GAAgBE,IAAI,CAACC,EAArB,CAFe,CAGf;;AACA,eAAKC,SAAL,CAAeV,IAAI,CAAC,MAAD,EAAS,KAAKW,IAAd,CAAnB,EAAwCH,IAAI,CAACI,GAAL,CAASC,IAAjD;AACA,eAAKC,eAAL,CAAqBd,IAAI,CAAC,MAAD,EAAS,KAAKW,IAAd,CAAzB,EAA+C,kBAAkBH,IAAI,CAACI,GAAL,CAASG,IAA1E;AACA,eAAKD,eAAL,CAAqB,KAAKH,IAA1B,EAAgCH,IAAI,CAACI,GAAL,CAASI,EAAzC;AACA,eAAKC,gBAAL;AACH;;AAEDA,QAAAA,gBAAgB,GAAG;AACf,cAAIC,GAAG,GAAG,CAAV;AACA,cAAIC,YAAY,GAAG,CAAnB;AACA,cAAIC,OAAO,GAAG,IAAd;AACA;AAAA;AAAA,sCAAUC,MAAV,CAAiB,KAAKV,IAAL,CAAUW,MAAV,CAAiBC,QAAlC,EAA4C,UAASZ,IAAT,EAAqBa,KAArB,EAAoC;AAC5E,gBAAIC,YAAY,GAAGd,IAAI,CAACe,YAAL,CAAkBrB,OAAlB,EAA2BC,QAA9C;;AACA,gBAAIa,YAAY,IAAIM,YAApB,EAAkC;AAC9BP,cAAAA,GAAG,GAAG,CAAN;AACH;;AAEDA,YAAAA,GAAG;AACHC,YAAAA,YAAY,GAAGM,YAAf;;AAEA,gBAAId,IAAI,CAACgB,IAAL,IAAaP,OAAO,CAACT,IAAR,CAAagB,IAA9B,EAAoC;AAChC;AACH;;AACD,mBAAO,KAAP;AACH,WAbD;AAeA,eAAKjB,SAAL,CAAeV,IAAI,CAAC,KAAD,EAAQ,KAAKW,IAAb,CAAnB,EAAuCO,GAAvC;AACH;;AAEDU,QAAAA,cAAc,GAAG;AACb,eAAKlB,SAAL,CAAeV,IAAI,CAAC,KAAD,EAAQ,KAAKW,IAAb,CAAnB,EAAuC,EAAvC;AACH;;AAvCkC,O","sourcesContent":["import { _decorator, find, Node } from 'cc';\nimport { BaseLayer } from '../../framework/common/BaseLayer';\nimport { utilTools } from '../../framework/utils/UtilTools';\nconst { ccclass, property } = _decorator;\n\n@ccclass('Hexagon')\nexport class Hexagon extends BaseLayer {\n\n    // 食材id\n    recipeId: number;\n\n    setView(data: any) {\n        // 记录对应的食材id，六边形颜色下标就是recipe配置表中食材的下标\n        this.recipeId = data.id;\n        // this.setString(find(\"Num\", this.node), data.id);\n        this.setString(find(\"Name\", this.node), data.row.name);\n        this.setSpriteFrame2(find(\"Icon\", this.node),  \"icon/cooking/\" + data.row.icon);\n        this.setSpriteFrame2(this.node, data.row.bg);\n        this.refreshNumString();\n    }\n\n    refreshNumString() {\n        let seq = 0;\n        let lastRecipeId = 0;\n        let thisObj = this;\n        utilTools.forArr(this.node.parent.children, function(node: Node, index: number) {\n            let nodeRecipeId = node.getComponent(Hexagon).recipeId;\n            if (lastRecipeId != nodeRecipeId) {\n                seq = 0;\n            }\n\n            seq++;\n            lastRecipeId = nodeRecipeId;\n\n            if (node.uuid == thisObj.node.uuid) {\n                return;\n            }\n            return false;\n        });\n\n        this.setString(find(\"Num\", this.node), seq);\n    }\n\n    clearNumString() {\n        this.setString(find(\"Num\", this.node), \"\");\n    }\n}\n\n"]}