{"version":3,"sources":["file:///Users/jingfaxie/Documents/UGit/minigame3/Aby/assets/scripts/game/item/TargetItem.ts"],"names":["_decorator","find","tween","v3","Sprite","Label","Tween","BaseLayer","ccclass","property","TargetItem","type","tooltip","materialId","targetNum","init","id","num","bgColor","icon","setSpriteFrame2","node","bg","setNumString","decreaseTargetNum","showDecreaseTargetNumAnimation","stopAllByTarget","thisObj","delay","call","targetNumLabel","active","tick","to","scale","start"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,I,OAAAA,I;AAAYC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,E,OAAAA,E;AAAIC,MAAAA,M,OAAAA,M;AAAQC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,K,OAAAA,K;;AAClDC,MAAAA,S,iBAAAA,S;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBT,U;;4BAGjBU,U,WADZF,OAAO,CAAC,YAAD,C,UAGHC,QAAQ,CAAC;AAAEE,QAAAA,IAAI,EAAEP,MAAR;AAAgBQ,QAAAA,OAAO,EAAE;AAAzB,OAAD,C,UACRH,QAAQ,CAAC;AAAEE,QAAAA,IAAI,EAAEP,MAAR;AAAgBQ,QAAAA,OAAO,EAAE;AAAzB,OAAD,C,UACRH,QAAQ,CAAC;AAAEE,QAAAA,IAAI,EAAEP,MAAR;AAAgBQ,QAAAA,OAAO,EAAE;AAAzB,OAAD,C,UACRH,QAAQ,CAAC;AAAEE,QAAAA,IAAI,EAAEN,KAAR;AAAeO,QAAAA,OAAO,EAAE;AAAxB,OAAD,C,2BANb,MACaF,UADb;AAAA;AAAA,kCAC0C;AAAA;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAOtC;AAPsC,eAQtCG,UARsC;AAStC;AATsC,eAUtCC,SAVsC;AAAA;;AAYtCC,QAAAA,IAAI,CAACC,EAAD,EAAaC,GAAb,EAA0BC,OAA1B,EAA2CC,IAA3C,EAAyD;AACzD,eAAKN,UAAL,GAAkBG,EAAlB;AACA,eAAKF,SAAL,GAAiBG,GAAjB,EACA,KAAKG,eAAL,CAAqB,KAAKD,IAAL,CAAUE,IAA/B,EAAqC,YAAYF,IAAjD,CADA;AAEA,eAAKC,eAAL,CAAqB,KAAKE,EAAL,CAAQD,IAA7B,EAAmC,eAAeH,OAAlD;AACA,eAAKK,YAAL,CAAkBtB,IAAI,CAAC,KAAD,EAAQ,KAAKoB,IAAb,CAAtB,EAA0C,KAAKP,SAA/C;AACH;;AAEDU,QAAAA,iBAAiB,GAAG;AAChB,cAAI,KAAKV,SAAL,GAAiB,CAArB,EAAwB;AACpB,iBAAKA,SAAL,IAAkB,CAAlB;AACA,iBAAKW,8BAAL;AACH;AACJ;;AAEDA,QAAAA,8BAA8B,GAAG;AAC7BnB,UAAAA,KAAK,CAACoB,eAAN,CAAsB,KAAKL,IAA3B;AAEA,cAAIM,OAAO,GAAG,IAAd;AACAzB,UAAAA,KAAK,CAAC,KAAKmB,IAAN,CAAL,CACKO,KADL,CACW,GADX,EAEKC,IAFL,CAEU,YAAW;AACb;AACA,iBAAKN,YAAL,CAAkBI,OAAO,CAACG,cAA1B,EAA0CH,OAAO,CAACb,SAAlD;AACAa,YAAAA,OAAO,CAACG,cAAR,CAAuBT,IAAvB,CAA4BU,MAA5B,GAAqCJ,OAAO,CAACb,SAAR,GAAoB,CAAzD;AACAa,YAAAA,OAAO,CAACK,IAAR,CAAaX,IAAb,CAAkBU,MAAlB,GAA2BJ,OAAO,CAACb,SAAR,IAAqB,CAAhD;AACH,WAPL,EAQKmB,EARL,CAQQ,IARR,EAQc;AAAEC,YAAAA,KAAK,EAAE/B,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,CAAb;AAAX,WARd,EASK8B,EATL,CASQ,IATR,EASc;AAAEC,YAAAA,KAAK,EAAE/B,EAAE,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP;AAAX,WATd,EAUKgC,KAVL;AAWH;;AA1CqC,O;;;;;iBAEkB,I;;;;;;;iBACI,I;;;;;;;iBACA,I;;;;;;;iBACM,I","sourcesContent":["import { _decorator, find, Quat, tween, v3, Sprite, Label, Tween } from 'cc';\nimport { BaseLayer } from '../../framework/common/BaseLayer';\nconst { ccclass, property } = _decorator;\n\n@ccclass('TargetItem')\nexport class TargetItem extends BaseLayer {\n\n    @property({ type: Sprite, tooltip: \"底图\" }) bg: Sprite = null;\n    @property({ type: Sprite, tooltip: \"食材图标\" }) icon: Sprite = null;\n    @property({ type: Sprite, tooltip: \"打勾图标\" }) tick: Sprite = null;\n    @property({ type: Label, tooltip: \"数量\" }) targetNumLabel: Label = null;\n\n    // 食材id\n    materialId: Number;\n    // 目标数量\n    targetNum: number;\n\n    init(id: number, num: number, bgColor: number, icon: string) {\n        this.materialId = id;\n        this.targetNum = num,\n        this.setSpriteFrame2(this.icon.node, \"shicai/\" + icon);\n        this.setSpriteFrame2(this.bg.node, \"target_bg_\" + bgColor);\n        this.setNumString(find(\"Num\", this.node), this.targetNum);\n    }\n\n    decreaseTargetNum() {\n        if (this.targetNum > 0) {\n            this.targetNum -= 1;\n            this.showDecreaseTargetNumAnimation();\n        }\n    }\n\n    showDecreaseTargetNumAnimation() {\n        Tween.stopAllByTarget(this.node);\n\n        let thisObj = this;\n        tween(this.node)\n            .delay(0.7)\n            .call(function() {\n                // TODO 消除音效\n                this.setNumString(thisObj.targetNumLabel, thisObj.targetNum);\n                thisObj.targetNumLabel.node.active = thisObj.targetNum > 0;    \n                thisObj.tick.node.active = thisObj.targetNum <= 0;     \n            })\n            .to(0.08, { scale: v3(0.85, 0.85, 1) })\n            .to(0.08, { scale: v3(1, 1, 1) })\n            .start();\n    }\n}\n"]}