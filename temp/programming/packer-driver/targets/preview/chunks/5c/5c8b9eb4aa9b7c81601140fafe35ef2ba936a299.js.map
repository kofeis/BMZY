{"version":3,"sources":["file:///Users/jingfaxie/Documents/UGit/minigame3/Aby/assets/scripts/game/layer/TransLayer.ts"],"names":["_decorator","Color","Graphics","Node","macro","tween","view","v3","BaseLayer","ccclass","property","TransLayer","_colorArr","_colorIndex","_uiNode","_radius","onLoad","getNodeByPath","initUI","showLoadingAnimation","schedule","REPEAT_FOREVER","onDestroy","console","log","size","getVisibleSize","pos","height","scale","hexagon","createHexagonNode","addChild","setPosition","to","delay","call","removeFromParent","start","getNextColor","length","node","graphics","addComponent","fillColor","i","x","Math","cos","PI","y","sin","moveTo","lineTo","fill"],"mappings":"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","sourcesContent":["import { _decorator, Color, Graphics, Node, macro, tween, view, v3 } from 'cc';\nimport { BaseLayer } from '../../framework/common/BaseLayer';\n\nconst { ccclass, property } = _decorator;\n\n@ccclass('TransLayer')\nexport class TransLayer extends BaseLayer { \n\n    // 生成六边形颜色列表\n    private _colorArr: string[] = [\"#fce6e6\", \"#bbd7f\", \"#ceb5e5\"];\n    private _colorIndex: number = 0;\n\n    private _uiNode: Node;\n\n    // 六边形半径\n    private _radius = 50;\n\n    onLoad() {\n        super.onLoad();\n\n        this._uiNode = this.getNodeByPath(\"UI\");\n    }\n\n    initUI() {;\n        this.showLoadingAnimation();\n        this.schedule(this.showLoadingAnimation, 0.4, macro.REPEAT_FOREVER, 0);\n    }\n\n    onDestroy() {\n        super.onDestroy();\n    }\n\n    private showLoadingAnimation() {\n        console.log(\"showLoadingAnimation\");\n\n        let size = view.getVisibleSize();\n        // let pos1 = v3(0, size.height * 0.5, 0);\n        let pos = v3(0, 0, 0);\n        let height = this._radius * 1.5;\n        let scale = v3(size.height / height, size.height / height, 1);\n\n        let hexagon = this.createHexagonNode();\n        this._uiNode.addChild(hexagon);\n        hexagon.setPosition(pos);\n        tween(hexagon)\n            .to(0.5, {\n                scale: scale\n            })\n            .delay(1)\n            .call(function() {\n                hexagon.removeFromParent();\n            })\n            .start();\n    }\n\n    private getNextColor(): string {\n        if (this._colorIndex >= this._colorArr.length) {\n            this._colorIndex = 0;\n        }\n        return this._colorArr[this._colorIndex++];\n    }\n\n    private createHexagonNode() {\n        let node = new Node();\n        let graphics = node.addComponent(Graphics);\n        graphics.fillColor = new Color(this.getNextColor());\n\n        // 画六边形\n        for (let i = 0; i <= 6; ++i) {\n            let x = this._radius * Math.cos(i * Math.PI / 3);\n            let y = this._radius * Math.sin(i * Math.PI / 3);\n\n            if (i == 0) {\n                graphics.moveTo(x, y);\n            } else {\n                graphics.lineTo(x, y);\n            }\n        }\n\n        graphics.fill();\n\n        return node;\n    }\n\n}\n"]}