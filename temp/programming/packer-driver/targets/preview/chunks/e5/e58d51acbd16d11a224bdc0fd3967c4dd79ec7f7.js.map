{"version":3,"sources":["file:///Users/jingfaxie/Documents/UGit/minigame3/Aby/assets/scripts/game/item/RecipeItem.ts"],"names":["_decorator","find","Quat","tween","v3","BaseLayer","ccclass","property","RecipeItem","recipeId","remainClearNum","targetClearNum","setView","data","id","setSpriteFrame2","node","row","icon","setNumString","refreshView","showClearAnimation","angle","quat1","fromEuler","quat2","quat3","thisObj","to","scale","rotation","call","start"],"mappings":";;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,E,OAAAA,E;;AAC/BC,MAAAA,S,iBAAAA,S;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBP,U;;4BAGjBQ,U,WADZF,OAAO,CAAC,YAAD,C,gBAAR,MACaE,UADb;AAAA;AAAA,kCAC0C;AAAA;AAAA;AAEtC;AAFsC,eAGtCC,QAHsC;AAItC;AAJsC,eAKtCC,cALsC;AAMtC;AANsC,eAOtCC,cAPsC;AAAA;;AAStCC,QAAAA,OAAO,CAACC,IAAD,EAAY;AACf,eAAKJ,QAAL,GAAgBI,IAAI,CAACC,EAArB;AACA,eAAKH,cAAL,GAAsBE,IAAI,CAACF,cAA3B;AACA,eAAKD,cAAL,GAAsBG,IAAI,CAACF,cAA3B;AACA,eAAKI,eAAL,CAAqBd,IAAI,CAAC,MAAD,EAAS,KAAKe,IAAd,CAAzB,EAA8C,kBAAkBH,IAAI,CAACI,GAAL,CAASC,IAAzE;AACA,eAAKC,YAAL,CAAkBlB,IAAI,CAAC,KAAD,EAAQ,KAAKe,IAAb,CAAtB,EAA0CH,IAAI,CAACF,cAA/C;AACH;;AAEDS,QAAAA,WAAW,GAAG;AACV,eAAKD,YAAL,CAAkBlB,IAAI,CAAC,KAAD,EAAQ,KAAKe,IAAb,CAAtB,EAA0C,KAAKN,cAA/C;AACH;;AAEDW,QAAAA,kBAAkB,GAAG;AACjB,cAAIC,KAAK,GAAG,EAAZ;AACA,cAAIC,KAAK,GAAG,IAAIrB,IAAJ,EAAZ;AACAA,UAAAA,IAAI,CAACsB,SAAL,CAAeD,KAAf,EAAsB,CAAtB,EAAyB,CAAzB,EAA4BD,KAA5B;AACA,cAAIG,KAAK,GAAG,IAAIvB,IAAJ,EAAZ;AACAA,UAAAA,IAAI,CAACsB,SAAL,CAAeC,KAAf,EAAsB,CAAtB,EAAyB,CAAzB,EAA4B,CAACH,KAA7B;AACA,cAAII,KAAK,GAAG,IAAIxB,IAAJ,EAAZ;AACAA,UAAAA,IAAI,CAACsB,SAAL,CAAeE,KAAf,EAAsB,CAAtB,EAAyB,CAAzB,EAA4B,CAA5B;AAEA,cAAIC,OAAO,GAAG,IAAd;AACAxB,UAAAA,KAAK,CAAC,KAAKa,IAAN,CAAL,CACKY,EADL,CACQ,IADR,EACc;AAAEC,YAAAA,KAAK,EAAEzB,EAAE,CAAC,GAAD,EAAM,GAAN,EAAW,CAAX;AAAX,WADd,EAEKwB,EAFL,CAEQ,IAFR,EAEc;AAAEE,YAAAA,QAAQ,EAAEP;AAAZ,WAFd,EAGKK,EAHL,CAGQ,IAHR,EAGc;AAAEE,YAAAA,QAAQ,EAAEL;AAAZ,WAHd,EAIKG,EAJL,CAIQ,IAJR,EAIc;AAAEE,YAAAA,QAAQ,EAAEJ;AAAZ,WAJd,EAKKE,EALL,CAKQ,IALR,EAKc;AAAEC,YAAAA,KAAK,EAAEzB,EAAE,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP;AAAX,WALd,EAMK2B,IANL,CAMU,MAAM;AACRJ,YAAAA,OAAO,CAACjB,cAAR;AACAiB,YAAAA,OAAO,CAACP,WAAR;AACH,WATL,EASOY,KATP;AAUH;;AAzCqC,O","sourcesContent":["import { _decorator, find, Quat, tween, v3 } from 'cc';\nimport { BaseLayer } from '../../framework/common/BaseLayer';\nconst { ccclass, property } = _decorator;\n\n@ccclass('RecipeItem')\nexport class RecipeItem extends BaseLayer {\n\n    // 食材id\n    recipeId: number;\n    // 剩余待消除的食材数量\n    remainClearNum: number;\n    // 总共需要消除的食材数量\n    targetClearNum: number;\n\n    setView(data: any) {\n        this.recipeId = data.id;\n        this.targetClearNum = data.targetClearNum;\n        this.remainClearNum = data.targetClearNum;\n        this.setSpriteFrame2(find(\"Icon\", this.node), \"icon/cooking/\" + data.row.icon);\n        this.setNumString(find(\"Num\", this.node), data.targetClearNum);\n    }\n\n    refreshView() {\n        this.setNumString(find(\"Num\", this.node), this.remainClearNum);\n    }\n\n    showClearAnimation() {\n        let angle = 10;\n        let quat1 = new Quat();\n        Quat.fromEuler(quat1, 0, 0, angle);\n        let quat2 = new Quat();\n        Quat.fromEuler(quat2, 0, 0, -angle);\n        let quat3 = new Quat();\n        Quat.fromEuler(quat3, 0, 0, 0);\n\n        let thisObj = this;\n        tween(this.node)\n            .to(0.12, { scale: v3(1.2, 1.2, 1) })\n            .to(0.08, { rotation: quat1 })\n            .to(0.16, { rotation: quat2 })\n            .to(0.08, { rotation: quat3 })\n            .to(0.08, { scale: v3(1, 1, 1) })\n            .call(() => {\n                thisObj.remainClearNum--;\n                thisObj.refreshView();\n            }).start();\n    }\n\n}\n"]}