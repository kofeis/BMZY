{"version":3,"sources":["file:///D:/Ugit_Project/MathMatchs/assets/Script/Tool/Tool_Event.ts"],"names":["Event_Data","_decorator","Button","Collider2D","color","Color","Component","Contact2DType","Graphics","input","Input","macro","Node","NodeEventType","PolygonCollider2D","RigidBody2D","Tween","tween","UIOpacity","UITransform","v2","v3","view","Tool_Other","Tool_Animation","ccclass","property","Temp_V2","Temp_V3","Event","Listener","Target","Tool_Event","Events","Event_On","Event_Name","listener","console","debug","List","length","i","bin","Data","push","Event_Once","_Listener","$Event","$Args","Event_Off","call","Length","Bin","splice","Event_Off_Target","Object","prototype","hasOwnProperty","Event_Datas","Event_Dispatch","Args","list","Temp","concat","Event_Bin","On_Event_TOUCH_START","Node_Set","Call","on","TOUCH_START","On_Event_TOUCH_END","UseCapture","TargetObj","undefined","IsUseCapture","TOUCH_END","On_Event_TOUCH_CANCEL","TOUCH_CANCEL","On_Event_TOUCH_MOVE","TOUCH_MOVE","Off_Event_TOUCH_START","off","Off_Event_TOUCH_END","Off_Event_TOUCH_CANCEL","Off_Event_TOUCH_MOVE","Off_Event_TOUCH_All","On_Event_TOUCH_Pressing","Response_Time","Pressing_Call","Pressend_Call","Is_Pressing","Pressing","scheduleOnce","name","Pressend","stopAllByTarget","Start_Obj","num","instance","Async_Function_Target","Target_Width","target","getComponent","width","Target_Height","height","Pos_Touch_World","getUILocation","x","y","z","Pos_Target_World","getWorldPosition","On_Event_TOUCH_Presslong","Press_Long_Call","Press_Short_Call","Is_Press_Long","Is_Cancel","Press_Long","Press_Short","Press_Shorteee","On_Event_TOUCH_Double","Touch_Count_All","Touch_Interval","Double_On_Call","Double_Off_Call","Touch_Count","On_Event_TOUCH_Drag","Interactable","TOUCH_START_Call","TOUCH_MOVE_Call","TOUCH_END_Call","Pos_Touch_Change","Pos_Touch_Start","Pos_Touch_End","HalfScreenWidth","getDesignResolutionSize","HalfScreenHeight","Get_Touch_Position","Switch","position","clone","Pos_Touch","Pos_Target","add","subtract","On_Event_TOUCH_Slide","Return","Angle","Distance","Get_Angle","Get_Distance","On_Event_MOUSE_DOWN","MOUSE_DOWN","On_Event_MOUSE_UP","MOUSE_UP","On_Event_MOUSE_MOVE","MOUSE_MOVE","On_Event_MOUSE_WHEEL","MOUSE_WHEEL","On_Event_MOUSE_ENTER","MOUSE_ENTER","On_Event_MOUSE_LEAVE","MOUSE_LEAVE","On_KEY_DOWN","EventType","KEY_DOWN","On_KEY_PRESSING","KEY_PRESSING","On_KEY_UP","KEY_UP","On_Sys_DEVICEMOTION","DEVICEMOTION","Set_Btn_Event_Add","Target_Node","Scr_Name","Fun_Name","CustomEventData","Component_Button","addComponent","Component_UIOpacity","EventHandler","component","handler","customEventData","clickEvents","Set_Btn_Event_Anim","Anim_Switch","transition","Anim_State","Anim_On","Anim_Off","zoomScale","duration","Time","to","scale","start","opacity","Set_Btn_Event_Reset","resetInEditor","On_Anim_Frame_Once","Anim","once","node","On_Anim_Frame","Off_Anim_Frame","On_Collider_PRE_SOLVE","Component_Collider","Get_Type_Is_Abnormal","enabled","Component_RigidBody2D","enabledContactListener","PRE_SOLVE","Self_Collider","Other_Collider","Contact","On_Collider_BEGIN_CONTACT","BEGIN_CONTACT","On_Collider_END_CONTACT","END_CONTACT","On_Collider_POST_SOLVE","POST_SOLVE","Off_Collider","Draw_Line_RigidBody","Canvas_Node","Stroke_Color","Line_Width","ENABLE_MULTI_TOUCH","CurGraphics","Point_List","PreK","Get_UI_Pos","Pos","set","convertToNodeSpaceAR","Should_Add_Point","DiffX","DiffY","K","CurK","Math","abs","Number","MAX_SAFE_INTEGER","sign","pop","On_Touch_Start","Node_Point","layer","addChild","strokeColor","WHITE","lineWidth","moveTo","On_Touch_Move","preX","preY","lineTo","stroke","Create_Colliders","destroy","Pos_Start","Pos_End","PolygonCollider","normalize","Width_Half","Pos1","multiplyScalar","add2f","Pos2","Pos3","Pos4","points","apply","On_Touch_End","Draw_Line","Arr_Pos","Component_Graphics","clear","Clear_Line"],"mappings":";;;2TAmBMA,U;;;;;;;;;;;;;;;;;AAnBGC,MAAAA,U,OAAAA,U;AAAYC,MAAAA,M,OAAAA,M;AAAkBC,MAAAA,U,OAAAA,U;AAAYC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,a,OAAAA,a;AAA2BC,MAAAA,Q,OAAAA,Q;AAAUC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,a,OAAAA,a;AAAeC,MAAAA,iB,OAAAA,iB;AAAmBC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,E,OAAAA,E;AAAIC,MAAAA,E,OAAAA,E;AAAgBC,MAAAA,I,OAAAA,I;;AAC5OC,MAAAA,U,iBAAAA,U;;AACAC,MAAAA,c,iBAAAA,c;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBzB,U;AAExB0B,MAAAA,O,GAAUP,EAAE,E;AACZQ,MAAAA,O,GAAUP,EAAE,E;AAMlB;AACA;AACA;AACA;AACA;;AAGMrB,MAAAA,U,GAAN,MAAMA,UAAN,CAAiB;AAAA;AAAA,eACN6B,KADM;AAAA,eAENC,QAFM;AAAA,eAGNC,MAHM;AAAA;;AAAA,O;;4BAOJC,U,WADZP,OAAO,CAAC,YAAD,C,4BAAR,MACaO,UADb,SACgC1B,SADhC,CAC0C;AAAA;AAAA;AAAA,eAI9B2B,MAJ8B,GAIiB,EAJjB;AAAA;;AAMtC;AACJ;AACA;AACA;AACA;AACA;AACIC,QAAAA,QAAQ,CAACC,UAAD,EAAqBC,QAArB,EAA6CL,MAA7C,EAA+D;AACnE,cAAI,CAACI,UAAD,IAAe,CAACC,QAApB,EAA8B;AAC1BC,YAAAA,OAAO,CAACC,KAAR,CAAe,IAAGH,UAAW,SAA7B;AACA;AACH;;AACD,cAAII,IAAuB,GAAG,KAAKN,MAAL,CAAYE,UAAZ,CAA9B;;AACA,cAAII,IAAI,IAAI,IAAZ,EAAkB;AACdA,YAAAA,IAAI,GAAG,EAAP;AACA,iBAAKN,MAAL,CAAYE,UAAZ,IAA0BI,IAA1B;AACH;;AACD,cAAIC,MAAM,GAAGD,IAAI,CAACC,MAAlB;;AACA,eAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,MAApB,EAA4BC,CAAC,EAA7B,EAAiC;AAC7B,gBAAIC,GAAG,GAAGH,IAAI,CAACE,CAAD,CAAd;;AACA,gBAAIC,GAAG,CAACZ,QAAJ,IAAgBM,QAAhB,IAA4BM,GAAG,CAACX,MAAJ,IAAcA,MAA9C,EAAsD;AAClDM,cAAAA,OAAO,CAACC,KAAR,CAAe,IAAGH,UAAW,SAA7B;AACH;AACJ;;AACD,cAAIQ,IAAgB,GAAG,IAAI3C,UAAJ,EAAvB;AACA2C,UAAAA,IAAI,CAACd,KAAL,GAAaM,UAAb;AACAQ,UAAAA,IAAI,CAACb,QAAL,GAAgBM,QAAhB;AACAO,UAAAA,IAAI,CAACZ,MAAL,GAAcA,MAAd;AACAQ,UAAAA,IAAI,CAACK,IAAL,CAAUD,IAAV;AACH;AAED;AACJ;AACA;AACA;AACA;AACA;;;AACIE,QAAAA,UAAU,CAACV,UAAD,EAAqBL,QAArB,EAA6CC,MAA7C,EAA+D;AACrE,cAAIe,SAAc,GAAG,CAACC,MAAD,EAAiBC,KAAjB,KAAgC;AACjD,iBAAKC,SAAL,CAAed,UAAf,EAA2BW,SAA3B,EAAsCf,MAAtC;AACAe,YAAAA,SAAS,GAAG,IAAZ;AACAhB,YAAAA,QAAQ,CAACoB,IAAT,CAAcnB,MAAd,EAAsBgB,MAAtB,EAA8BC,KAA9B;AACH,WAJD;;AAKA,eAAKd,QAAL,CAAcC,UAAd,EAA0BW,SAA1B,EAAqCf,MAArC;AACH;AAED;AACJ;AACA;AACA;AACA;AACA;;;AACIkB,QAAAA,SAAS,CAACd,UAAD,EAAqBL,QAArB,EAAyCC,MAAzC,EAA2D;AAChE,cAAIQ,IAAuB,GAAG,KAAKN,MAAL,CAAYE,UAAZ,CAA9B;;AACA,cAAI,CAACI,IAAL,EAAW;AACPF,YAAAA,OAAO,CAACC,KAAR,CAAe,IAAGH,UAAW,QAA7B;AACA;AACH;;AACD,cAAIgB,MAAM,GAAGZ,IAAI,CAACC,MAAlB;;AACA,eAAK,IAAIC,CAAC,GAAGU,MAAM,GAAG,CAAtB,EAAyBV,CAAC,IAAI,CAA9B,EAAiCA,CAAC,EAAlC,EAAsC;AAClC,gBAAIW,GAAe,GAAGb,IAAI,CAACE,CAAD,CAA1B;;AACA,gBAAIW,GAAG,CAACtB,QAAJ,IAAgBA,QAAhB,IAA4BsB,GAAG,CAACrB,MAAJ,IAAcA,MAA9C,EAAsD;AAClDQ,cAAAA,IAAI,CAACc,MAAL,CAAYZ,CAAZ,EAAe,CAAf;AACA;AACH;AACJ;;AACD,cAAIF,IAAI,CAACC,MAAL,IAAe,CAAnB,EAAsB;AAClB,mBAAO,KAAKP,MAAL,CAAYE,UAAZ,CAAP;AACH;AACJ;AACD;AACJ;AACA;AACA;;;AACImB,QAAAA,gBAAgB,CAACvB,MAAD,EAAmB;AAC/B,eAAK,MAAMI,UAAX,IAAyB,KAAKF,MAA9B,EAAsC;AAClC,gBAAIsB,MAAM,CAACC,SAAP,CAAiBC,cAAjB,CAAgCP,IAAhC,CAAqC,KAAKjB,MAA1C,EAAkDE,UAAlD,CAAJ,EAAmE;AAC/D,oBAAMuB,WAAW,GAAG,KAAKzB,MAAL,CAAYE,UAAZ,CAApB;AACA,kBAAIK,MAAM,GAAGkB,WAAW,CAAClB,MAAzB;;AACA,mBAAK,IAAIC,CAAC,GAAGD,MAAM,GAAG,CAAtB,EAAyBC,CAAC,IAAI,CAA9B,EAAiCA,CAAC,EAAlC,EAAsC;AAClC,oBAAIzC,UAAsB,GAAG0D,WAAW,CAACjB,CAAD,CAAxC;;AACA,oBAAIzC,UAAU,CAAC+B,MAAX,KAAsBA,MAA1B,EAAkC;AAC9B2B,kBAAAA,WAAW,CAACL,MAAZ,CAAmBZ,CAAnB,EAAsB,CAAtB;AACA;AACH;AACJ;;AACD,kBAAIiB,WAAW,CAAClB,MAAZ,IAAsB,CAA1B,EAA6B;AACzB,uBAAO,KAAKP,MAAL,CAAYE,UAAZ,CAAP;AACH;AACJ;AACJ;AACJ;AACD;AACJ;AACA;AACA;AACA;;;AACIwB,QAAAA,cAAc,CAACxB,UAAD,EAAqByB,IAAS,GAAG,IAAjC,EAAuC;AACjD,cAAIC,IAAuB,GAAG,KAAK5B,MAAL,CAAYE,UAAZ,CAA9B;;AACA,cAAI0B,IAAI,IAAI,IAAZ,EAAkB;AACd,gBAAIC,IAAuB,GAAGD,IAAI,CAACE,MAAL,EAA9B;AACA,gBAAIZ,MAAM,GAAGW,IAAI,CAACtB,MAAlB;;AACA,iBAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGU,MAApB,EAA4BV,CAAC,EAA7B,EAAiC;AAC7B,kBAAIuB,SAAS,GAAGF,IAAI,CAACrB,CAAD,CAApB;AACAuB,cAAAA,SAAS,CAAClC,QAAV,CAAmBoB,IAAnB,CAAwBc,SAAS,CAACjC,MAAlC,EAA0CI,UAA1C,EAAsDyB,IAAtD;AACH;AACJ;AACJ;AAED;;;AACAK,QAAAA,oBAAoB,CAACC,QAAD,EAAiBC,IAAc,GAAItC,KAAD,IAAW,CAAG,CAAhD,EAAkD;AAClEqC,UAAAA,QAAQ,CAACE,EAAT,CAAYvD,aAAa,CAACwD,WAA1B,EAAuCF,IAAvC,EAA6CD,QAA7C;AACH;AACD;;;AACAI,QAAAA,kBAAkB,CACdJ,QADc,EAEdC,IAAc,GAAItC,KAAD,IAAW,CAAG,CAFjB,EAGdE,MAHc,EAIdwC,UAJc,EAKhB;AACE;AACA,gBAAMC,SAAS,GAAGzC,MAAM,KAAK0C,SAAX,GAAuB1C,MAAvB,GAAgCmC,QAAlD,CAFF,CAGE;;AACA,gBAAMQ,YAAY,GAAGH,UAAU,KAAKE,SAAf,GAA2BF,UAA3B,GAAwC,KAA7D,CAJF,CAKE;;AACAL,UAAAA,QAAQ,CAACE,EAAT,CAAYvD,aAAa,CAAC8D,SAA1B,EAAqCR,IAArC,EAA2CK,SAA3C,EAAsDE,YAAtD;AACH;AAED;;;AACAE,QAAAA,qBAAqB,CAACV,QAAD,EAAiBC,IAAc,GAAItC,KAAD,IAAW,CAAG,CAAhD,EAAkD;AACnEqC,UAAAA,QAAQ,CAACE,EAAT,CAAYvD,aAAa,CAACgE,YAA1B,EAAwCV,IAAxC,EAA8CD,QAA9C;AACH;AACD;;;AACAY,QAAAA,mBAAmB,CAACZ,QAAD,EAAiBC,IAAc,GAAItC,KAAD,IAAW,CAAG,CAAhD,EAAkD;AACjEqC,UAAAA,QAAQ,CAACE,EAAT,CAAYvD,aAAa,CAACkE,UAA1B,EAAsCZ,IAAtC,EAA4CD,QAA5C;AACH;AAED;;;AACAc,QAAAA,qBAAqB,CAACd,QAAD,EAAiBC,IAAc,GAAItC,KAAD,IAAW,CAAG,CAAhD,EAAkD;AACnEqC,UAAAA,QAAQ,CAACe,GAAT,CAAapE,aAAa,CAACwD,WAA3B,EAAwCF,IAAxC,EAA8CD,QAA9C;AACH;AACD;;;AACAgB,QAAAA,mBAAmB,CAAChB,QAAD,EAAiBC,IAAc,GAAItC,KAAD,IAAW,CAAG,CAAhD,EAAkD;AACjEqC,UAAAA,QAAQ,CAACe,GAAT,CAAapE,aAAa,CAAC8D,SAA3B,EAAsCR,IAAtC,EAA4CD,QAA5C;AACH;AACD;;;AACAiB,QAAAA,sBAAsB,CAACjB,QAAD,EAAiBC,IAAc,GAAItC,KAAD,IAAW,CAAG,CAAhD,EAAkD;AACpEqC,UAAAA,QAAQ,CAACe,GAAT,CAAapE,aAAa,CAACgE,YAA3B,EAAyCV,IAAzC,EAA+CD,QAA/C;AACH;AACD;;;AACAkB,QAAAA,oBAAoB,CAAClB,QAAD,EAAiBC,IAAc,GAAItC,KAAD,IAAW,CAAG,CAAhD,EAAkD;AAClEqC,UAAAA,QAAQ,CAACe,GAAT,CAAapE,aAAa,CAACkE,UAA3B,EAAuCZ,IAAvC,EAA6CD,QAA7C;AACH;AACD;;;AACAmB,QAAAA,mBAAmB,CAACnB,QAAD,EAAiB;AAChCA,UAAAA,QAAQ,CAACe,GAAT,CAAapE,aAAa,CAACwD,WAA3B;AACAH,UAAAA,QAAQ,CAACe,GAAT,CAAapE,aAAa,CAAC8D,SAA3B;AACAT,UAAAA,QAAQ,CAACe,GAAT,CAAapE,aAAa,CAACgE,YAA3B;AACAX,UAAAA,QAAQ,CAACe,GAAT,CAAapE,aAAa,CAACkE,UAA3B;AACH;AAED;AACJ;AACA;AACA;AACA;AACA;;;AACIO,QAAAA,uBAAuB,CAACpB,QAAD,EAAiBqB,aAAjB,EAAwCC,aAAuB,GAAG,MAAM,CAAG,CAA3E,EAA6EC,aAAuB,GAAG,MAAM,CAAG,CAAhH,EAAkH;AACrI,cAAIC,WAAW,GAAG,KAAlB;;AACA,gBAAMC,QAAQ,GAAG,MAAM;AACnB,gBAAID,WAAJ,EAAiB;AACb,mBAAKE,YAAL,CAAkB,MAAM;AACpB,oBAAIF,WAAJ,EAAiB;AACbrD,kBAAAA,OAAO,CAACC,KAAR,CAAc,IAAd,EAAoB4B,QAAQ,CAAC2B,IAA7B;AACAL,kBAAAA,aAAa,IAAIA,aAAa,EAA9B;AACAG,kBAAAA,QAAQ;AACX;AACJ,eAND,EAMG,IANH;AAOH;AACJ,WAVD;;AAWA,gBAAMG,QAAQ,GAAG,MAAM;AACnB9E,YAAAA,KAAK,CAAC+E,eAAN,CAAsBC,SAAtB;AACAP,YAAAA,aAAa,IAAIA,aAAa,EAA9B;AACH,WAHD;;AAIA,cAAIO,SAAS,GAAG;AAAEC,YAAAA,GAAG,EAAE;AAAP,WAAhB;AACA,eAAKhC,oBAAL,CAA0BC,QAA1B,EAAoC,MAAM;AACtC8B,YAAAA,SAAS,GAAG;AAAEC,cAAAA,GAAG,EAAE;AAAP,aAAZ;AACA;AAAA;AAAA,kDAAeC,QAAf,CAAwBC,qBAAxB,CAA8CZ,aAA9C,EAA6DS,SAA7D,EAAwE,MAAM;AAC1EN,cAAAA,WAAW,GAAG,IAAd;AACAC,cAAAA,QAAQ;AACX,aAHD;AAIH,WAND;AAOA,eAAKrB,kBAAL,CAAwBJ,QAAxB,EAAkC,MAAM;AACpCwB,YAAAA,WAAW,GAAG,KAAd;AACAI,YAAAA,QAAQ;AACX,WAHD;AAIA,eAAKlB,qBAAL,CAA2BV,QAA3B,EAAqC,MAAM;AACvCwB,YAAAA,WAAW,GAAG,KAAd;AACAI,YAAAA,QAAQ;AACX,WAHD;AAIA,eAAKhB,mBAAL,CAAyBZ,QAAzB,EAAoCrC,KAAD,IAAW;AAC1C;AACA;AACA,gBAAIuE,YAAY,GAAGvE,KAAK,CAACwE,MAAN,CAAaC,YAAb,CAA0BnF,WAA1B,EAAuCoF,KAA1D;AACA,gBAAIC,aAAa,GAAG3E,KAAK,CAACwE,MAAN,CAAaC,YAAb,CAA0BnF,WAA1B,EAAuCsF,MAA3D;AACA,gBAAIC,eAAe,GAAGrF,EAAE,CAACQ,KAAK,CAAC8E,aAAN,GAAsBC,CAAvB,EAA0B/E,KAAK,CAAC8E,aAAN,GAAsBE,CAAhD,EAAmDhF,KAAK,CAAC8E,aAAN,GAAsBG,CAAzE,CAAxB;AACA,gBAAIC,gBAAgB,GAAGlF,KAAK,CAACwE,MAAN,CAAaW,gBAAb,EAAvB;;AACA,gBAAIN,eAAe,CAACE,CAAhB,GAAoBG,gBAAgB,CAACH,CAAjB,GAAqBR,YAAY,GAAG,CAAxD,IAA6DM,eAAe,CAACE,CAAhB,GAAoBG,gBAAgB,CAACH,CAAjB,GAAqBR,YAAY,GAAG,CAArH,IAA0HM,eAAe,CAACG,CAAhB,GAAoBE,gBAAgB,CAACF,CAAjB,GAAqBL,aAAa,GAAG,CAAnL,IAAwLE,eAAe,CAACG,CAAhB,GAAoBE,gBAAgB,CAACF,CAAjB,GAAqBL,aAAa,GAAG,CAArP,EAAwP;AACpP,kBAAI,CAACd,WAAL,EAAkB;AACd;AACH;;AACDA,cAAAA,WAAW,GAAG,KAAd;AACAI,cAAAA,QAAQ;AACX,aAND,MAMO;AACH,kBAAIJ,WAAJ,EAAiB;AACb;AACH;;AACDA,cAAAA,WAAW,GAAG,IAAd;AACAC,cAAAA,QAAQ;AACX;AACJ,WApBD;AAqBH;AACD;AACJ;AACA;AACA;AACA;AACA;;;AACIsB,QAAAA,wBAAwB,CAAC/C,QAAD,EAAiBqB,aAAjB,EAAwC2B,eAAyB,GAAG,MAAM,CAAG,CAA7E,EAA+EC,gBAA0B,GAAG,MAAM,CAAG,CAArH,EAAuH;AAC3I,cAAIC,aAAa,GAAG,KAApB;AACA,cAAIC,SAAS,GAAG,KAAhB;;AACA,gBAAMC,UAAU,GAAG,MAAM;AACrBjF,YAAAA,OAAO,CAACC,KAAR,CAAc,IAAd,EAAoB4B,QAAQ,CAAC2B,IAA7B;AACAuB,YAAAA,aAAa,GAAG,IAAhB;AACAF,YAAAA,eAAe,IAAIA,eAAe,EAAlC;AACH,WAJD;;AAKA,gBAAMK,WAAW,GAAG,MAAM;AACtB,gBAAIF,SAAJ,EAAe;AACX;AACH;;AACD,gBAAI,CAACD,aAAL,EAAoB;AAChB/E,cAAAA,OAAO,CAACC,KAAR,CAAc,IAAd,EAAoB4B,QAAQ,CAAC2B,IAA7B;AACA7E,cAAAA,KAAK,CAAC+E,eAAN,CAAsBC,SAAtB;AACAmB,cAAAA,gBAAgB,IAAIA,gBAAgB,EAApC;AACH,aAJD,MAIO;AACHC,cAAAA,aAAa,GAAG,KAAhB;AACH;AACJ,WAXD;;AAYA,gBAAMI,cAAc,GAAI3F,KAAD,IAAW;AAC9B,gBAAI,CAACwF,SAAL,EAAgB;AACZ,kBAAIX,eAAe,GAAGrF,EAAE,CAACQ,KAAK,CAAC8E,aAAN,GAAsBC,CAAvB,EAA0B/E,KAAK,CAAC8E,aAAN,GAAsBE,CAAhD,EAAmDhF,KAAK,CAAC8E,aAAN,GAAsBG,CAAzE,CAAxB;AACA,kBAAIC,gBAAgB,GAAGlF,KAAK,CAACwE,MAAN,CAAaW,gBAAb,EAAvB;;AACA,kBAAIN,eAAe,CAACE,CAAhB,GAAoBG,gBAAgB,CAACH,CAAjB,GAAqBR,YAAY,GAAG,CAAxD,IAA6DM,eAAe,CAACE,CAAhB,GAAoBG,gBAAgB,CAACH,CAAjB,GAAqBR,YAAY,GAAG,CAArH,IAA0HM,eAAe,CAACG,CAAhB,GAAoBE,gBAAgB,CAACF,CAAjB,GAAqBL,aAAa,GAAG,CAAnL,IAAwLE,eAAe,CAACG,CAAhB,GAAoBE,gBAAgB,CAACF,CAAjB,GAAqBL,aAAa,GAAG,CAArP,EAAwP;AACpPxF,gBAAAA,KAAK,CAAC+E,eAAN,CAAsBC,SAAtB;AACAqB,gBAAAA,SAAS,GAAG,IAAZ;AACA,qBAAKjC,oBAAL,CAA0BlB,QAA1B,EAAoCsD,cAApC;AACH;AACJ;AACJ,WAVD;;AAWA,gBAAMpB,YAAY,GAAGlC,QAAQ,CAACoC,YAAT,CAAsBnF,WAAtB,EAAmCoF,KAAxD;AACA,gBAAMC,aAAa,GAAGtC,QAAQ,CAACoC,YAAT,CAAsBnF,WAAtB,EAAmCsF,MAAzD;AACA,cAAIT,SAAS,GAAG;AAAEC,YAAAA,GAAG,EAAE;AAAP,WAAhB;AACA,eAAKhC,oBAAL,CAA0BC,QAA1B,EAAoC,MAAM;AACtCkD,YAAAA,aAAa,GAAG,KAAhB;AACAC,YAAAA,SAAS,GAAG,KAAZ;AACArB,YAAAA,SAAS,GAAG;AAAEC,cAAAA,GAAG,EAAE;AAAP,aAAZ;AACA;AAAA;AAAA,kDAAeC,QAAf,CAAwBC,qBAAxB,CAA8CZ,aAA9C,EAA6DS,SAA7D,EAAwE,MAAM;AAC1EsB,cAAAA,UAAU;AACb,aAFD;AAGH,WAPD;AAQA,eAAKhD,kBAAL,CAAwBJ,QAAxB,EAAkC,MAAM;AACpCqD,YAAAA,WAAW;AACd,WAFD;AAGA,eAAK3C,qBAAL,CAA2BV,QAA3B,EAAqC,MAAM;AACvCkD,YAAAA,aAAa,GAAG,KAAhB;AACH,WAFD;AAKA,eAAKtC,mBAAL,CAAyBZ,QAAzB,EAAmCsD,cAAnC,EAlD2I,CAoD3I;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACH;AACD;AACJ;AACA;AACA;AACA;AACA;AACA;;;AACIC,QAAAA,qBAAqB,CAACvD,QAAD,EAAiBwD,eAAuB,GAAG,CAA3C,EAA8CC,cAAsB,GAAG,IAAvE,EAA6EC,cAAwB,GAAG,MAAM,CAAG,CAAjH,EAAmHC,eAAyB,GAAG,MAAM,CAAG,CAAxJ,EAA0J;AAC3K,cAAI7B,SAAS,GAAG;AAAEC,YAAAA,GAAG,EAAE;AAAP,WAAhB;AACA,cAAI6B,WAAmB,GAAG,CAA1B;AACA,eAAK7D,oBAAL,CAA0BC,QAA1B,EAAoC,MAAM;AACtClD,YAAAA,KAAK,CAAC+E,eAAN,CAAsBC,SAAtB;AACA8B,YAAAA,WAAW;;AACX,gBAAIA,WAAW,IAAIJ,eAAnB,EAAoC;AAChCI,cAAAA,WAAW,GAAG,CAAd;AACAzF,cAAAA,OAAO,CAACC,KAAR,CAAc,IAAd,EAAoB4B,QAAQ,CAAC2B,IAA7B;AACA+B,cAAAA,cAAc,IAAIA,cAAc,EAAhC;AACH;;AACD5B,YAAAA,SAAS,GAAG;AAAEC,cAAAA,GAAG,EAAE;AAAP,aAAZ;AACA;AAAA;AAAA,kDAAeC,QAAf,CAAwBC,qBAAxB,CAA8CwB,cAA9C,EAA8D3B,SAA9D,EAAyE,MAAM;AAC3E8B,cAAAA,WAAW,GAAG,CAAd;AACH,aAFD;AAGH,WAZD;AAaA,eAAKxD,kBAAL,CAAwBJ,QAAxB,EAAkCC,IAAlC;AACA,eAAKS,qBAAL,CAA2BV,QAA3B,EAAqCC,IAArC;;AACA,mBAASA,IAAT,GAAgB;AACZ0D,YAAAA,eAAe,IAAIA,eAAe,EAAlC;AACH;AACJ;AAED;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACIE,QAAAA,mBAAmB,CAAC7D,QAAD,EAAiB8D,YAAsB,GAAG,MAAM,IAAhD,EAAsDC,gBAA0B,GAAG,MAAM,CAAG,CAA5F,EAA8FC,eAAyB,GAAG,MAAM,CAAG,CAAnI,EAAqIC,cAAwB,GAAG,MAAM,CAAG,CAAzK,EAA2K;AAC1L;AACA,cAAIC,gBAA6B,GAAG,IAApC,CAF0L,CAG1L;;AACA,cAAIC,eAA4B,GAAG,IAAnC,CAJ0L,CAK1L;;AACA,cAAIC,aAA0B,GAAG,IAAjC,CAN0L,CAO1L;;AACA,gBAAMC,eAAe,GAAGjH,IAAI,CAACkH,uBAAL,GAA+BjC,KAA/B,GAAuC,CAA/D;AACA,gBAAMkC,gBAAgB,GAAGnH,IAAI,CAACkH,uBAAL,GAA+B/B,MAA/B,GAAwC,CAAjE,CAT0L,CAU1L;;AACA,gBAAMiC,kBAAkB,GAAI7G,KAAD,IAAsB;AAC7C,mBAAOR,EAAE,CACLQ,KAAK,CAAC8E,aAAN,GAAsBC,CAAtB,GAA0B2B,eADrB,EAEL1G,KAAK,CAAC8E,aAAN,GAAsBE,CAAtB,GAA0B4B,gBAFrB,EAGL,CAHK,CAAT;AAKH,WAND;;AAOA,cAAIE,MAAe,GAAG,KAAtB;AACA,eAAK1E,oBAAL,CAA0BC,QAA1B,EAAqCrC,KAAD,IAAgB;AAChD;AACA,gBAAI,CAACmG,YAAY,EAAjB,EAAqB;AACjBW,cAAAA,MAAM,GAAG,KAAT;AACA;AACH,aAHD,MAGO;AACHA,cAAAA,MAAM,GAAG,IAAT;AACH,aAP+C,CAQhD;;;AACAN,YAAAA,eAAe,GAAGnE,QAAQ,CAAC0E,QAAT,CAAkBC,KAAlB,EAAlB;AACAT,YAAAA,gBAAgB,GAAGM,kBAAkB,CAAC7G,KAAD,CAArC;AACAoG,YAAAA,gBAAgB,QAAhB,IAAAA,gBAAgB,CAAGpG,KAAH,EAAUwG,eAAV,CAAhB;AACH,WAZD;AAaA,eAAKvD,mBAAL,CAAyBZ,QAAzB,EAAoCrC,KAAD,IAAgB;AAC/C;AACA,gBAAI,CAACmG,YAAY,EAAb,IAAmB,CAACI,gBAAxB,EAA0C;AACtCO,cAAAA,MAAM,GAAG,KAAT;AACA;AACH;;AACD,gBAAI,CAACA,MAAL,EAAa;AACT;AACH,aAR8C,CAS/C;;;AACA,kBAAMG,SAAS,GAAGJ,kBAAkB,CAAC7G,KAAD,CAApC;AACA,kBAAMkH,UAAU,GAAG7E,QAAQ,CAAC0E,QAAT,CAAkBC,KAAlB,GAA0BG,GAA1B,CAA8BF,SAAS,CAACD,KAAV,GAAkBI,QAAlB,CAA2Bb,gBAA3B,CAA9B,CAAnB,CAX+C,CAY/C;;AACAlE,YAAAA,QAAQ,CAAC0E,QAAT,GAAoBG,UAApB,CAb+C,CAc/C;;AACAX,YAAAA,gBAAgB,GAAGU,SAAnB;AACAZ,YAAAA,eAAe,QAAf,IAAAA,eAAe,CAAGrG,KAAH,EAAUwG,eAAV,CAAf;AACH,WAjBD;AAkBA,eAAK/D,kBAAL,CAAwBJ,QAAxB,EAAmCrC,KAAD,IAAgB;AAC9C;AACA,gBAAI,CAACmG,YAAY,EAAjB,EAAqB;AACjB;AACH;;AACD,gBAAI,CAACW,MAAL,EAAa;AACT;AACH,aAP6C,CAQ9C;;;AACAR,YAAAA,cAAc,QAAd,IAAAA,cAAc,CAAGtG,KAAH,EAAUwG,eAAV,EAA2BC,aAA3B,CAAd;AACAA,YAAAA,aAAa,GAAGI,kBAAkB,CAAC7G,KAAD,CAAlC;AACH,WAXD;AAYA,eAAK+C,qBAAL,CAA2BV,QAA3B,EAAsCrC,KAAD,IAAgB;AACjD;AACA,gBAAI,CAACmG,YAAY,EAAjB,EAAqB;AACjB;AACH;;AACD,gBAAI,CAACW,MAAL,EAAa;AACT;AACH;;AACDL,YAAAA,aAAa,GAAGI,kBAAkB,CAAC7G,KAAD,CAAlC,CARiD,CASjD;;AACAsG,YAAAA,cAAc,QAAd,IAAAA,cAAc,CAAGtG,KAAH,EAAUwG,eAAV,EAA2BC,aAA3B,CAAd;AACH,WAXD;AAaH;AACD;AACJ;AACA;AACA;;;AACIY,QAAAA,oBAAoB,CAAChF,QAAD,EAAiBC,IAAc,GAAG,MAAM,CAAG,CAA3C,EAA6C;AAC7D,cAAIkE,eAAqB,GAAG,IAA5B;AACA,cAAID,gBAAsB,GAAG,IAA7B;AACA,cAAIe,MAAyD,GAAG;AAAEC,YAAAA,KAAK,EAAE,IAAT;AAAeC,YAAAA,QAAQ,EAAE;AAAzB,WAAhE;AACA,eAAKpF,oBAAL,CAA0BC,QAA1B,EAAqCrC,KAAD,IAAW;AAC3CwG,YAAAA,eAAe,GAAGhH,EAAE,CAACQ,KAAK,CAAC8E,aAAN,GAAsBC,CAAtB,GAA0BtF,IAAI,CAACkH,uBAAL,GAA+BjC,KAA/B,GAAuC,CAAlE,EAAqE1E,KAAK,CAAC8E,aAAN,GAAsBE,CAAtB,GAA0BvF,IAAI,CAACkH,uBAAL,GAA+B/B,MAA/B,GAAwC,CAAvI,EAA0I,CAA1I,CAApB;AACH,WAFD;AAGA,eAAKnC,kBAAL,CAAwBJ,QAAxB,EAAmCrC,KAAD,IAAW;AACzCuG,YAAAA,gBAAgB,GAAG/G,EAAE,CAACQ,KAAK,CAAC8E,aAAN,GAAsBC,CAAtB,GAA0BtF,IAAI,CAACkH,uBAAL,GAA+BjC,KAA/B,GAAuC,CAAlE,EAAqE1E,KAAK,CAAC8E,aAAN,GAAsBE,CAAtB,GAA0BvF,IAAI,CAACkH,uBAAL,GAA+B/B,MAA/B,GAAwC,CAAvI,EAA0I,CAA1I,CAArB;AACA0C,YAAAA,MAAM,CAACC,KAAP,GAAe;AAAA;AAAA,kDAAelD,QAAf,CAAwBoD,SAAxB,CAAkCjB,eAAlC,EAAmDD,gBAAnD,CAAf;AACAe,YAAAA,MAAM,CAACE,QAAP,GAAkB;AAAA;AAAA,kDAAenD,QAAf,CAAwBqD,YAAxB,CAAqClB,eAArC,EAAsDD,gBAAtD,CAAlB;AACAjE,YAAAA,IAAI,QAAJ,IAAAA,IAAI,CAAGgF,MAAM,CAACC,KAAV,EAAiBD,MAAM,CAACE,QAAxB,CAAJ;AACH,WALD;AAMA,eAAKzE,qBAAL,CAA2BV,QAA3B,EAAsCrC,KAAD,IAAW;AAC5CuG,YAAAA,gBAAgB,GAAG/G,EAAE,CAACQ,KAAK,CAAC8E,aAAN,GAAsBC,CAAtB,GAA0BtF,IAAI,CAACkH,uBAAL,GAA+BjC,KAA/B,GAAuC,CAAlE,EAAqE1E,KAAK,CAAC8E,aAAN,GAAsBE,CAAtB,GAA0BvF,IAAI,CAACkH,uBAAL,GAA+B/B,MAA/B,GAAwC,CAAvI,EAA0I,CAA1I,CAArB;AACA0C,YAAAA,MAAM,CAACC,KAAP,GAAe;AAAA;AAAA,kDAAelD,QAAf,CAAwBoD,SAAxB,CAAkCjB,eAAlC,EAAmDD,gBAAnD,CAAf;AACAe,YAAAA,MAAM,CAACE,QAAP,GAAkB;AAAA;AAAA,kDAAenD,QAAf,CAAwBqD,YAAxB,CAAqClB,eAArC,EAAsDD,gBAAtD,CAAlB;AACAjE,YAAAA,IAAI,QAAJ,IAAAA,IAAI,CAAGgF,MAAM,CAACC,KAAV,EAAiBD,MAAM,CAACE,QAAxB,CAAJ;AACH,WALD;AAMH;AAID;;;AACAG,QAAAA,mBAAmB,CAACtF,QAAD,EAAiBC,IAAc,GAAG,MAAM,CAAG,CAA3C,EAA6C;AAC5DD,UAAAA,QAAQ,CAACE,EAAT,CAAYvD,aAAa,CAAC4I,UAA1B,EAAsCtF,IAAtC,EAA4CD,QAA5C;AACH;AACD;;;AACAwF,QAAAA,iBAAiB,CAACxF,QAAD,EAAiBC,IAAc,GAAG,MAAM,CAAG,CAA3C,EAA6C;AAC1DD,UAAAA,QAAQ,CAACE,EAAT,CAAYvD,aAAa,CAAC8I,QAA1B,EAAoCxF,IAApC,EAA0CD,QAA1C;AACH;AACD;;;AACA0F,QAAAA,mBAAmB,CAAC1F,QAAD,EAAiBC,IAAc,GAAG,MAAM,CAAG,CAA3C,EAA6C;AAC5DD,UAAAA,QAAQ,CAACE,EAAT,CAAYvD,aAAa,CAACgJ,UAA1B,EAAsC1F,IAAtC,EAA4CD,QAA5C;AACH;AACD;;;AACA4F,QAAAA,oBAAoB,CAAC5F,QAAD,EAAiBC,IAAc,GAAG,MAAM,CAAG,CAA3C,EAA6C;AAC7DD,UAAAA,QAAQ,CAACE,EAAT,CAAYvD,aAAa,CAACkJ,WAA1B,EAAuC5F,IAAvC,EAA6CD,QAA7C;AACH;AACD;;;AACA8F,QAAAA,oBAAoB,CAAC9F,QAAD,EAAiBC,IAAc,GAAG,MAAM,CAAG,CAA3C,EAA6C;AAC7DD,UAAAA,QAAQ,CAACE,EAAT,CAAYvD,aAAa,CAACoJ,WAA1B,EAAuC9F,IAAvC,EAA6CD,QAA7C;AACH;AACD;;;AACAgG,QAAAA,oBAAoB,CAAChG,QAAD,EAAiBC,IAAc,GAAG,MAAM,CAAG,CAA3C,EAA6C;AAC7DD,UAAAA,QAAQ,CAACE,EAAT,CAAYvD,aAAa,CAACsJ,WAA1B,EAAuChG,IAAvC,EAA6CD,QAA7C;AACH;AAED;;;AACAkG,QAAAA,WAAW,CAACjG,IAAc,GAAG,MAAM,CAAG,CAA3B,EAA6B;AACpC1D,UAAAA,KAAK,CAAC2D,EAAN,CAAS1D,KAAK,CAAC2J,SAAN,CAAgBC,QAAzB,EAAmCnG,IAAI,EAAvC,EAA2C,IAA3C;AACH;AACD;;;AACAoG,QAAAA,eAAe,CAACpG,IAAc,GAAG,MAAM,CAAG,CAA3B,EAA6B;AACxC1D,UAAAA,KAAK,CAAC2D,EAAN,CAAS1D,KAAK,CAAC2J,SAAN,CAAgBG,YAAzB,EAAuCrG,IAAI,EAA3C,EAA+C,IAA/C;AACH;AACD;;;AACAsG,QAAAA,SAAS,CAACtG,IAAc,GAAG,MAAM,CAAG,CAA3B,EAA6B;AAClC1D,UAAAA,KAAK,CAAC2D,EAAN,CAAS1D,KAAK,CAAC2J,SAAN,CAAgBK,MAAzB,EAAiCvG,IAAI,EAArC,EAAyC,IAAzC;AACH;AAED;;;AACAwG,QAAAA,mBAAmB,CAACzG,QAAD,EAAiBC,IAAc,GAAG,MAAM,CAAG,CAA3C,EAA6C;AAC5DD,UAAAA,QAAQ,CAACE,EAAT,CAAY1D,KAAK,CAAC2J,SAAN,CAAgBO,YAA5B,EAA0CzG,IAA1C,EAAgDD,QAAhD;AACH;AAED;AACJ;AACA;AACA;AACA;AACA;;;AACI2G,QAAAA,iBAAiB,CAAC3G,QAAD,EAAiB4G,WAAjB,EAAoCC,QAApC,EAAsDC,QAAtD,EAAwEC,eAAe,GAAG,IAA1F,EAAgG;AAC7G,cAAIC,gBAAgB,GAAGhH,QAAQ,CAACoC,YAAT,CAAsBpG,MAAtB,CAAvB;;AACA,cAAIgL,gBAAgB,IAAI,IAAxB,EAA8B;AAC1BA,YAAAA,gBAAgB,GAAGhH,QAAQ,CAACiH,YAAT,CAAsBjL,MAAtB,CAAnB;AACH;;AACD,cAAIkL,mBAAmB,GAAGlH,QAAQ,CAACoC,YAAT,CAAsBpF,SAAtB,CAA1B;;AACA,cAAIkK,mBAAmB,IAAI,IAA3B,EAAiC;AAC7BlH,YAAAA,QAAQ,CAACiH,YAAT,CAAsBjK,SAAtB;AACH;;AACD,cAAIW,KAAK,GAAG,IAAIvB,SAAS,CAAC+K,YAAd,EAAZ;AACAxJ,UAAAA,KAAK,CAACwE,MAAN,GAAeyE,WAAf;AACAjJ,UAAAA,KAAK,CAACyJ,SAAN,GAAkBP,QAAlB;AACAlJ,UAAAA,KAAK,CAAC0J,OAAN,GAAgBP,QAAhB;AACAnJ,UAAAA,KAAK,CAAC2J,eAAN,GAAwBP,eAAxB;AACAC,UAAAA,gBAAgB,CAACO,WAAjB,CAA6B7I,IAA7B,CAAkCf,KAAlC;AACAQ,UAAAA,OAAO,CAACC,KAAR,CAAc4I,gBAAgB,CAACO,WAA/B;AACH;AACD;AACJ;AACA;;;AACIC,QAAAA,kBAAkB,CAACxH,QAAD,EAAiByH,WAAoB,GAAG,KAAxC,EAA+C;AAC7D,cAAIT,gBAAgB,GAAGhH,QAAQ,CAACoC,YAAT,CAAsBpG,MAAtB,CAAvB;;AACA,cAAIgL,gBAAgB,IAAI,IAAxB,EAA8B;AAC1BA,YAAAA,gBAAgB,GAAGhH,QAAQ,CAACiH,YAAT,CAAsBjL,MAAtB,CAAnB;AACH;;AACD,cAAIkL,mBAAmB,GAAGlH,QAAQ,CAACoC,YAAT,CAAsBpF,SAAtB,CAA1B;;AACA,cAAIkK,mBAAmB,IAAI,IAA3B,EAAiC;AAC7BlH,YAAAA,QAAQ,CAACiH,YAAT,CAAsBjK,SAAtB;AACH;;AACD,cAAIyK,WAAJ,EAAiB;AACbT,YAAAA,gBAAgB,CAACU,UAAjB,GAA8B,CAA9B;AACA,gBAAIC,UAAU,GAAG,KAAjB;AACA3H,YAAAA,QAAQ,CAACe,GAAT,CAAapE,aAAa,CAACwD,WAA3B,EAAwC,MAAM;AAC1C,kBAAIwH,UAAJ,EAAgB;AACZ;AACH;;AACDA,cAAAA,UAAU,GAAG,IAAb;AACAC,cAAAA,OAAO,CAAC5H,QAAD,CAAP;AACH,aAND,EAMGA,QANH;AAOA,iBAAKD,oBAAL,CAA0BC,QAA1B,EAAoC,MAAM;AACtC,kBAAI2H,UAAJ,EAAgB;AACZ;AACH;;AACDA,cAAAA,UAAU,GAAG,IAAb;AACAC,cAAAA,OAAO,CAAC5H,QAAD,CAAP;AACH,aAND;AAOA,iBAAKI,kBAAL,CAAwBJ,QAAxB,EAAkC,MAAM;AACpC,kBAAI,CAAC2H,UAAL,EAAiB;AACb;AACH;;AACDA,cAAAA,UAAU,GAAG,KAAb;AACAE,cAAAA,QAAQ,CAAC7H,QAAD,CAAR;AACH,aAND;AAOA,iBAAKU,qBAAL,CAA2BV,QAA3B,EAAqC,MAAM;AACvC,kBAAI,CAAC2H,UAAL,EAAiB;AACb;AACH;;AACDA,cAAAA,UAAU,GAAG,KAAb;AACAE,cAAAA,QAAQ,CAAC7H,QAAD,CAAR;AACH,aAND;AAOA,iBAAKY,mBAAL,CAAyBZ,QAAzB,EAAoCrC,KAAD,IAAW;AAC1C;AACA;AACA,kBAAIuE,YAAY,GAAGvE,KAAK,CAACwE,MAAN,CAAaC,YAAb,CAA0BnF,WAA1B,EAAuCoF,KAA1D;AACA,kBAAIC,aAAa,GAAG3E,KAAK,CAACwE,MAAN,CAAaC,YAAb,CAA0BnF,WAA1B,EAAuCsF,MAA3D;AACA,kBAAIC,eAAe,GAAGrF,EAAE,CAACQ,KAAK,CAAC8E,aAAN,GAAsBC,CAAvB,EAA0B/E,KAAK,CAAC8E,aAAN,GAAsBE,CAAhD,EAAmDhF,KAAK,CAAC8E,aAAN,GAAsBG,CAAzE,CAAxB;AACA,kBAAIC,gBAAgB,GAAGlF,KAAK,CAACwE,MAAN,CAAaW,gBAAb,EAAvB;;AACA,kBAAIN,eAAe,CAACE,CAAhB,GAAoBG,gBAAgB,CAACH,CAAjB,GAAqBR,YAAY,GAAG,CAAxD,IAA6DM,eAAe,CAACE,CAAhB,GAAoBG,gBAAgB,CAACH,CAAjB,GAAqBR,YAAY,GAAG,CAArH,IAA0HM,eAAe,CAACG,CAAhB,GAAoBE,gBAAgB,CAACF,CAAjB,GAAqBL,aAAa,GAAG,CAAnL,IAAwLE,eAAe,CAACG,CAAhB,GAAoBE,gBAAgB,CAACF,CAAjB,GAAqBL,aAAa,GAAG,CAArP,EAAwP;AACpP,oBAAI,CAACqF,UAAL,EAAiB;AACb;AACH;;AACDA,gBAAAA,UAAU,GAAG,KAAb;AACAE,gBAAAA,QAAQ,CAAC7H,QAAD,CAAR;AACH,eAND,MAMO;AACH,oBAAI2H,UAAJ,EAAgB;AACZ;AACH;;AACDA,gBAAAA,UAAU,GAAG,IAAb;AACAC,gBAAAA,OAAO,CAAC5H,QAAD,CAAP;AACH;AACJ,aApBD;AAqBH,WApDD,MAoDO;AACHgH,YAAAA,gBAAgB,CAACU,UAAjB,GAA8B,CAA9B;AACAV,YAAAA,gBAAgB,CAACc,SAAjB,GAA6B,KAA7B;AACAd,YAAAA,gBAAgB,CAACe,QAAjB,GAA4B,IAA5B;AACH,WAjE4D,CAkE7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,mBAASH,OAAT,CAAiB5H,QAAjB,EAA2B;AACvB7B,YAAAA,OAAO,CAACC,KAAR,CAAc,IAAd;AACA,gBAAI4J,IAAI,GAAG,IAAX;AACAjL,YAAAA,KAAK,CAACiD,QAAD,CAAL,CACKiI,EADL,CACQD,IADR,EACc;AAAEE,cAAAA,KAAK,EAAE/K,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,CAAb;AAAX,aADd,EAEKgL,KAFL;AAGApL,YAAAA,KAAK,CAACiD,QAAQ,CAACoC,YAAT,CAAsBpF,SAAtB,CAAD,CAAL,CACKiL,EADL,CACQD,IADR,EACc;AAAEI,cAAAA,OAAO,EAAE;AAAX,aADd,EAEKD,KAFL;AAGH;;AAED,mBAASN,QAAT,CAAkB7H,QAAlB,EAA4B;AACxB7B,YAAAA,OAAO,CAACC,KAAR,CAAc,IAAd;AACArB,YAAAA,KAAK,CAACiD,QAAD,CAAL,CACKiI,EADL,CACQ,GADR,EACa;AAAEC,cAAAA,KAAK,EAAE/K,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,CAAb;AAAX,aADb,EAEK8K,EAFL,CAEQ,IAFR,EAEc;AAAEC,cAAAA,KAAK,EAAE/K,EAAE,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP;AAAX,aAFd,EAGKgL,KAHL;AAIApL,YAAAA,KAAK,CAACiD,QAAQ,CAACoC,YAAT,CAAsBpF,SAAtB,CAAD,CAAL,CACKiL,EADL,CACQ,IADR,EACc;AAAEG,cAAAA,OAAO,EAAE;AAAX,aADd,EAEKD,KAFL;AAGH;AACJ;AAED;;;AACAE,QAAAA,mBAAmB,CAACrI,QAAD,EAAiB;AAChC,cAAIgH,gBAAgB,GAAGhH,QAAQ,CAACoC,YAAT,CAAsBpG,MAAtB,CAAvB;;AACA,cAAIgL,gBAAgB,IAAI,IAAxB,EAA8B;AAC1B;AACH;;AACDA,UAAAA,gBAAgB,CAACsB,aAAjB;AACH;AAED;AACJ;AACA;AACA;AACA;;;AACIC,QAAAA,kBAAkB,CAACC,IAAD,EAAkBrC,SAAlB,EAAkDlG,IAAlD,EAA6D;AAC3EuI,UAAAA,IAAI,CAACC,IAAL,CAAUtC,SAAV,EAAqBlG,IAArB,EAA2BuI,IAAI,CAACE,IAAhC;AACH;AACD;AACJ;AACA;AACA;AACA;;;AACIC,QAAAA,aAAa,CAACH,IAAD,EAAkBrC,SAAlB,EAAkDlG,IAAlD,EAA6D;AACtEuI,UAAAA,IAAI,CAACtI,EAAL,CAAQiG,SAAR,EAAmBlG,IAAnB,EAAyBuI,IAAI,CAACE,IAA9B;AACH;AACD;AACJ;AACA;AACA;AACA;;;AACIE,QAAAA,cAAc,CAACJ,IAAD,EAAkBrC,SAAlB,EAAkDlG,IAAlD,EAA6D;AACvEuI,UAAAA,IAAI,CAACzH,GAAL,CAASoF,SAAT,EAAoBlG,IAApB,EAA0BuI,IAAI,CAACE,IAA/B;AACH;AAGD;;;AACAG,QAAAA,qBAAqB,CAAC7I,QAAD,EAAiBC,IAAc,GAAG,MAAM,CAAG,CAA3C,EAA6C;AAC9D,cAAI6I,kBAAkB,GAAG9I,QAAQ,CAACoC,YAAT,CAAsBnG,UAAtB,CAAzB;;AACA,cAAI,CAAC;AAAA;AAAA,wCAAW+F,QAAX,CAAoB+G,oBAApB,CAAyCD,kBAAzC,CAAL,EAAmE;AAC/D;AACH;;AACDA,UAAAA,kBAAkB,CAACE,OAAnB,GAA6B,IAA7B;AACA,cAAIC,qBAAqB,GAAGjJ,QAAQ,CAACoC,YAAT,CAAsBvF,WAAtB,CAA5B;;AACA,cAAI,CAAC;AAAA;AAAA,wCAAWmF,QAAX,CAAoB+G,oBAApB,CAAyCE,qBAAzC,CAAL,EAAsE;AAClE;AACH;;AACDjJ,UAAAA,QAAQ,CAACoC,YAAT,CAAsBvF,WAAtB,EAAmCqM,sBAAnC,GAA4D,IAA5D;AACAJ,UAAAA,kBAAkB,CAAC5I,EAAnB,CAAsB7D,aAAa,CAAC8M,SAApC,EAA+C,CAACC,aAAD,EAAgBC,cAAhB,EAAgCC,OAAhC,KAA4C;AACvFrJ,YAAAA,IAAI,CAACmJ,aAAD,EAAgBC,cAAhB,EAAgCC,OAAhC,CAAJ;AACH,WAFD,EAEGtJ,QAFH;AAGH;AACD;;;AACAuJ,QAAAA,yBAAyB,CAACvJ,QAAD,EAAiBC,IAAc,GAAG,MAAM,CAAG,CAA3C,EAA6C;AAClE,cAAI6I,kBAAkB,GAAG9I,QAAQ,CAACoC,YAAT,CAAsBnG,UAAtB,CAAzB;;AACA,cAAI,CAAC;AAAA;AAAA,wCAAW+F,QAAX,CAAoB+G,oBAApB,CAAyCD,kBAAzC,CAAL,EAAmE;AAC/D;AACH;;AACDA,UAAAA,kBAAkB,CAACE,OAAnB,GAA6B,IAA7B;AACA,cAAIC,qBAAqB,GAAGjJ,QAAQ,CAACoC,YAAT,CAAsBvF,WAAtB,CAA5B;;AACA,cAAI,CAAC;AAAA;AAAA,wCAAWmF,QAAX,CAAoB+G,oBAApB,CAAyCE,qBAAzC,CAAL,EAAsE;AAClE;AACH;;AACDA,UAAAA,qBAAqB,CAACC,sBAAtB,GAA+C,IAA/C;AACAJ,UAAAA,kBAAkB,CAAC5I,EAAnB,CAAsB7D,aAAa,CAACmN,aAApC,EAAmD,CAACJ,aAAD,EAAgBC,cAAhB,EAAgCC,OAAhC,KAA4C;AAC3F;AACArJ,YAAAA,IAAI,CAACmJ,aAAD,EAAgBC,cAAhB,EAAgCC,OAAhC,CAAJ;AACH,WAHD,EAGGtJ,QAHH;AAIH;AACD;;;AACAyJ,QAAAA,uBAAuB,CAACzJ,QAAD,EAAiBC,IAAc,GAAG,MAAM,CAAG,CAA3C,EAA6C;AAChE,cAAI6I,kBAAkB,GAAG9I,QAAQ,CAACoC,YAAT,CAAsBnG,UAAtB,CAAzB;;AACA,cAAI,CAAC;AAAA;AAAA,wCAAW+F,QAAX,CAAoB+G,oBAApB,CAAyCD,kBAAzC,CAAL,EAAmE;AAC/D;AACH;;AACDA,UAAAA,kBAAkB,CAACE,OAAnB,GAA6B,IAA7B;AACA,cAAIC,qBAAqB,GAAGjJ,QAAQ,CAACoC,YAAT,CAAsBvF,WAAtB,CAA5B;;AACA,cAAI,CAAC;AAAA;AAAA,wCAAWmF,QAAX,CAAoB+G,oBAApB,CAAyCE,qBAAzC,CAAL,EAAsE;AAClE;AACH;;AACDjJ,UAAAA,QAAQ,CAACoC,YAAT,CAAsBvF,WAAtB,EAAmCqM,sBAAnC,GAA4D,IAA5D;AACAJ,UAAAA,kBAAkB,CAAC5I,EAAnB,CAAsB7D,aAAa,CAACqN,WAApC,EAAiD,CAACN,aAAD,EAAgBC,cAAhB,EAAgCC,OAAhC,KAA4C;AACzF;AACArJ,YAAAA,IAAI,CAACmJ,aAAD,EAAgBC,cAAhB,EAAgCC,OAAhC,CAAJ;AACH,WAHD,EAGGtJ,QAHH;AAIH;AACD;;;AACA2J,QAAAA,sBAAsB,CAAC3J,QAAD,EAAiBC,IAAc,GAAG,MAAM,CAAG,CAA3C,EAA6C;AAC/D,cAAI6I,kBAAkB,GAAG9I,QAAQ,CAACoC,YAAT,CAAsBnG,UAAtB,CAAzB;;AACA,cAAI,CAAC;AAAA;AAAA,wCAAW+F,QAAX,CAAoB+G,oBAApB,CAAyCD,kBAAzC,CAAL,EAAmE;AAC/D;AACH;;AACDA,UAAAA,kBAAkB,CAACE,OAAnB,GAA6B,IAA7B;AACA,cAAIC,qBAAqB,GAAGjJ,QAAQ,CAACoC,YAAT,CAAsBvF,WAAtB,CAA5B;;AACA,cAAI,CAAC;AAAA;AAAA,wCAAWmF,QAAX,CAAoB+G,oBAApB,CAAyCE,qBAAzC,CAAL,EAAsE;AAClE;AACH;;AACDjJ,UAAAA,QAAQ,CAACoC,YAAT,CAAsBvF,WAAtB,EAAmCqM,sBAAnC,GAA4D,IAA5D;AACAJ,UAAAA,kBAAkB,CAAC5I,EAAnB,CAAsB7D,aAAa,CAACuN,UAApC,EAAgD,CAACR,aAAD,EAAgBC,cAAhB,EAAgCC,OAAhC,KAA4C;AACxFrJ,YAAAA,IAAI,CAACmJ,aAAD,EAAgBC,cAAhB,EAAgCC,OAAhC,CAAJ;AACH,WAFD,EAEGtJ,QAFH;AAGH;AACD;;;AACA6J,QAAAA,YAAY,CAAC7J,QAAD,EAAiB;AACzB,cAAI8I,kBAAkB,GAAG9I,QAAQ,CAACoC,YAAT,CAAsBnG,UAAtB,CAAzB;;AACA,cAAI6M,kBAAJ,EAAwB;AACpBA,YAAAA,kBAAkB,CAAC/H,GAAnB,CAAuB1E,aAAa,CAAC8M,SAArC;AACAL,YAAAA,kBAAkB,CAAC/H,GAAnB,CAAuB1E,aAAa,CAACmN,aAArC;AACAV,YAAAA,kBAAkB,CAAC/H,GAAnB,CAAuB1E,aAAa,CAACqN,WAArC;AACAZ,YAAAA,kBAAkB,CAAC/H,GAAnB,CAAuB1E,aAAa,CAACuN,UAArC;AACAd,YAAAA,kBAAkB,CAACE,OAAnB,GAA6B,KAA7B;AACH;AACJ;AAED;AACJ;AACA;AACA;;;AACIc,QAAAA,mBAAmB,CAACC,WAAD,EAAoBC,YAAmB,GAAG9N,KAAK,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAA/C,EAAgE+N,UAAkB,GAAG,EAArF,EAAyF;AACxGxN,UAAAA,KAAK,CAACyN,kBAAN,GAA2B,KAA3B;AACA,cAAIC,WAA4B,GAAG,IAAnC;AACA,cAAIC,UAAuB,GAAG,EAA9B,CAHwG,CAIxG;;AACA,cAAIC,IAAY,GAAG,CAAnB;;AACA,gBAAMC,UAAU,GAAIC,GAAD,IAAe;AAAA;;AAC9B7M,YAAAA,OAAO,CAAC8M,GAAR,CAAYD,GAAG,CAAC7H,CAAhB,EAAmB6H,GAAG,CAAC5H,CAAvB,EAA0B,CAA1B;AACA,4BAAAwH,WAAW,SAAX,iBAAazB,IAAb,CAAkBtG,YAAlB,CAA+BnF,WAA/B,EAA4CwN,oBAA5C,CAAiE/M,OAAjE,EAA0EA,OAA1E;AACA6M,YAAAA,GAAG,CAACC,GAAJ,CAAQ9M,OAAO,CAACgF,CAAhB,EAAmBhF,OAAO,CAACiF,CAA3B;AACA,mBAAO4H,GAAP;AACH,WALD;;AAMA,gBAAMG,gBAAgB,GAAG,CAACC,KAAD,EAAgBC,KAAhB,KAAkC;AACvD;AACA,kBAAMC,CAAC,GAAG,KAAV;AACA,kBAAMC,IAAI,GAAGC,IAAI,CAACC,GAAL,CAASL,KAAT,IAAkBE,CAAlB,GAAuBI,MAAM,CAACC,gBAAP,GAA0BH,IAAI,CAACI,IAAL,CAAUR,KAAV,CAA1B,GAA6CI,IAAI,CAACI,IAAL,CAAUP,KAAV,CAApE,GAAyFA,KAAK,GAAGD,KAA9G;;AACA,gBAAIP,UAAU,CAAC9L,MAAX,GAAoB,CAApB,IAAyByM,IAAI,CAACC,GAAL,CAASF,IAAI,GAAGT,IAAhB,IAAwBQ,CAArD,EAAwD;AACpD;AACAT,cAAAA,UAAU,CAACgB,GAAX;AACH,aAPsD,CAQvD;;;AACAf,YAAAA,IAAI,GAAGS,IAAP;AACH,WAVD;;AAWA,gBAAMO,cAAc,GAAI1N,KAAD,IAAuB;AAC1CA,YAAAA,KAAK,CAAC8E,aAAN,CAAoBhF,OAApB;AACA2M,YAAAA,UAAU,CAAC9L,MAAX,GAAoB,CAApB;AACA,kBAAMgN,UAAU,GAAG,IAAI5O,IAAJ,EAAnB;AACA4O,YAAAA,UAAU,CAACC,KAAX,GAAmBxB,WAAW,CAACwB,KAA/B;AACAxB,YAAAA,WAAW,CAACyB,QAAZ,CAAqBF,UAArB;AACAnB,YAAAA,WAAW,GAAGmB,UAAU,CAACrE,YAAX,CAAwB3K,QAAxB,CAAd;AACA6N,YAAAA,WAAW,CAACsB,WAAZ,GAA0BtP,KAAK,CAACuP,KAAhC;AACAvB,YAAAA,WAAW,CAACwB,SAAZ,GAAwB1B,UAAxB;AACA,kBAAM;AAAEvH,cAAAA,CAAF;AAAKC,cAAAA;AAAL,gBAAW2H,UAAU,CAAC7M,OAAD,CAA3B;AACA0M,YAAAA,WAAW,CAACyB,MAAZ,CAAmBlJ,CAAnB,EAAsBC,CAAtB;AACAyH,YAAAA,UAAU,CAAC1L,IAAX,CAAgB;AAAEgE,cAAAA,CAAF;AAAKC,cAAAA;AAAL,aAAhB;AACH,WAZD;;AAaA,gBAAMkJ,aAAa,GAAIlO,KAAD,IAAuB;AACzC,gBAAI,CAACwM,WAAL,EAAkB;AAClBxM,YAAAA,KAAK,CAAC8E,aAAN,CAAoBhF,OAApB;AACA,kBAAM;AAAEiF,cAAAA,CAAF;AAAKC,cAAAA;AAAL,gBAAW2H,UAAU,CAAC7M,OAAD,CAA3B;AACA,kBAAM;AAAEiF,cAAAA,CAAC,EAAEoJ,IAAL;AAAWnJ,cAAAA,CAAC,EAAEoJ;AAAd,gBAAuB3B,UAAU,CAACA,UAAU,CAAC9L,MAAX,GAAoB,CAArB,CAAvC;AACA,kBAAMqM,KAAK,GAAGjI,CAAC,GAAGoJ,IAAlB;AACA,kBAAMlB,KAAK,GAAGjI,CAAC,GAAGoJ,IAAlB;;AACA,gBAAIhB,IAAI,CAACC,GAAL,CAASL,KAAT,IAAkBI,IAAI,CAACC,GAAL,CAASJ,KAAT,CAAlB,IAAqCT,WAAW,CAACwB,SAArD,EAAgE;AAC5DjB,cAAAA,gBAAgB,CAACC,KAAD,EAAQC,KAAR,CAAhB;AACAR,cAAAA,UAAU,CAAC1L,IAAX,CAAgB;AAAEgE,gBAAAA,CAAF;AAAKC,gBAAAA;AAAL,eAAhB;AACAwH,cAAAA,WAAW,CAACsB,WAAZ,GAA0BzB,YAA1B;AACAG,cAAAA,WAAW,CAAC6B,MAAZ,CAAmBtJ,CAAnB,EAAsBC,CAAtB;AACAwH,cAAAA,WAAW,CAAC8B,MAAZ;AACH;AACJ,WAdD,CApCwG,CAmDxG;;;AACA,gBAAMC,gBAAgB,GAAG,MAAM;AAC3B,gBAAI,CAAC/B,WAAD,IAAgBC,UAAU,CAAC9L,MAAX,IAAqB,CAAzC,EAA4C;AACxC;AACA6L,cAAAA,WAAW,CAACzB,IAAZ,CAAiByD,OAAjB;AACAhC,cAAAA,WAAW,GAAG,IAAd;AACA;AACH;;AACDA,YAAAA,WAAW,CAAClD,YAAZ,CAAyBpK,WAAzB;;AACA,iBAAK,IAAI0B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG6L,UAAU,CAAC9L,MAAX,GAAoB,CAAxC,EAA2CC,CAAC,EAA5C,EAAgD;AAC5C,oBAAM6N,SAAS,GAAGhC,UAAU,CAAC7L,CAAD,CAA5B;AACA,oBAAM8N,OAAO,GAAGjC,UAAU,CAAC7L,CAAC,GAAG,CAAL,CAA1B;AACA,oBAAM+N,eAAe,GAAGnC,WAAW,CAAClD,YAAZ,CAAyBrK,iBAAzB,CAAxB;AACA,oBAAMiO,CAAC,GAAG3N,EAAE,CAACmP,OAAO,CAAC3J,CAAR,GAAY0J,SAAS,CAAC1J,CAAvB,EAA0B2J,OAAO,CAAC1J,CAAR,GAAYyJ,SAAS,CAACzJ,CAAhD,CAAF,CAAqD4J,SAArD,EAAV;AACA,oBAAMC,UAAU,GAAGrC,WAAW,CAACwB,SAAZ,GAAwB,CAA3C;AACA,oBAAMc,IAAI,GAAGvP,EAAE,CAAC2N,CAAC,CAAClI,CAAH,EAAM,CAACkI,CAAC,CAACnI,CAAT,CAAF,CAAcgK,cAAd,CAA6BF,UAA7B,EAAyCG,KAAzC,CAA+CP,SAAS,CAAC1J,CAAzD,EAA4D0J,SAAS,CAACzJ,CAAtE,CAAb;AACA,oBAAMiK,IAAI,GAAG1P,EAAE,CAAC,CAAC2N,CAAC,CAAClI,CAAJ,EAAOkI,CAAC,CAACnI,CAAT,CAAF,CAAcgK,cAAd,CAA6BF,UAA7B,EAAyCG,KAAzC,CAA+CP,SAAS,CAAC1J,CAAzD,EAA4D0J,SAAS,CAACzJ,CAAtE,CAAb;AACA,oBAAMkK,IAAI,GAAG3P,EAAE,CAAC2N,CAAC,CAAClI,CAAH,EAAM,CAACkI,CAAC,CAACnI,CAAT,CAAF,CAAcgK,cAAd,CAA6BF,UAA7B,EAAyCG,KAAzC,CAA+CN,OAAO,CAAC3J,CAAvD,EAA0D2J,OAAO,CAAC1J,CAAlE,CAAb;AACA,oBAAMmK,IAAI,GAAG5P,EAAE,CAAC,CAAC2N,CAAC,CAAClI,CAAJ,EAAOkI,CAAC,CAACnI,CAAT,CAAF,CAAcgK,cAAd,CAA6BF,UAA7B,EAAyCG,KAAzC,CAA+CN,OAAO,CAAC3J,CAAvD,EAA0D2J,OAAO,CAAC1J,CAAlE,CAAb;AACA2J,cAAAA,eAAe,CAACS,MAAhB,GAAyB,CAACN,IAAD,EAAOG,IAAP,EAAaC,IAAb,EAAmBC,IAAnB,CAAzB;AACAR,cAAAA,eAAe,CAACU,KAAhB;AACH;AACJ,WArBD;;AAsBA,gBAAMC,YAAY,GAAG,MAAM;AACvBf,YAAAA,gBAAgB;AACnB,WAFD;;AAGA,eAAKnM,oBAAL,CAA0BgK,WAA1B,EAAuCsB,cAAvC;AACA,eAAKjL,kBAAL,CAAwB2J,WAAxB,EAAqCkD,YAArC;AACA,eAAKvM,qBAAL,CAA2BqJ,WAA3B,EAAwCkD,YAAxC;AACA,eAAKrM,mBAAL,CAAyBmJ,WAAzB,EAAsC8B,aAAtC;AACH;;AAEDqB,QAAAA,SAAS,CAACnD,WAAD,EAAoBoD,OAApB,EAAqCnD,YAAmB,GAAG9N,KAAK,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAAhE,EAAiF+N,UAAkB,GAAG,EAAtG,EAA0G;AAC/G,cAAImD,kBAAkB,GAAGrD,WAAW,CAAC3H,YAAZ,CAAyB9F,QAAzB,CAAzB;;AACA,cAAI,CAAC8Q,kBAAL,EAAyB;AACrBA,YAAAA,kBAAkB,GAAGrD,WAAW,CAAC9C,YAAZ,CAAyB3K,QAAzB,CAArB;AACH;;AAED8Q,UAAAA,kBAAkB,CAACC,KAAnB;AAEAD,UAAAA,kBAAkB,CAAC3B,WAAnB,GAAiCzB,YAAjC;AACAoD,UAAAA,kBAAkB,CAACzB,SAAnB,GAA+B1B,UAA/B;;AAEA,cAAIkD,OAAO,CAAC7O,MAAR,GAAiB,CAArB,EAAwB;AACpB8O,YAAAA,kBAAkB,CAACxB,MAAnB,CAA0BuB,OAAO,CAAC,CAAD,CAAP,CAAWzK,CAArC,EAAwCyK,OAAO,CAAC,CAAD,CAAP,CAAWxK,CAAnD,EADoB,CAEpB;;AACA,iBAAK,IAAIpE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG4O,OAAO,CAAC7O,MAA5B,EAAoCC,CAAC,EAArC,EAAyC;AACrC6O,cAAAA,kBAAkB,CAACpB,MAAnB,CAA0BmB,OAAO,CAAC5O,CAAD,CAAP,CAAWmE,CAArC,EAAwCyK,OAAO,CAAC5O,CAAD,CAAP,CAAWoE,CAAnD;AACH,aALmB,CAMpB;;;AACAyK,YAAAA,kBAAkB,CAACnB,MAAnB;AACH,WARD,MAQO;AACH9N,YAAAA,OAAO,CAACC,KAAR,CAAc,qBAAd;AACH;AACJ;;AAEDkP,QAAAA,UAAU,CAACvD,WAAD,EAAoB;AAC1B,cAAIqD,kBAAkB,GAAGrD,WAAW,CAAC3H,YAAZ,CAAyB9F,QAAzB,CAAzB;;AACA,cAAI,CAAC8Q,kBAAL,EAAyB;AACrBA,YAAAA,kBAAkB,GAAGrD,WAAW,CAAC9C,YAAZ,CAAyB3K,QAAzB,CAArB;AACH;;AACD8Q,UAAAA,kBAAkB,CAACC,KAAnB;AACH;;AAl1BqC,O,UAEfrL,Q,GAAW,IAAIlE,OAAJ,E","sourcesContent":["import { _decorator, Button, CCObject, Collider2D, color, Color, Component, Contact2DType, EventTouch, Graphics, input, Input, macro, Node, NodeEventType, PolygonCollider2D, RigidBody2D, Tween, tween, UIOpacity, UITransform, v2, v3, Vec2, Vec3, view, Animation } from 'cc';\nimport { Tool_Other } from './Tool_Other';\nimport { Tool_Animation } from './Tool_Animation';\nconst { ccclass, property } = _decorator;\n\nconst Temp_V2 = v2();\nconst Temp_V3 = v3();\ntype TypePoint = {\n    x: number,\n    y: number\n}\n\n/**\n * 全局事件监听方法\n * @param Event_Name 事件名\n * @param Args       事件参数\n */\nexport type ListenerFunc = (Event_Name: string, Args: any) => void\n\nclass Event_Data {\n    public Event!: string;\n    public Listener!: ListenerFunc;\n    public Target: CCObject;\n}\n\n@ccclass('Tool_Event')\nexport class Tool_Event extends Component {\n\n    public static readonly instance = new Tool_Event();\n\n    private Events: { [Key: string]: Array<Event_Data> } = {};\n\n    /**\n    * 事件注册(全局)\n    * @param Event_Name 事件名\n    * @param listener 处理事件的侦听器函数\n    * @param object 侦听函数绑定的作用域对象\n    */\n    Event_On(Event_Name: string, listener: ListenerFunc, Target: CCObject) {\n        if (!Event_Name || !listener) {\n            console.debug(`【${Event_Name}】事件注册为空`);\n            return;\n        }\n        let List: Array<Event_Data> = this.Events[Event_Name];\n        if (List == null) {\n            List = [];\n            this.Events[Event_Name] = List;\n        }\n        let length = List.length;\n        for (let i = 0; i < length; i++) {\n            let bin = List[i];\n            if (bin.Listener == listener && bin.Target == Target) {\n                console.debug(`【${Event_Name}】事件注册重复`);\n            }\n        }\n        let Data: Event_Data = new Event_Data();\n        Data.Event = Event_Name;\n        Data.Listener = listener;\n        Data.Target = Target;\n        List.push(Data);\n    }\n\n    /**\n     * 监听一次事件，事件响应后，该监听自动移除\n     * @param Event_Name 事件名\n     * @param Listener 事件触发回调\n     * @param object 监听函数绑定的作用域对象\n     */\n    Event_Once(Event_Name: string, Listener: ListenerFunc, Target: CCObject) {\n        let _Listener: any = ($Event: string, $Args: any) => {\n            this.Event_Off(Event_Name, _Listener, Target);\n            _Listener = null;\n            Listener.call(Target, $Event, $Args);\n        }\n        this.Event_On(Event_Name, _Listener, Target);\n    }\n\n    /**\n     * 事件移除(全局)\n     * @param Event_Name 事件名\n     * @param listener 事件触发回调\n     * @param Target 监听函数绑定的作用域对象\n     */\n    Event_Off(Event_Name: string, Listener: Function, Target: CCObject) {\n        let List: Array<Event_Data> = this.Events[Event_Name];\n        if (!List) {\n            console.debug(`【${Event_Name}】事件不存在`);\n            return;\n        }\n        let Length = List.length;\n        for (let i = Length - 1; i >= 0; i--) {\n            let Bin: Event_Data = List[i];\n            if (Bin.Listener == Listener && Bin.Target == Target) {\n                List.splice(i, 1);\n                break;\n            }\n        }\n        if (List.length == 0) {\n            delete this.Events[Event_Name];\n        }\n    }\n    /**\n    * 事件移除(全局)-根据 Target \n    * @param Target 监听函数绑定的作用域对象(一般为节点或脚本)\n    */\n    Event_Off_Target(Target: CCObject) {\n        for (const Event_Name in this.Events) {\n            if (Object.prototype.hasOwnProperty.call(this.Events, Event_Name)) {\n                const Event_Datas = this.Events[Event_Name];\n                let length = Event_Datas.length;\n                for (let i = length - 1; i >= 0; i--) {\n                    let Event_Data: Event_Data = Event_Datas[i];\n                    if (Event_Data.Target === Target) {\n                        Event_Datas.splice(i, 1);\n                        break;\n                    }\n                }\n                if (Event_Datas.length == 0) {\n                    delete this.Events[Event_Name];\n                }\n            }\n        }\n    }\n    /** \n     * 事件触发(全局)\n     * @param Event_Name 事件名\n     * @param Args 事件参数\n     */\n    Event_Dispatch(Event_Name: string, Args: any = null) {\n        let list: Array<Event_Data> = this.Events[Event_Name];\n        if (list != null) {\n            let Temp: Array<Event_Data> = list.concat();\n            let Length = Temp.length;\n            for (let i = 0; i < Length; i++) {\n                let Event_Bin = Temp[i];\n                Event_Bin.Listener.call(Event_Bin.Target, Event_Name, Args);\n            }\n        }\n    }\n\n    /**注册触摸开始监听 */\n    On_Event_TOUCH_START(Node_Set: Node, Call: Function = (Event) => { }) {\n        Node_Set.on(NodeEventType.TOUCH_START, Call, Node_Set);\n    }\n    /**注册触摸结束监听 */\n    On_Event_TOUCH_END(\n        Node_Set: Node,\n        Call: Function = (Event) => { },\n        Target?: unknown,\n        UseCapture?: boolean\n    ) {\n        // 如果传入了 Target 则使用它，否则默认用 Node_Set 作为 this 上下文\n        const TargetObj = Target !== undefined ? Target : Node_Set;\n        // 如果传入了 UseCapture 则使用它，否则默认 false\n        const IsUseCapture = UseCapture !== undefined ? UseCapture : false;\n        // 注册事件监听\n        Node_Set.on(NodeEventType.TOUCH_END, Call, TargetObj, IsUseCapture);\n    }\n\n    /**注册触摸取消监听 */\n    On_Event_TOUCH_CANCEL(Node_Set: Node, Call: Function = (Event) => { }) {\n        Node_Set.on(NodeEventType.TOUCH_CANCEL, Call, Node_Set);\n    }\n    /**注册触摸移动监听 */\n    On_Event_TOUCH_MOVE(Node_Set: Node, Call: Function = (Event) => { }) {\n        Node_Set.on(NodeEventType.TOUCH_MOVE, Call, Node_Set);\n    }\n\n    /**注销触摸开始监听 */\n    Off_Event_TOUCH_START(Node_Set: Node, Call: Function = (Event) => { }) {\n        Node_Set.off(NodeEventType.TOUCH_START, Call, Node_Set);\n    }\n    /**注销触摸结束监听 */\n    Off_Event_TOUCH_END(Node_Set: Node, Call: Function = (Event) => { }) {\n        Node_Set.off(NodeEventType.TOUCH_END, Call, Node_Set);\n    }\n    /**注销触摸取消监听 */\n    Off_Event_TOUCH_CANCEL(Node_Set: Node, Call: Function = (Event) => { }) {\n        Node_Set.off(NodeEventType.TOUCH_CANCEL, Call, Node_Set);\n    }\n    /**注销触摸移动监听 */\n    Off_Event_TOUCH_MOVE(Node_Set: Node, Call: Function = (Event) => { }) {\n        Node_Set.off(NodeEventType.TOUCH_MOVE, Call, Node_Set);\n    }\n    /**注销所有触摸监听 */\n    Off_Event_TOUCH_All(Node_Set: Node) {\n        Node_Set.off(NodeEventType.TOUCH_START);\n        Node_Set.off(NodeEventType.TOUCH_END);\n        Node_Set.off(NodeEventType.TOUCH_CANCEL);\n        Node_Set.off(NodeEventType.TOUCH_MOVE);\n    }\n\n    /**监听触摸按住\n     * @param Node_Set 监听节点\n     * @param Response_Time 响应时长\n     * @param Pressing_Call 按住回调\n     * @param Pressend_Call 松开回调\n     */\n    On_Event_TOUCH_Pressing(Node_Set: Node, Response_Time: number, Pressing_Call: Function = () => { }, Pressend_Call: Function = () => { }) {\n        let Is_Pressing = false;\n        const Pressing = () => {\n            if (Is_Pressing) {\n                this.scheduleOnce(() => {\n                    if (Is_Pressing) {\n                        console.debug(\"按住\", Node_Set.name);\n                        Pressing_Call && Pressing_Call();\n                        Pressing();\n                    }\n                }, 0.05);\n            }\n        }\n        const Pressend = () => {\n            Tween.stopAllByTarget(Start_Obj);\n            Pressend_Call && Pressend_Call();\n        }\n        let Start_Obj = { num: 0 };\n        this.On_Event_TOUCH_START(Node_Set, () => {\n            Start_Obj = { num: 0 };\n            Tool_Animation.instance.Async_Function_Target(Response_Time, Start_Obj, () => {\n                Is_Pressing = true;\n                Pressing();\n            });\n        });\n        this.On_Event_TOUCH_END(Node_Set, () => {\n            Is_Pressing = false;\n            Pressend();\n        });\n        this.On_Event_TOUCH_CANCEL(Node_Set, () => {\n            Is_Pressing = false;\n            Pressend();\n        });\n        this.On_Event_TOUCH_MOVE(Node_Set, (Event) => {\n            // console.log(Event.getUILocation());\n            // console.log(Event);\n            let Target_Width = Event.target.getComponent(UITransform).width;\n            let Target_Height = Event.target.getComponent(UITransform).height;\n            let Pos_Touch_World = v3(Event.getUILocation().x, Event.getUILocation().y, Event.getUILocation().z);\n            let Pos_Target_World = Event.target.getWorldPosition();\n            if (Pos_Touch_World.x < Pos_Target_World.x - Target_Width / 2 || Pos_Touch_World.x > Pos_Target_World.x + Target_Width / 2 || Pos_Touch_World.y < Pos_Target_World.y - Target_Height / 2 || Pos_Touch_World.y > Pos_Target_World.y + Target_Height / 2) {\n                if (!Is_Pressing) {\n                    return;\n                }\n                Is_Pressing = false;\n                Pressend();\n            } else {\n                if (Is_Pressing) {\n                    return;\n                }\n                Is_Pressing = true;\n                Pressing();\n            }\n        });\n    }\n    /**监听触摸长按\n     * @param Node_Set 监听节点\n     * @param Response_Time 响应时长\n     * @param Press_Long_Call 长按回调\n     * @param Press_Short_Call 短按回调\n     */\n    On_Event_TOUCH_Presslong(Node_Set: Node, Response_Time: number, Press_Long_Call: Function = () => { }, Press_Short_Call: Function = () => { }) {\n        let Is_Press_Long = false;\n        let Is_Cancel = false;\n        const Press_Long = () => {\n            console.debug(\"长按\", Node_Set.name);\n            Is_Press_Long = true;\n            Press_Long_Call && Press_Long_Call();\n        }\n        const Press_Short = () => {\n            if (Is_Cancel) {\n                return;\n            }\n            if (!Is_Press_Long) {\n                console.debug(\"短按\", Node_Set.name);\n                Tween.stopAllByTarget(Start_Obj);\n                Press_Short_Call && Press_Short_Call();\n            } else {\n                Is_Press_Long = false;\n            }\n        }\n        const Press_Shorteee = (Event) => {\n            if (!Is_Cancel) {\n                let Pos_Touch_World = v3(Event.getUILocation().x, Event.getUILocation().y, Event.getUILocation().z);\n                let Pos_Target_World = Event.target.getWorldPosition();\n                if (Pos_Touch_World.x < Pos_Target_World.x - Target_Width / 2 || Pos_Touch_World.x > Pos_Target_World.x + Target_Width / 2 || Pos_Touch_World.y < Pos_Target_World.y - Target_Height / 2 || Pos_Touch_World.y > Pos_Target_World.y + Target_Height / 2) {\n                    Tween.stopAllByTarget(Start_Obj);\n                    Is_Cancel = true;\n                    this.Off_Event_TOUCH_MOVE(Node_Set, Press_Shorteee)\n                }\n            }\n        }\n        const Target_Width = Node_Set.getComponent(UITransform).width;\n        const Target_Height = Node_Set.getComponent(UITransform).height;\n        let Start_Obj = { num: 0 };\n        this.On_Event_TOUCH_START(Node_Set, () => {\n            Is_Press_Long = false;\n            Is_Cancel = false;\n            Start_Obj = { num: 0 };\n            Tool_Animation.instance.Async_Function_Target(Response_Time, Start_Obj, () => {\n                Press_Long();\n            });\n        });\n        this.On_Event_TOUCH_END(Node_Set, () => {\n            Press_Short();\n        });\n        this.On_Event_TOUCH_CANCEL(Node_Set, () => {\n            Is_Press_Long = false;\n        });\n\n\n        this.On_Event_TOUCH_MOVE(Node_Set, Press_Shorteee);\n\n        // this.On_Event_TOUCH_MOVE(Node_Set, (Event) => {\n        //     if (!Is_Cancel) {\n        //         let Pos_Touch_World = v3(Event.getUILocation().x, Event.getUILocation().y, Event.getUILocation().z);\n        //         let Pos_Target_World = Event.target.getWorldPosition();\n        //         if (Pos_Touch_World.x < Pos_Target_World.x - Target_Width / 2 || Pos_Touch_World.x > Pos_Target_World.x + Target_Width / 2 || Pos_Touch_World.y < Pos_Target_World.y - Target_Height / 2 || Pos_Touch_World.y > Pos_Target_World.y + Target_Height / 2) {\n        //             Tween.stopAllByTarget(Start_Obj);\n        //             Is_Cancel = true;\n        //             this.Off_Btn_TOUCH_START(Node_Set)\n        //         }\n        //     }\n        // });\n    }\n    /**监听触摸双击\n     * @param Node_Set 监听节点\n     * @param Touch_Count_All 触摸总次数\n     * @param Touch_Interval 触摸间隔\n     * @param Double_On_Call 双击回调\n     * @param Double_Off_Call 松开回调\n     */\n    On_Event_TOUCH_Double(Node_Set: Node, Touch_Count_All: number = 2, Touch_Interval: number = 0.25, Double_On_Call: Function = () => { }, Double_Off_Call: Function = () => { }) {\n        let Start_Obj = { num: 0 };\n        let Touch_Count: number = 0;\n        this.On_Event_TOUCH_START(Node_Set, () => {\n            Tween.stopAllByTarget(Start_Obj)\n            Touch_Count++;\n            if (Touch_Count == Touch_Count_All) {\n                Touch_Count = 0;\n                console.debug(\"双击\", Node_Set.name);\n                Double_On_Call && Double_On_Call();\n            }\n            Start_Obj = { num: 0 };\n            Tool_Animation.instance.Async_Function_Target(Touch_Interval, Start_Obj, () => {\n                Touch_Count = 0;\n            });\n        });\n        this.On_Event_TOUCH_END(Node_Set, Call);\n        this.On_Event_TOUCH_CANCEL(Node_Set, Call);\n        function Call() {\n            Double_Off_Call && Double_Off_Call();\n        }\n    }\n\n    /**\n     * 监听触摸拖动\n     * @param Node_Set 监听节点\n     * @param Interactable 可互动\n     * @param TOUCH_START_Call 回调\n     * @param TOUCH_MOVE_Call 回调\n     * @param TOUCH_END_Call 回调\n     * @example\n        let Interactable = true;\n        On_Event_TOUCH_Drag(Node_Set,()=>Interactable,Call);\n     */\n    On_Event_TOUCH_Drag(Node_Set: Node, Interactable: Function = () => true, TOUCH_START_Call: Function = () => { }, TOUCH_MOVE_Call: Function = () => { }, TOUCH_END_Call: Function = () => { }) {\n        // 触摸改变位置\n        let Pos_Touch_Change: Vec3 | null = null;\n        // 触摸开始位置\n        let Pos_Touch_Start: Vec3 | null = null;\n        // 触摸结束位置\n        let Pos_Touch_End: Vec3 | null = null;\n        // 设计分辨率\n        const HalfScreenWidth = view.getDesignResolutionSize().width / 2;\n        const HalfScreenHeight = view.getDesignResolutionSize().height / 2;\n        // 工具函数：计算触摸位置相对于屏幕中心的位置\n        const Get_Touch_Position = (Event: any): Vec3 => {\n            return v3(\n                Event.getUILocation().x - HalfScreenWidth,\n                Event.getUILocation().y - HalfScreenHeight,\n                0\n            );\n        };\n        let Switch: boolean = false;\n        this.On_Event_TOUCH_START(Node_Set, (Event: any) => {\n            // 如果不可交互，直接返回\n            if (!Interactable()) {\n                Switch = false;\n                return;\n            } else {\n                Switch = true;\n            }\n            // 记录起始触摸位置\n            Pos_Touch_Start = Node_Set.position.clone();\n            Pos_Touch_Change = Get_Touch_Position(Event);\n            TOUCH_START_Call?.(Event, Pos_Touch_Start);\n        });\n        this.On_Event_TOUCH_MOVE(Node_Set, (Event: any) => {\n            // 如果不可交互或没有起始位置，直接返回\n            if (!Interactable() || !Pos_Touch_Change) {\n                Switch = false;\n                return;\n            }\n            if (!Switch) {\n                return;\n            }\n            // 计算当前触摸位置\n            const Pos_Touch = Get_Touch_Position(Event);\n            const Pos_Target = Node_Set.position.clone().add(Pos_Touch.clone().subtract(Pos_Touch_Change));\n            // 更新节点位置\n            Node_Set.position = Pos_Target;\n            // 更新起始触摸位置\n            Pos_Touch_Change = Pos_Touch;\n            TOUCH_MOVE_Call?.(Event, Pos_Touch_Start);\n        });\n        this.On_Event_TOUCH_END(Node_Set, (Event: any) => {\n            // 如果不可交互，直接返回\n            if (!Interactable()) {\n                return;\n            }\n            if (!Switch) {\n                return;\n            }\n            // 调用回调函数\n            TOUCH_END_Call?.(Event, Pos_Touch_Start, Pos_Touch_End);\n            Pos_Touch_End = Get_Touch_Position(Event);\n        });\n        this.On_Event_TOUCH_CANCEL(Node_Set, (Event: any) => {\n            // 如果不可交互，直接返回\n            if (!Interactable()) {\n                return;\n            }\n            if (!Switch) {\n                return;\n            }\n            Pos_Touch_End = Get_Touch_Position(Event);\n            // 调用回调函数\n            TOUCH_END_Call?.(Event, Pos_Touch_Start, Pos_Touch_End);\n        });\n\n    }\n    /**监听触摸滑动\n     * @param Node_Set 监听节点\n     * @param Call 回调\n     */\n    On_Event_TOUCH_Slide(Node_Set: Node, Call: Function = () => { }) {\n        let Pos_Touch_Start: Vec3 = null;\n        let Pos_Touch_Change: Vec3 = null;\n        let Return: { Angle: number | null; Distance: number | null } = { Angle: null, Distance: null };\n        this.On_Event_TOUCH_START(Node_Set, (Event) => {\n            Pos_Touch_Start = v3(Event.getUILocation().x - view.getDesignResolutionSize().width / 2, Event.getUILocation().y - view.getDesignResolutionSize().height / 2, 0);\n        });\n        this.On_Event_TOUCH_END(Node_Set, (Event) => {\n            Pos_Touch_Change = v3(Event.getUILocation().x - view.getDesignResolutionSize().width / 2, Event.getUILocation().y - view.getDesignResolutionSize().height / 2, 0);\n            Return.Angle = Tool_Animation.instance.Get_Angle(Pos_Touch_Start, Pos_Touch_Change);\n            Return.Distance = Tool_Animation.instance.Get_Distance(Pos_Touch_Start, Pos_Touch_Change);\n            Call?.(Return.Angle, Return.Distance);\n        });\n        this.On_Event_TOUCH_CANCEL(Node_Set, (Event) => {\n            Pos_Touch_Change = v3(Event.getUILocation().x - view.getDesignResolutionSize().width / 2, Event.getUILocation().y - view.getDesignResolutionSize().height / 2, 0);\n            Return.Angle = Tool_Animation.instance.Get_Angle(Pos_Touch_Start, Pos_Touch_Change);\n            Return.Distance = Tool_Animation.instance.Get_Distance(Pos_Touch_Start, Pos_Touch_Change);\n            Call?.(Return.Angle, Return.Distance);\n        });\n    }\n\n\n\n    /**监听鼠标按下 */\n    On_Event_MOUSE_DOWN(Node_Set: Node, Call: Function = () => { }) {\n        Node_Set.on(NodeEventType.MOUSE_DOWN, Call, Node_Set);\n    }\n    /**监听鼠标松开 */\n    On_Event_MOUSE_UP(Node_Set: Node, Call: Function = () => { }) {\n        Node_Set.on(NodeEventType.MOUSE_UP, Call, Node_Set);\n    }\n    /**监听鼠标移动 */\n    On_Event_MOUSE_MOVE(Node_Set: Node, Call: Function = () => { }) {\n        Node_Set.on(NodeEventType.MOUSE_MOVE, Call, Node_Set);\n    }\n    /**监听鼠标滚动 */\n    On_Event_MOUSE_WHEEL(Node_Set: Node, Call: Function = () => { }) {\n        Node_Set.on(NodeEventType.MOUSE_WHEEL, Call, Node_Set);\n    }\n    /**监听鼠标进入 */\n    On_Event_MOUSE_ENTER(Node_Set: Node, Call: Function = () => { }) {\n        Node_Set.on(NodeEventType.MOUSE_ENTER, Call, Node_Set);\n    }\n    /**监听鼠标移出 */\n    On_Event_MOUSE_LEAVE(Node_Set: Node, Call: Function = () => { }) {\n        Node_Set.on(NodeEventType.MOUSE_LEAVE, Call, Node_Set);\n    }\n\n    /**监听键盘按下 */\n    On_KEY_DOWN(Call: Function = () => { }) {\n        input.on(Input.EventType.KEY_DOWN, Call(), this);\n    }\n    /**监听键盘按住 */\n    On_KEY_PRESSING(Call: Function = () => { }) {\n        input.on(Input.EventType.KEY_PRESSING, Call(), this);\n    }\n    /**监听键盘松开 */\n    On_KEY_UP(Call: Function = () => { }) {\n        input.on(Input.EventType.KEY_UP, Call(), this);\n    }\n\n    /**监听重力感应 */\n    On_Sys_DEVICEMOTION(Node_Set: Node, Call: Function = () => { }) {\n        Node_Set.on(Input.EventType.DEVICEMOTION, Call, Node_Set);\n    }\n\n    /**设置按钮事件\n     * @Node_Set 待设置的节点\n     * @Target_Node 目标节点\n     * @Component 脚本/组件名\n     * @Handler  响应事件函数名\n     */\n    Set_Btn_Event_Add(Node_Set: Node, Target_Node: Node, Scr_Name: string, Fun_Name: string, CustomEventData = null) {\n        let Component_Button = Node_Set.getComponent(Button);\n        if (Component_Button == null) {\n            Component_Button = Node_Set.addComponent(Button);\n        }\n        let Component_UIOpacity = Node_Set.getComponent(UIOpacity);\n        if (Component_UIOpacity == null) {\n            Node_Set.addComponent(UIOpacity);\n        }\n        let Event = new Component.EventHandler();\n        Event.target = Target_Node;\n        Event.component = Scr_Name;\n        Event.handler = Fun_Name;\n        Event.customEventData = CustomEventData;\n        Component_Button.clickEvents.push(Event);\n        console.debug(Component_Button.clickEvents);\n    }\n    /**设置按钮动画\n     * @Anim_Switch 动画开关 \n     */\n    Set_Btn_Event_Anim(Node_Set: Node, Anim_Switch: boolean = false) {\n        let Component_Button = Node_Set.getComponent(Button);\n        if (Component_Button == null) {\n            Component_Button = Node_Set.addComponent(Button);\n        }\n        let Component_UIOpacity = Node_Set.getComponent(UIOpacity);\n        if (Component_UIOpacity == null) {\n            Node_Set.addComponent(UIOpacity);\n        }\n        if (Anim_Switch) {\n            Component_Button.transition = 0;\n            let Anim_State = false;\n            Node_Set.off(NodeEventType.TOUCH_START, () => {\n                if (Anim_State) {\n                    return;\n                }\n                Anim_State = true;\n                Anim_On(Node_Set);\n            }, Node_Set);\n            this.On_Event_TOUCH_START(Node_Set, () => {\n                if (Anim_State) {\n                    return;\n                }\n                Anim_State = true;\n                Anim_On(Node_Set);\n            })\n            this.On_Event_TOUCH_END(Node_Set, () => {\n                if (!Anim_State) {\n                    return;\n                }\n                Anim_State = false;\n                Anim_Off(Node_Set);\n            })\n            this.On_Event_TOUCH_CANCEL(Node_Set, () => {\n                if (!Anim_State) {\n                    return;\n                }\n                Anim_State = false;\n                Anim_Off(Node_Set);\n            })\n            this.On_Event_TOUCH_MOVE(Node_Set, (Event) => {\n                // console.log(Event.getUILocation());\n                // console.log(Event);\n                let Target_Width = Event.target.getComponent(UITransform).width;\n                let Target_Height = Event.target.getComponent(UITransform).height;\n                let Pos_Touch_World = v3(Event.getUILocation().x, Event.getUILocation().y, Event.getUILocation().z);\n                let Pos_Target_World = Event.target.getWorldPosition();\n                if (Pos_Touch_World.x < Pos_Target_World.x - Target_Width / 2 || Pos_Touch_World.x > Pos_Target_World.x + Target_Width / 2 || Pos_Touch_World.y < Pos_Target_World.y - Target_Height / 2 || Pos_Touch_World.y > Pos_Target_World.y + Target_Height / 2) {\n                    if (!Anim_State) {\n                        return;\n                    }\n                    Anim_State = false;\n                    Anim_Off(Node_Set);\n                } else {\n                    if (Anim_State) {\n                        return;\n                    }\n                    Anim_State = true;\n                    Anim_On(Node_Set);\n                }\n            })\n        } else {\n            Component_Button.transition = 3;\n            Component_Button.zoomScale = 0.975;\n            Component_Button.duration = 0.05;\n        }\n        // function Anim_On(Node_Set) {\n        //     console.debug(\"按下\");\n        //     let Time = 0.25;\n        //     tween(Node_Set)\n        //         .to(Time, { scale: v3(0.8, 0.8, 1) })\n        //         .start();\n        //     tween(Node_Set.getComponent(UIOpacity))\n        //         .to(Time, { opacity: 100 })\n        //         .start();\n        // }\n\n        // function Anim_Off(Node_Set) {\n        //     console.debug(\"松开\");\n        //     tween(Node_Set)\n        //         .to(0.17, { scale: v3(1.05, 1.05, 1) })\n        //         .to(0.08, { scale: v3(1, 1, 1) })\n        //         .start();\n        //     tween(Node_Set.getComponent(UIOpacity))\n        //         .to(0.25, { opacity: 255 })\n        //         .start();\n        // }\n        function Anim_On(Node_Set) {\n            console.debug(\"按下\");\n            let Time = 0.15;\n            tween(Node_Set)\n                .to(Time, { scale: v3(0.95, 0.95, 1) })\n                .start();\n            tween(Node_Set.getComponent(UIOpacity))\n                .to(Time, { opacity: 200 })\n                .start();\n        }\n\n        function Anim_Off(Node_Set) {\n            console.debug(\"松开\");\n            tween(Node_Set)\n                .to(0.1, { scale: v3(1.05, 1.05, 1) })\n                .to(0.05, { scale: v3(1, 1, 1) })\n                .start();\n            tween(Node_Set.getComponent(UIOpacity))\n                .to(0.15, { opacity: 255 })\n                .start();\n        }\n    }\n\n    /**重置按钮组件 */\n    Set_Btn_Event_Reset(Node_Set: Node) {\n        let Component_Button = Node_Set.getComponent(Button);\n        if (Component_Button == null) {\n            return;\n        }\n        Component_Button.resetInEditor();\n    }\n\n    /**注册动画监听\n    * @Anim 动画组件\n    * @EventType 事件类型\n    * @Call 回调函数\n    */\n    On_Anim_Frame_Once(Anim: Animation, EventType: Animation.EventType, Call: any) {\n        Anim.once(EventType, Call, Anim.node);\n    }\n    /**注册动画监听\n     * @Anim 动画组件\n     * @EventType 事件类型\n     * @Call 回调函数\n     */\n    On_Anim_Frame(Anim: Animation, EventType: Animation.EventType, Call: any) {\n        Anim.on(EventType, Call, Anim.node);\n    }\n    /**注销动画监听\n     * @Anim 动画组件\n     * @EventType 事件类型\n     * @Call 回调函数\n     */\n    Off_Anim_Frame(Anim: Animation, EventType: Animation.EventType, Call: any) {\n        Anim.off(EventType, Call, Anim.node);\n    }\n\n\n    /**碰撞开始前 */\n    On_Collider_PRE_SOLVE(Node_Set: Node, Call: Function = () => { }) {\n        let Component_Collider = Node_Set.getComponent(Collider2D);\n        if (!Tool_Other.instance.Get_Type_Is_Abnormal(Component_Collider)) {\n            return;\n        }\n        Component_Collider.enabled = true;\n        let Component_RigidBody2D = Node_Set.getComponent(RigidBody2D);\n        if (!Tool_Other.instance.Get_Type_Is_Abnormal(Component_RigidBody2D)) {\n            return;\n        }\n        Node_Set.getComponent(RigidBody2D).enabledContactListener = true;\n        Component_Collider.on(Contact2DType.PRE_SOLVE, (Self_Collider, Other_Collider, Contact) => {\n            Call(Self_Collider, Other_Collider, Contact);\n        }, Node_Set);\n    }\n    /**碰撞开始 */\n    On_Collider_BEGIN_CONTACT(Node_Set: Node, Call: Function = () => { }) {\n        let Component_Collider = Node_Set.getComponent(Collider2D);\n        if (!Tool_Other.instance.Get_Type_Is_Abnormal(Component_Collider)) {\n            return;\n        }\n        Component_Collider.enabled = true;\n        let Component_RigidBody2D = Node_Set.getComponent(RigidBody2D);\n        if (!Tool_Other.instance.Get_Type_Is_Abnormal(Component_RigidBody2D)) {\n            return;\n        }\n        Component_RigidBody2D.enabledContactListener = true;\n        Component_Collider.on(Contact2DType.BEGIN_CONTACT, (Self_Collider, Other_Collider, Contact) => {\n            // console.debug(Self_Collider, Other_Collider, Contact);\n            Call(Self_Collider, Other_Collider, Contact);\n        }, Node_Set);\n    }\n    /**碰撞结束 */\n    On_Collider_END_CONTACT(Node_Set: Node, Call: Function = () => { }) {\n        let Component_Collider = Node_Set.getComponent(Collider2D);\n        if (!Tool_Other.instance.Get_Type_Is_Abnormal(Component_Collider)) {\n            return;\n        }\n        Component_Collider.enabled = true;\n        let Component_RigidBody2D = Node_Set.getComponent(RigidBody2D);\n        if (!Tool_Other.instance.Get_Type_Is_Abnormal(Component_RigidBody2D)) {\n            return;\n        }\n        Node_Set.getComponent(RigidBody2D).enabledContactListener = true;\n        Component_Collider.on(Contact2DType.END_CONTACT, (Self_Collider, Other_Collider, Contact) => {\n            // console.debug(Self_Collider, Other_Collider, Contact);\n            Call(Self_Collider, Other_Collider, Contact);\n        }, Node_Set);\n    }\n    /**碰撞结束后 */\n    On_Collider_POST_SOLVE(Node_Set: Node, Call: Function = () => { }) {\n        let Component_Collider = Node_Set.getComponent(Collider2D);\n        if (!Tool_Other.instance.Get_Type_Is_Abnormal(Component_Collider)) {\n            return;\n        }\n        Component_Collider.enabled = true;\n        let Component_RigidBody2D = Node_Set.getComponent(RigidBody2D);\n        if (!Tool_Other.instance.Get_Type_Is_Abnormal(Component_RigidBody2D)) {\n            return;\n        }\n        Node_Set.getComponent(RigidBody2D).enabledContactListener = true;\n        Component_Collider.on(Contact2DType.POST_SOLVE, (Self_Collider, Other_Collider, Contact) => {\n            Call(Self_Collider, Other_Collider, Contact);\n        }, Node_Set);\n    }\n    /**取消碰撞监听 */\n    Off_Collider(Node_Set: Node) {\n        let Component_Collider = Node_Set.getComponent(Collider2D);\n        if (Component_Collider) {\n            Component_Collider.off(Contact2DType.PRE_SOLVE);\n            Component_Collider.off(Contact2DType.BEGIN_CONTACT);\n            Component_Collider.off(Contact2DType.END_CONTACT);\n            Component_Collider.off(Contact2DType.POST_SOLVE);\n            Component_Collider.enabled = false;\n        }\n    }\n\n    /**绘制刚性线\n     * @Canvas_Node 绘制的节点\n     * @Stroke_Color\n     */\n    Draw_Line_RigidBody(Canvas_Node: Node, Stroke_Color: Color = color(100, 255, 133), Line_Width: number = 10) {\n        macro.ENABLE_MULTI_TOUCH = false;\n        let CurGraphics: Graphics | null = null;\n        let Point_List: TypePoint[] = [];\n        //前一个斜率\n        let PreK: number = 0;\n        const Get_UI_Pos = (Pos: Vec2) => {\n            Temp_V3.set(Pos.x, Pos.y, 0);\n            CurGraphics?.node.getComponent(UITransform).convertToNodeSpaceAR(Temp_V3, Temp_V3);\n            Pos.set(Temp_V3.x, Temp_V3.y);\n            return Pos;\n        };\n        const Should_Add_Point = (DiffX: number, DiffY: number) => {\n            //斜率变化的容忍度\n            const K = 0.001;\n            const CurK = Math.abs(DiffX) < K ? (Number.MAX_SAFE_INTEGER * Math.sign(DiffX) * Math.sign(DiffY)) : (DiffY / DiffX);\n            if (Point_List.length > 1 && Math.abs(CurK - PreK) < K) {\n                //去掉重复点\n                Point_List.pop();\n            }\n            //将 当前点 的 斜率 CurK 赋值 给 前一个点 的 斜率 PreK\n            PreK = CurK;\n        };\n        const On_Touch_Start = (Event: EventTouch) => {\n            Event.getUILocation(Temp_V2);\n            Point_List.length = 0;\n            const Node_Point = new Node();\n            Node_Point.layer = Canvas_Node.layer;\n            Canvas_Node.addChild(Node_Point);\n            CurGraphics = Node_Point.addComponent(Graphics);\n            CurGraphics.strokeColor = Color.WHITE;\n            CurGraphics.lineWidth = Line_Width;\n            const { x, y } = Get_UI_Pos(Temp_V2);\n            CurGraphics.moveTo(x, y);\n            Point_List.push({ x, y });\n        };\n        const On_Touch_Move = (Event: EventTouch) => {\n            if (!CurGraphics) return;\n            Event.getUILocation(Temp_V2);\n            const { x, y } = Get_UI_Pos(Temp_V2);\n            const { x: preX, y: preY } = Point_List[Point_List.length - 1];\n            const DiffX = x - preX;\n            const DiffY = y - preY;\n            if (Math.abs(DiffX) + Math.abs(DiffY) >= CurGraphics.lineWidth) {\n                Should_Add_Point(DiffX, DiffY);\n                Point_List.push({ x, y });\n                CurGraphics.strokeColor = Stroke_Color;\n                CurGraphics.lineTo(x, y);\n                CurGraphics.stroke();\n            }\n        };\n        //创建碰撞器\n        const Create_Colliders = () => {\n            if (!CurGraphics || Point_List.length <= 1) {\n                //清理引用\n                CurGraphics.node.destroy();\n                CurGraphics = null;\n                return;\n            }\n            CurGraphics.addComponent(RigidBody2D);\n            for (let i = 0; i < Point_List.length - 1; i++) {\n                const Pos_Start = Point_List[i];\n                const Pos_End = Point_List[i + 1];\n                const PolygonCollider = CurGraphics.addComponent(PolygonCollider2D);\n                const K = v2(Pos_End.x - Pos_Start.x, Pos_End.y - Pos_Start.y).normalize();\n                const Width_Half = CurGraphics.lineWidth / 2;\n                const Pos1 = v2(K.y, -K.x).multiplyScalar(Width_Half).add2f(Pos_Start.x, Pos_Start.y);\n                const Pos2 = v2(-K.y, K.x).multiplyScalar(Width_Half).add2f(Pos_Start.x, Pos_Start.y);\n                const Pos3 = v2(K.y, -K.x).multiplyScalar(Width_Half).add2f(Pos_End.x, Pos_End.y);\n                const Pos4 = v2(-K.y, K.x).multiplyScalar(Width_Half).add2f(Pos_End.x, Pos_End.y);\n                PolygonCollider.points = [Pos1, Pos2, Pos3, Pos4];\n                PolygonCollider.apply();\n            }\n        };\n        const On_Touch_End = () => {\n            Create_Colliders();\n        };\n        this.On_Event_TOUCH_START(Canvas_Node, On_Touch_Start);\n        this.On_Event_TOUCH_END(Canvas_Node, On_Touch_End);\n        this.On_Event_TOUCH_CANCEL(Canvas_Node, On_Touch_End);\n        this.On_Event_TOUCH_MOVE(Canvas_Node, On_Touch_Move);\n    }\n\n    Draw_Line(Canvas_Node: Node, Arr_Pos: Vec3[], Stroke_Color: Color = color(100, 255, 133), Line_Width: number = 10) {\n        let Component_Graphics = Canvas_Node.getComponent(Graphics);\n        if (!Component_Graphics) {\n            Component_Graphics = Canvas_Node.addComponent(Graphics);\n        }\n\n        Component_Graphics.clear();\n\n        Component_Graphics.strokeColor = Stroke_Color;\n        Component_Graphics.lineWidth = Line_Width;\n\n        if (Arr_Pos.length > 0) {\n            Component_Graphics.moveTo(Arr_Pos[0].x, Arr_Pos[0].y);\n            // 依次连接后续的点\n            for (let i = 1; i < Arr_Pos.length; i++) {\n                Component_Graphics.lineTo(Arr_Pos[i].x, Arr_Pos[i].y);\n            }\n            // 绘制线条\n            Component_Graphics.stroke();\n        } else {\n            console.debug(\"Arr_Pos 数组为空，无法绘制线条\");\n        }\n    }\n\n    Clear_Line(Canvas_Node: Node) {\n        let Component_Graphics = Canvas_Node.getComponent(Graphics);\n        if (!Component_Graphics) {\n            Component_Graphics = Canvas_Node.addComponent(Graphics);\n        }\n        Component_Graphics.clear();\n    }\n\n\n\n\n\n\n\n}\n\n\n"]}