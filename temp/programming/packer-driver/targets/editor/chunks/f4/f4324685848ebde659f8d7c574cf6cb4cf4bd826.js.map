{"version":3,"sources":["file:///D:/CYDW/WoChengYuTeNiu/assets/Script/Tool/Tool_Event.ts"],"names":["Event_Data","_decorator","Button","Collider2D","color","Color","Component","Contact2DType","Graphics","input","Input","macro","Node","NodeEventType","PolygonCollider2D","RigidBody2D","Tween","tween","UIOpacity","UITransform","v2","v3","view","Tool_Other","Tool_Animation","ccclass","property","Temp_V2","Temp_V3","Event","Listener","Target","Tool_Event","Events","Event_On","Event_Name","listener","console","debug","List","length","i","bin","Data","push","Event_Once","_Listener","$Event","$Args","Event_Off","call","Length","Bin","splice","Event_Off_Target","Object","prototype","hasOwnProperty","Event_Datas","Event_Dispatch","Args","list","Temp","concat","Event_Bin","On_Event_TOUCH_START","Node_Set","Call","on","TOUCH_START","On_Event_TOUCH_END","UseCapture","TargetObj","undefined","IsUseCapture","TOUCH_END","On_Event_TOUCH_CANCEL","TOUCH_CANCEL","On_Event_TOUCH_MOVE","TOUCH_MOVE","Off_Event_TOUCH_START","off","Off_Event_TOUCH_END","Off_Event_TOUCH_CANCEL","Off_Event_TOUCH_MOVE","Off_Event_TOUCH_All","On_Event_TOUCH_Pressing","Response_Time","Pressing_Call","Pressend_Call","Is_Pressing","Pressing","scheduleOnce","name","Pressend","stopAllByTarget","Start_Obj","num","instance","Async_Function_Target","Target_Width","target","getComponent","width","Target_Height","height","Pos_Touch_World","getUILocation","x","y","z","Pos_Target_World","getWorldPosition","On_Event_TOUCH_Presslong","Press_Long_Call","Press_Short_Call","Is_Press_Long","Is_Cancel","Press_Long","Press_Short","Press_Shorteee","On_Event_TOUCH_Double","Touch_Count_All","Touch_Interval","Double_On_Call","Double_Off_Call","Touch_Count","On_Event_TOUCH_Drag","Interactable","Pos_Touch_Change","Pos_Touch_Start","Pos_Touch_End","HalfScreenWidth","getDesignResolutionSize","HalfScreenHeight","Get_Touch_Position","position","clone","Pos_Touch","Pos_Target","add","subtract","On_Event_TOUCH_Slide","Return","Angle","Distance","Get_Angle","Get_Distance","On_Event_MOUSE_DOWN","MOUSE_DOWN","On_Event_MOUSE_UP","MOUSE_UP","On_Event_MOUSE_MOVE","MOUSE_MOVE","On_Event_MOUSE_WHEEL","MOUSE_WHEEL","On_Event_MOUSE_ENTER","MOUSE_ENTER","On_Event_MOUSE_LEAVE","MOUSE_LEAVE","On_KEY_DOWN","EventType","KEY_DOWN","On_KEY_PRESSING","KEY_PRESSING","On_KEY_UP","KEY_UP","On_Sys_DEVICEMOTION","DEVICEMOTION","Set_Btn_Event_Add","Target_Node","Scr_Name","Fun_Name","CustomEventData","Component_Button","addComponent","Component_UIOpacity","EventHandler","component","handler","customEventData","clickEvents","Set_Btn_Event_Anim","Anim_Switch","transition","Anim_State","Anim_On","Anim_Off","zoomScale","duration","Time","to","scale","start","opacity","Set_Btn_Event_Reset","resetInEditor","On_Anim_Frame_Once","Anim","once","node","On_Anim_Frame","Off_Anim_Frame","On_Collider_PRE_SOLVE","Component_Collider","Get_Type_Is_Abnormal","enabled","Component_RigidBody2D","enabledContactListener","PRE_SOLVE","Self_Collider","Other_Collider","Contact","On_Collider_BEGIN_CONTACT","BEGIN_CONTACT","On_Collider_END_CONTACT","END_CONTACT","On_Collider_POST_SOLVE","POST_SOLVE","Off_Collider","Draw_Line_RigidBody","Canvas_Node","Stroke_Color","Line_Width","ENABLE_MULTI_TOUCH","CurGraphics","Point_List","PreK","Get_UI_Pos","Pos","set","convertToNodeSpaceAR","Should_Add_Point","DiffX","DiffY","K","CurK","Math","abs","Number","MAX_SAFE_INTEGER","sign","pop","On_Touch_Start","Node_Point","layer","addChild","strokeColor","WHITE","lineWidth","moveTo","On_Touch_Move","preX","preY","lineTo","stroke","Create_Colliders","destroy","Pos_Start","Pos_End","PolygonCollider","normalize","Width_Half","Pos1","multiplyScalar","add2f","Pos2","Pos3","Pos4","points","apply","On_Touch_End","Draw_Line","Arr_Pos","Component_Graphics","clear","Clear_Line"],"mappings":"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","sourcesContent":["import { _decorator, Button, CCObject, Collider2D, color, Color, Component, Contact2DType, EventTouch, Graphics, input, Input, macro, Node, NodeEventType, PolygonCollider2D, RigidBody2D, Tween, tween, UIOpacity, UITransform, v2, v3, Vec2, Vec3, view, Animation } from 'cc';\r\nimport { Tool_Other } from './Tool_Other';\r\nimport { Tool_Animation } from './Tool_Animation';\r\nconst { ccclass, property } = _decorator;\r\n\r\nconst Temp_V2 = v2();\r\nconst Temp_V3 = v3();\r\ntype TypePoint = {\r\n    x: number,\r\n    y: number\r\n}\r\n\r\n/**\r\n * 全局事件监听方法\r\n * @param Event_Name 事件名\r\n * @param Args       事件参数\r\n */\r\nexport type ListenerFunc = (Event_Name: string, Args: any) => void\r\n\r\nclass Event_Data {\r\n    public Event!: string;\r\n    public Listener!: ListenerFunc;\r\n    public Target: CCObject;\r\n}\r\n\r\n@ccclass('Tool_Event')\r\nexport class Tool_Event extends Component {\r\n\r\n    public static readonly instance = new Tool_Event();\r\n\r\n    private Events: { [Key: string]: Array<Event_Data> } = {};\r\n\r\n    /**\r\n    * 事件注册(全局)\r\n    * @param Event_Name 事件名\r\n    * @param listener 处理事件的侦听器函数\r\n    * @param object 侦听函数绑定的作用域对象\r\n    */\r\n    Event_On(Event_Name: string, listener: ListenerFunc, Target: CCObject) {\r\n        if (!Event_Name || !listener) {\r\n            console.debug(`【${Event_Name}】事件注册为空`);\r\n            return;\r\n        }\r\n        let List: Array<Event_Data> = this.Events[Event_Name];\r\n        if (List == null) {\r\n            List = [];\r\n            this.Events[Event_Name] = List;\r\n        }\r\n        let length = List.length;\r\n        for (let i = 0; i < length; i++) {\r\n            let bin = List[i];\r\n            if (bin.Listener == listener && bin.Target == Target) {\r\n                console.debug(`【${Event_Name}】事件注册重复`);\r\n            }\r\n        }\r\n        let Data: Event_Data = new Event_Data();\r\n        Data.Event = Event_Name;\r\n        Data.Listener = listener;\r\n        Data.Target = Target;\r\n        List.push(Data);\r\n    }\r\n\r\n    /**\r\n     * 监听一次事件，事件响应后，该监听自动移除\r\n     * @param Event_Name 事件名\r\n     * @param Listener 事件触发回调\r\n     * @param object 监听函数绑定的作用域对象\r\n     */\r\n    Event_Once(Event_Name: string, Listener: ListenerFunc, Target: CCObject) {\r\n        let _Listener: any = ($Event: string, $Args: any) => {\r\n            this.Event_Off(Event_Name, _Listener, Target);\r\n            _Listener = null;\r\n            Listener.call(Target, $Event, $Args);\r\n        }\r\n        this.Event_On(Event_Name, _Listener, Target);\r\n    }\r\n\r\n    /**\r\n     * 事件移除(全局)\r\n     * @param Event_Name 事件名\r\n     * @param listener 事件触发回调\r\n     * @param Target 监听函数绑定的作用域对象\r\n     */\r\n    Event_Off(Event_Name: string, Listener: Function, Target: CCObject) {\r\n        let List: Array<Event_Data> = this.Events[Event_Name];\r\n        if (!List) {\r\n            console.debug(`【${Event_Name}】事件不存在`);\r\n            return;\r\n        }\r\n        let Length = List.length;\r\n        for (let i = Length - 1; i >= 0; i--) {\r\n            let Bin: Event_Data = List[i];\r\n            if (Bin.Listener == Listener && Bin.Target == Target) {\r\n                List.splice(i, 1);\r\n                break;\r\n            }\r\n        }\r\n        if (List.length == 0) {\r\n            delete this.Events[Event_Name];\r\n        }\r\n    }\r\n    /**\r\n    * 事件移除(全局)-根据 Target \r\n    * @param Target 监听函数绑定的作用域对象(一般为节点或脚本)\r\n    */\r\n    Event_Off_Target(Target: CCObject) {\r\n        for (const Event_Name in this.Events) {\r\n            if (Object.prototype.hasOwnProperty.call(this.Events, Event_Name)) {\r\n                const Event_Datas = this.Events[Event_Name];\r\n                let length = Event_Datas.length;\r\n                for (let i = length - 1; i >= 0; i--) {\r\n                    let Event_Data: Event_Data = Event_Datas[i];\r\n                    if (Event_Data.Target === Target) {\r\n                        Event_Datas.splice(i, 1);\r\n                        break;\r\n                    }\r\n                }\r\n                if (Event_Datas.length == 0) {\r\n                    delete this.Events[Event_Name];\r\n                }\r\n            }\r\n        }\r\n    }\r\n    /** \r\n     * 事件触发(全局)\r\n     * @param Event_Name 事件名\r\n     * @param Args 事件参数\r\n     */\r\n    Event_Dispatch(Event_Name: string, Args: any = null) {\r\n        let list: Array<Event_Data> = this.Events[Event_Name];\r\n        if (list != null) {\r\n            let Temp: Array<Event_Data> = list.concat();\r\n            let Length = Temp.length;\r\n            for (let i = 0; i < Length; i++) {\r\n                let Event_Bin = Temp[i];\r\n                Event_Bin.Listener.call(Event_Bin.Target, Event_Name, Args);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**注册触摸开始监听 */\r\n    On_Event_TOUCH_START(Node_Set: Node, Call: Function = (Event) => { }) {\r\n        Node_Set.on(NodeEventType.TOUCH_START, Call, Node_Set);\r\n    }\r\n    /**注册触摸结束监听 */\r\n    On_Event_TOUCH_END(\r\n        Node_Set: Node,\r\n        Call: Function = (Event) => { },\r\n        Target?: unknown,\r\n        UseCapture?: boolean\r\n    ) {\r\n        // 如果传入了 Target 则使用它，否则默认用 Node_Set 作为 this 上下文\r\n        const TargetObj = Target !== undefined ? Target : Node_Set;\r\n        // 如果传入了 UseCapture 则使用它，否则默认 false\r\n        const IsUseCapture = UseCapture !== undefined ? UseCapture : false;\r\n        // 注册事件监听\r\n        Node_Set.on(NodeEventType.TOUCH_END, Call, TargetObj, IsUseCapture);\r\n    }\r\n\r\n    /**注册触摸取消监听 */\r\n    On_Event_TOUCH_CANCEL(Node_Set: Node, Call: Function = (Event) => { }) {\r\n        Node_Set.on(NodeEventType.TOUCH_CANCEL, Call, Node_Set);\r\n    }\r\n    /**注册触摸移动监听 */\r\n    On_Event_TOUCH_MOVE(Node_Set: Node, Call: Function = (Event) => { }) {\r\n        Node_Set.on(NodeEventType.TOUCH_MOVE, Call, Node_Set);\r\n    }\r\n\r\n    /**注销触摸开始监听 */\r\n    Off_Event_TOUCH_START(Node_Set: Node, Call: Function = (Event) => { }) {\r\n        Node_Set.off(NodeEventType.TOUCH_START, Call, Node_Set);\r\n    }\r\n    /**注销触摸结束监听 */\r\n    Off_Event_TOUCH_END(Node_Set: Node, Call: Function = (Event) => { }) {\r\n        Node_Set.off(NodeEventType.TOUCH_END, Call, Node_Set);\r\n    }\r\n    /**注销触摸取消监听 */\r\n    Off_Event_TOUCH_CANCEL(Node_Set: Node, Call: Function = (Event) => { }) {\r\n        Node_Set.off(NodeEventType.TOUCH_CANCEL, Call, Node_Set);\r\n    }\r\n    /**注销触摸移动监听 */\r\n    Off_Event_TOUCH_MOVE(Node_Set: Node, Call: Function = (Event) => { }) {\r\n        Node_Set.off(NodeEventType.TOUCH_MOVE, Call, Node_Set);\r\n    }\r\n    /**注销所有触摸监听 */\r\n    Off_Event_TOUCH_All(Node_Set: Node) {\r\n        Node_Set.off(NodeEventType.TOUCH_START);\r\n        Node_Set.off(NodeEventType.TOUCH_END);\r\n        Node_Set.off(NodeEventType.TOUCH_CANCEL);\r\n        Node_Set.off(NodeEventType.TOUCH_MOVE);\r\n    }\r\n\r\n    /**监听触摸按住\r\n     * @param Node_Set 监听节点\r\n     * @param Response_Time 响应时长\r\n     * @param Pressing_Call 按住回调\r\n     * @param Pressend_Call 松开回调\r\n     */\r\n    On_Event_TOUCH_Pressing(Node_Set: Node, Response_Time: number, Pressing_Call: Function = () => { }, Pressend_Call: Function = () => { }) {\r\n        let Is_Pressing = false;\r\n        const Pressing = () => {\r\n            if (Is_Pressing) {\r\n                this.scheduleOnce(() => {\r\n                    if (Is_Pressing) {\r\n                        console.debug(\"按住\", Node_Set.name);\r\n                        Pressing_Call && Pressing_Call();\r\n                        Pressing();\r\n                    }\r\n                }, 0.05);\r\n            }\r\n        }\r\n        const Pressend = () => {\r\n            Tween.stopAllByTarget(Start_Obj);\r\n            Pressend_Call && Pressend_Call();\r\n        }\r\n        let Start_Obj = { num: 0 };\r\n        this.On_Event_TOUCH_START(Node_Set, () => {\r\n            Start_Obj = { num: 0 };\r\n            Tool_Animation.instance.Async_Function_Target(Response_Time, Start_Obj, () => {\r\n                Is_Pressing = true;\r\n                Pressing();\r\n            });\r\n        });\r\n        this.On_Event_TOUCH_END(Node_Set, () => {\r\n            Is_Pressing = false;\r\n            Pressend();\r\n        });\r\n        this.On_Event_TOUCH_CANCEL(Node_Set, () => {\r\n            Is_Pressing = false;\r\n            Pressend();\r\n        });\r\n        this.On_Event_TOUCH_MOVE(Node_Set, (Event) => {\r\n            // console.log(Event.getUILocation());\r\n            // console.log(Event);\r\n            let Target_Width = Event.target.getComponent(UITransform).width;\r\n            let Target_Height = Event.target.getComponent(UITransform).height;\r\n            let Pos_Touch_World = v3(Event.getUILocation().x, Event.getUILocation().y, Event.getUILocation().z);\r\n            let Pos_Target_World = Event.target.getWorldPosition();\r\n            if (Pos_Touch_World.x < Pos_Target_World.x - Target_Width / 2 || Pos_Touch_World.x > Pos_Target_World.x + Target_Width / 2 || Pos_Touch_World.y < Pos_Target_World.y - Target_Height / 2 || Pos_Touch_World.y > Pos_Target_World.y + Target_Height / 2) {\r\n                if (!Is_Pressing) {\r\n                    return;\r\n                }\r\n                Is_Pressing = false;\r\n                Pressend();\r\n            } else {\r\n                if (Is_Pressing) {\r\n                    return;\r\n                }\r\n                Is_Pressing = true;\r\n                Pressing();\r\n            }\r\n        });\r\n    }\r\n    /**监听触摸长按\r\n     * @param Node_Set 监听节点\r\n     * @param Response_Time 响应时长\r\n     * @param Press_Long_Call 长按回调\r\n     * @param Press_Short_Call 短按回调\r\n     */\r\n    On_Event_TOUCH_Presslong(Node_Set: Node, Response_Time: number, Press_Long_Call: Function = () => { }, Press_Short_Call: Function = () => { }) {\r\n        let Is_Press_Long = false;\r\n        let Is_Cancel = false;\r\n        const Press_Long = () => {\r\n            console.debug(\"长按\", Node_Set.name);\r\n            Is_Press_Long = true;\r\n            Press_Long_Call && Press_Long_Call();\r\n        }\r\n        const Press_Short = () => {\r\n            if (Is_Cancel) {\r\n                return;\r\n            }\r\n            if (!Is_Press_Long) {\r\n                console.debug(\"短按\", Node_Set.name);\r\n                Tween.stopAllByTarget(Start_Obj);\r\n                Press_Short_Call && Press_Short_Call();\r\n            } else {\r\n                Is_Press_Long = false;\r\n            }\r\n        }\r\n        const Press_Shorteee = (Event) => {\r\n            if (!Is_Cancel) {\r\n                let Pos_Touch_World = v3(Event.getUILocation().x, Event.getUILocation().y, Event.getUILocation().z);\r\n                let Pos_Target_World = Event.target.getWorldPosition();\r\n                if (Pos_Touch_World.x < Pos_Target_World.x - Target_Width / 2 || Pos_Touch_World.x > Pos_Target_World.x + Target_Width / 2 || Pos_Touch_World.y < Pos_Target_World.y - Target_Height / 2 || Pos_Touch_World.y > Pos_Target_World.y + Target_Height / 2) {\r\n                    Tween.stopAllByTarget(Start_Obj);\r\n                    Is_Cancel = true;\r\n                    this.Off_Event_TOUCH_MOVE(Node_Set, Press_Shorteee)\r\n                }\r\n            }\r\n        }\r\n        const Target_Width = Node_Set.getComponent(UITransform).width;\r\n        const Target_Height = Node_Set.getComponent(UITransform).height;\r\n        let Start_Obj = { num: 0 };\r\n        this.On_Event_TOUCH_START(Node_Set, () => {\r\n            Is_Press_Long = false;\r\n            Is_Cancel = false;\r\n            Start_Obj = { num: 0 };\r\n            Tool_Animation.instance.Async_Function_Target(Response_Time, Start_Obj, () => {\r\n                Press_Long();\r\n            });\r\n        });\r\n        this.On_Event_TOUCH_END(Node_Set, () => {\r\n            Press_Short();\r\n        });\r\n        this.On_Event_TOUCH_CANCEL(Node_Set, () => {\r\n            Is_Press_Long = false;\r\n        });\r\n\r\n\r\n        this.On_Event_TOUCH_MOVE(Node_Set, Press_Shorteee);\r\n\r\n        // this.On_Event_TOUCH_MOVE(Node_Set, (Event) => {\r\n        //     if (!Is_Cancel) {\r\n        //         let Pos_Touch_World = v3(Event.getUILocation().x, Event.getUILocation().y, Event.getUILocation().z);\r\n        //         let Pos_Target_World = Event.target.getWorldPosition();\r\n        //         if (Pos_Touch_World.x < Pos_Target_World.x - Target_Width / 2 || Pos_Touch_World.x > Pos_Target_World.x + Target_Width / 2 || Pos_Touch_World.y < Pos_Target_World.y - Target_Height / 2 || Pos_Touch_World.y > Pos_Target_World.y + Target_Height / 2) {\r\n        //             Tween.stopAllByTarget(Start_Obj);\r\n        //             Is_Cancel = true;\r\n        //             this.Off_Btn_TOUCH_START(Node_Set)\r\n        //         }\r\n        //     }\r\n        // });\r\n    }\r\n    /**监听触摸双击\r\n     * @param Node_Set 监听节点\r\n     * @param Touch_Count_All 触摸总次数\r\n     * @param Touch_Interval 触摸间隔\r\n     * @param Double_On_Call 双击回调\r\n     * @param Double_Off_Call 松开回调\r\n     */\r\n    On_Event_TOUCH_Double(Node_Set: Node, Touch_Count_All: number = 2, Touch_Interval: number = 0.25, Double_On_Call: Function = () => { }, Double_Off_Call: Function = () => { }) {\r\n        let Start_Obj = { num: 0 };\r\n        let Touch_Count: number = 0;\r\n        this.On_Event_TOUCH_START(Node_Set, () => {\r\n            Tween.stopAllByTarget(Start_Obj)\r\n            Touch_Count++;\r\n            if (Touch_Count == Touch_Count_All) {\r\n                Touch_Count = 0;\r\n                console.debug(\"双击\", Node_Set.name);\r\n                Double_On_Call && Double_On_Call();\r\n            }\r\n            Start_Obj = { num: 0 };\r\n            Tool_Animation.instance.Async_Function_Target(Touch_Interval, Start_Obj, () => {\r\n                Touch_Count = 0;\r\n            });\r\n        });\r\n        this.On_Event_TOUCH_END(Node_Set, Call);\r\n        this.On_Event_TOUCH_CANCEL(Node_Set, Call);\r\n        function Call() {\r\n            Double_Off_Call && Double_Off_Call();\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * 监听触摸拖动\r\n     * @param Node_Set 监听节点\r\n     * @param Call 回调\r\n     * @param Interactable 可互动\r\n     * let Interactable = true;\r\n     * On_Event_TOUCH_Drag(Node_Set,Call,()=>Interactable);\r\n     */\r\n    On_Event_TOUCH_Drag(Node_Set: Node, Call: Function = () => { }, Interactable: Function = () => true) {\r\n\r\n        // 触摸改变位置\r\n        let Pos_Touch_Change: Vec3 | null = null;\r\n\r\n        // 触摸开始位置\r\n        let Pos_Touch_Start: Vec3 | null = null;\r\n\r\n        // 触摸结束位置\r\n        let Pos_Touch_End: Vec3 | null = null;\r\n\r\n        // 设计分辨率\r\n        const HalfScreenWidth = view.getDesignResolutionSize().width / 2;\r\n        const HalfScreenHeight = view.getDesignResolutionSize().height / 2;\r\n        // 工具函数：计算触摸位置相对于屏幕中心的位置\r\n        const Get_Touch_Position = (Event: any): Vec3 => {\r\n            return v3(\r\n                Event.getUILocation().x - HalfScreenWidth,\r\n                Event.getUILocation().y - HalfScreenHeight,\r\n                0\r\n            );\r\n        };\r\n        \r\n        this.On_Event_TOUCH_START(Node_Set, (Event: any) => {\r\n            // 如果不可交互，直接返回\r\n            if (!Interactable()) {\r\n                return;\r\n            }\r\n            // 记录起始触摸位置\r\n            Pos_Touch_Start = Node_Set.position.clone();\r\n            Pos_Touch_Change = Get_Touch_Position(Event);\r\n        });\r\n\r\n        this.On_Event_TOUCH_MOVE(Node_Set, (Event: any) => {\r\n            // 如果不可交互或没有起始位置，直接返回\r\n            if (!Interactable() || !Pos_Touch_Change) {\r\n                return;\r\n            }\r\n            // 计算当前触摸位置\r\n            const Pos_Touch = Get_Touch_Position(Event);\r\n            const Pos_Target = Node_Set.position.clone().add(Pos_Touch.clone().subtract(Pos_Touch_Change));\r\n            // 更新节点位置\r\n            Node_Set.position = Pos_Target;\r\n            // 更新起始触摸位置\r\n            Pos_Touch_Change = Pos_Touch;\r\n        });\r\n\r\n        this.On_Event_TOUCH_END(Node_Set, (Event: any) => {\r\n            // 如果不可交互，直接返回\r\n            if (!Interactable()) {\r\n                return;\r\n            }\r\n            Pos_Touch_End = Get_Touch_Position(Event);\r\n            // 调用回调函数\r\n            Call?.(Event, Pos_Touch_Start, Pos_Touch_End);\r\n        });\r\n    }\r\n    /**监听触摸滑动\r\n     * @param Node_Set 监听节点\r\n     * @param Call 回调\r\n     */\r\n    On_Event_TOUCH_Slide(Node_Set: Node, Call: Function = () => { }) {\r\n        let Pos_Touch_Start: Vec3 = null;\r\n        let Pos_Touch_Change: Vec3 = null;\r\n        let Return: { Angle: number | null; Distance: number | null } = { Angle: null, Distance: null };\r\n        this.On_Event_TOUCH_START(Node_Set, (Event) => {\r\n            Pos_Touch_Start = v3(Event.getUILocation().x - view.getDesignResolutionSize().width / 2, Event.getUILocation().y - view.getDesignResolutionSize().height / 2, 0);\r\n        });\r\n        this.On_Event_TOUCH_END(Node_Set, (Event) => {\r\n            Pos_Touch_Change = v3(Event.getUILocation().x - view.getDesignResolutionSize().width / 2, Event.getUILocation().y - view.getDesignResolutionSize().height / 2, 0);\r\n            Return.Angle = Tool_Animation.instance.Get_Angle(Pos_Touch_Start, Pos_Touch_Change);\r\n            Return.Distance = Tool_Animation.instance.Get_Distance(Pos_Touch_Start, Pos_Touch_Change);\r\n            Call?.(Return.Angle, Return.Distance);\r\n        });\r\n        this.On_Event_TOUCH_CANCEL(Node_Set, (Event) => {\r\n            Pos_Touch_Change = v3(Event.getUILocation().x - view.getDesignResolutionSize().width / 2, Event.getUILocation().y - view.getDesignResolutionSize().height / 2, 0);\r\n            Return.Angle = Tool_Animation.instance.Get_Angle(Pos_Touch_Start, Pos_Touch_Change);\r\n            Return.Distance = Tool_Animation.instance.Get_Distance(Pos_Touch_Start, Pos_Touch_Change);\r\n            Call?.(Return.Angle, Return.Distance);\r\n        });\r\n    }\r\n\r\n\r\n\r\n    /**监听鼠标按下 */\r\n    On_Event_MOUSE_DOWN(Node_Set: Node, Call: Function = () => { }) {\r\n        Node_Set.on(NodeEventType.MOUSE_DOWN, Call, Node_Set);\r\n    }\r\n    /**监听鼠标松开 */\r\n    On_Event_MOUSE_UP(Node_Set: Node, Call: Function = () => { }) {\r\n        Node_Set.on(NodeEventType.MOUSE_UP, Call, Node_Set);\r\n    }\r\n    /**监听鼠标移动 */\r\n    On_Event_MOUSE_MOVE(Node_Set: Node, Call: Function = () => { }) {\r\n        Node_Set.on(NodeEventType.MOUSE_MOVE, Call, Node_Set);\r\n    }\r\n    /**监听鼠标滚动 */\r\n    On_Event_MOUSE_WHEEL(Node_Set: Node, Call: Function = () => { }) {\r\n        Node_Set.on(NodeEventType.MOUSE_WHEEL, Call, Node_Set);\r\n    }\r\n    /**监听鼠标进入 */\r\n    On_Event_MOUSE_ENTER(Node_Set: Node, Call: Function = () => { }) {\r\n        Node_Set.on(NodeEventType.MOUSE_ENTER, Call, Node_Set);\r\n    }\r\n    /**监听鼠标移出 */\r\n    On_Event_MOUSE_LEAVE(Node_Set: Node, Call: Function = () => { }) {\r\n        Node_Set.on(NodeEventType.MOUSE_LEAVE, Call, Node_Set);\r\n    }\r\n\r\n    /**监听键盘按下 */\r\n    On_KEY_DOWN(Call: Function = () => { }) {\r\n        input.on(Input.EventType.KEY_DOWN, Call(), this);\r\n    }\r\n    /**监听键盘按住 */\r\n    On_KEY_PRESSING(Call: Function = () => { }) {\r\n        input.on(Input.EventType.KEY_PRESSING, Call(), this);\r\n    }\r\n    /**监听键盘松开 */\r\n    On_KEY_UP(Call: Function = () => { }) {\r\n        input.on(Input.EventType.KEY_UP, Call(), this);\r\n    }\r\n\r\n    /**监听重力感应 */\r\n    On_Sys_DEVICEMOTION(Node_Set: Node, Call: Function = () => { }) {\r\n        Node_Set.on(Input.EventType.DEVICEMOTION, Call, Node_Set);\r\n    }\r\n\r\n    /**设置按钮事件\r\n     * @Node_Set 待设置的节点\r\n     * @Target_Node 目标节点\r\n     * @Component 脚本/组件名\r\n     * @Handler  响应事件函数名\r\n     */\r\n    Set_Btn_Event_Add(Node_Set: Node, Target_Node: Node, Scr_Name: string, Fun_Name: string, CustomEventData = null) {\r\n        let Component_Button = Node_Set.getComponent(Button);\r\n        if (Component_Button == null) {\r\n            Component_Button = Node_Set.addComponent(Button);\r\n        }\r\n        let Component_UIOpacity = Node_Set.getComponent(UIOpacity);\r\n        if (Component_UIOpacity == null) {\r\n            Node_Set.addComponent(UIOpacity);\r\n        }\r\n        let Event = new Component.EventHandler();\r\n        Event.target = Target_Node;\r\n        Event.component = Scr_Name;\r\n        Event.handler = Fun_Name;\r\n        Event.customEventData = CustomEventData;\r\n        Component_Button.clickEvents.push(Event);\r\n        console.debug(Component_Button.clickEvents);\r\n    }\r\n    /**设置按钮动画\r\n     * @Anim_Switch 动画开关 \r\n     */\r\n    Set_Btn_Event_Anim(Node_Set: Node, Anim_Switch: boolean = false) {\r\n        let Component_Button = Node_Set.getComponent(Button);\r\n        if (Component_Button == null) {\r\n            Component_Button = Node_Set.addComponent(Button);\r\n        }\r\n        let Component_UIOpacity = Node_Set.getComponent(UIOpacity);\r\n        if (Component_UIOpacity == null) {\r\n            Node_Set.addComponent(UIOpacity);\r\n        }\r\n        if (Anim_Switch) {\r\n            Component_Button.transition = 0;\r\n            let Anim_State = false;\r\n            Node_Set.off(NodeEventType.TOUCH_START, () => {\r\n                if (Anim_State) {\r\n                    return;\r\n                }\r\n                Anim_State = true;\r\n                Anim_On(Node_Set);\r\n            }, Node_Set);\r\n            this.On_Event_TOUCH_START(Node_Set, () => {\r\n                if (Anim_State) {\r\n                    return;\r\n                }\r\n                Anim_State = true;\r\n                Anim_On(Node_Set);\r\n            })\r\n            this.On_Event_TOUCH_END(Node_Set, () => {\r\n                if (!Anim_State) {\r\n                    return;\r\n                }\r\n                Anim_State = false;\r\n                Anim_Off(Node_Set);\r\n            })\r\n            this.On_Event_TOUCH_CANCEL(Node_Set, () => {\r\n                if (!Anim_State) {\r\n                    return;\r\n                }\r\n                Anim_State = false;\r\n                Anim_Off(Node_Set);\r\n            })\r\n            this.On_Event_TOUCH_MOVE(Node_Set, (Event) => {\r\n                // console.log(Event.getUILocation());\r\n                // console.log(Event);\r\n                let Target_Width = Event.target.getComponent(UITransform).width;\r\n                let Target_Height = Event.target.getComponent(UITransform).height;\r\n                let Pos_Touch_World = v3(Event.getUILocation().x, Event.getUILocation().y, Event.getUILocation().z);\r\n                let Pos_Target_World = Event.target.getWorldPosition();\r\n                if (Pos_Touch_World.x < Pos_Target_World.x - Target_Width / 2 || Pos_Touch_World.x > Pos_Target_World.x + Target_Width / 2 || Pos_Touch_World.y < Pos_Target_World.y - Target_Height / 2 || Pos_Touch_World.y > Pos_Target_World.y + Target_Height / 2) {\r\n                    if (!Anim_State) {\r\n                        return;\r\n                    }\r\n                    Anim_State = false;\r\n                    Anim_Off(Node_Set);\r\n                } else {\r\n                    if (Anim_State) {\r\n                        return;\r\n                    }\r\n                    Anim_State = true;\r\n                    Anim_On(Node_Set);\r\n                }\r\n            })\r\n        } else {\r\n            Component_Button.transition = 3;\r\n            Component_Button.zoomScale = 0.975;\r\n            Component_Button.duration = 0.05;\r\n        }\r\n        // function Anim_On(Node_Set) {\r\n        //     console.debug(\"按下\");\r\n        //     let Time = 0.25;\r\n        //     tween(Node_Set)\r\n        //         .to(Time, { scale: v3(0.8, 0.8, 1) })\r\n        //         .start();\r\n        //     tween(Node_Set.getComponent(UIOpacity))\r\n        //         .to(Time, { opacity: 100 })\r\n        //         .start();\r\n        // }\r\n\r\n        // function Anim_Off(Node_Set) {\r\n        //     console.debug(\"松开\");\r\n        //     tween(Node_Set)\r\n        //         .to(0.17, { scale: v3(1.05, 1.05, 1) })\r\n        //         .to(0.08, { scale: v3(1, 1, 1) })\r\n        //         .start();\r\n        //     tween(Node_Set.getComponent(UIOpacity))\r\n        //         .to(0.25, { opacity: 255 })\r\n        //         .start();\r\n        // }\r\n        function Anim_On(Node_Set) {\r\n            console.debug(\"按下\");\r\n            let Time = 0.15;\r\n            tween(Node_Set)\r\n                .to(Time, { scale: v3(0.95, 0.95, 1) })\r\n                .start();\r\n            tween(Node_Set.getComponent(UIOpacity))\r\n                .to(Time, { opacity: 200 })\r\n                .start();\r\n        }\r\n\r\n        function Anim_Off(Node_Set) {\r\n            console.debug(\"松开\");\r\n            tween(Node_Set)\r\n                .to(0.1, { scale: v3(1.05, 1.05, 1) })\r\n                .to(0.05, { scale: v3(1, 1, 1) })\r\n                .start();\r\n            tween(Node_Set.getComponent(UIOpacity))\r\n                .to(0.15, { opacity: 255 })\r\n                .start();\r\n        }\r\n    }\r\n\r\n    /**重置按钮组件 */\r\n    Set_Btn_Event_Reset(Node_Set: Node) {\r\n        let Component_Button = Node_Set.getComponent(Button);\r\n        if (Component_Button == null) {\r\n            return;\r\n        }\r\n        Component_Button.resetInEditor();\r\n    }\r\n\r\n    /**注册动画监听\r\n    * @Anim 动画组件\r\n    * @EventType 事件类型\r\n    * @Call 回调函数\r\n    */\r\n    On_Anim_Frame_Once(Anim: Animation, EventType: Animation.EventType, Call: any) {\r\n        Anim.once(EventType, Call, Anim.node);\r\n    }\r\n    /**注册动画监听\r\n     * @Anim 动画组件\r\n     * @EventType 事件类型\r\n     * @Call 回调函数\r\n     */\r\n    On_Anim_Frame(Anim: Animation, EventType: Animation.EventType, Call: any) {\r\n        Anim.on(EventType, Call, Anim.node);\r\n    }\r\n    /**注销动画监听\r\n     * @Anim 动画组件\r\n     * @EventType 事件类型\r\n     * @Call 回调函数\r\n     */\r\n    Off_Anim_Frame(Anim: Animation, EventType: Animation.EventType, Call: any) {\r\n        Anim.off(EventType, Call, Anim.node);\r\n    }\r\n\r\n\r\n    /**碰撞开始前 */\r\n    On_Collider_PRE_SOLVE(Node_Set: Node, Call: Function = () => { }) {\r\n        let Component_Collider = Node_Set.getComponent(Collider2D);\r\n        if (!Tool_Other.instance.Get_Type_Is_Abnormal(Component_Collider)) {\r\n            return;\r\n        }\r\n        Component_Collider.enabled = true;\r\n        let Component_RigidBody2D = Node_Set.getComponent(RigidBody2D);\r\n        if (!Tool_Other.instance.Get_Type_Is_Abnormal(Component_RigidBody2D)) {\r\n            return;\r\n        }\r\n        Node_Set.getComponent(RigidBody2D).enabledContactListener = true;\r\n        Component_Collider.on(Contact2DType.PRE_SOLVE, (Self_Collider, Other_Collider, Contact) => {\r\n            Call(Self_Collider, Other_Collider, Contact);\r\n        }, Node_Set);\r\n    }\r\n    /**碰撞开始 */\r\n    On_Collider_BEGIN_CONTACT(Node_Set: Node, Call: Function = () => { }) {\r\n        let Component_Collider = Node_Set.getComponent(Collider2D);\r\n        if (!Tool_Other.instance.Get_Type_Is_Abnormal(Component_Collider)) {\r\n            return;\r\n        }\r\n        Component_Collider.enabled = true;\r\n        let Component_RigidBody2D = Node_Set.getComponent(RigidBody2D);\r\n        if (!Tool_Other.instance.Get_Type_Is_Abnormal(Component_RigidBody2D)) {\r\n            return;\r\n        }\r\n        Component_RigidBody2D.enabledContactListener = true;\r\n        Component_Collider.on(Contact2DType.BEGIN_CONTACT, (Self_Collider, Other_Collider, Contact) => {\r\n            // console.debug(Self_Collider, Other_Collider, Contact);\r\n            Call(Self_Collider, Other_Collider, Contact);\r\n        }, Node_Set);\r\n    }\r\n    /**碰撞结束 */\r\n    On_Collider_END_CONTACT(Node_Set: Node, Call: Function = () => { }) {\r\n        let Component_Collider = Node_Set.getComponent(Collider2D);\r\n        if (!Tool_Other.instance.Get_Type_Is_Abnormal(Component_Collider)) {\r\n            return;\r\n        }\r\n        Component_Collider.enabled = true;\r\n        let Component_RigidBody2D = Node_Set.getComponent(RigidBody2D);\r\n        if (!Tool_Other.instance.Get_Type_Is_Abnormal(Component_RigidBody2D)) {\r\n            return;\r\n        }\r\n        Node_Set.getComponent(RigidBody2D).enabledContactListener = true;\r\n        Component_Collider.on(Contact2DType.END_CONTACT, (Self_Collider, Other_Collider, Contact) => {\r\n            // console.debug(Self_Collider, Other_Collider, Contact);\r\n            Call(Self_Collider, Other_Collider, Contact);\r\n        }, Node_Set);\r\n    }\r\n    /**碰撞结束后 */\r\n    On_Collider_POST_SOLVE(Node_Set: Node, Call: Function = () => { }) {\r\n        let Component_Collider = Node_Set.getComponent(Collider2D);\r\n        if (!Tool_Other.instance.Get_Type_Is_Abnormal(Component_Collider)) {\r\n            return;\r\n        }\r\n        Component_Collider.enabled = true;\r\n        let Component_RigidBody2D = Node_Set.getComponent(RigidBody2D);\r\n        if (!Tool_Other.instance.Get_Type_Is_Abnormal(Component_RigidBody2D)) {\r\n            return;\r\n        }\r\n        Node_Set.getComponent(RigidBody2D).enabledContactListener = true;\r\n        Component_Collider.on(Contact2DType.POST_SOLVE, (Self_Collider, Other_Collider, Contact) => {\r\n            Call(Self_Collider, Other_Collider, Contact);\r\n        }, Node_Set);\r\n    }\r\n    /**取消碰撞监听 */\r\n    Off_Collider(Node_Set: Node) {\r\n        let Component_Collider = Node_Set.getComponent(Collider2D);\r\n        if (Component_Collider) {\r\n            Component_Collider.off(Contact2DType.PRE_SOLVE);\r\n            Component_Collider.off(Contact2DType.BEGIN_CONTACT);\r\n            Component_Collider.off(Contact2DType.END_CONTACT);\r\n            Component_Collider.off(Contact2DType.POST_SOLVE);\r\n            Component_Collider.enabled = false;\r\n        }\r\n    }\r\n\r\n    /**绘制刚性线\r\n     * @Canvas_Node 绘制的节点\r\n     * @Stroke_Color\r\n     */\r\n    Draw_Line_RigidBody(Canvas_Node: Node, Stroke_Color: Color = color(100, 255, 133), Line_Width: number = 10) {\r\n        macro.ENABLE_MULTI_TOUCH = false;\r\n        let CurGraphics: Graphics | null = null;\r\n        let Point_List: TypePoint[] = [];\r\n        //前一个斜率\r\n        let PreK: number = 0;\r\n        const Get_UI_Pos = (Pos: Vec2) => {\r\n            Temp_V3.set(Pos.x, Pos.y, 0);\r\n            CurGraphics?.node.getComponent(UITransform).convertToNodeSpaceAR(Temp_V3, Temp_V3);\r\n            Pos.set(Temp_V3.x, Temp_V3.y);\r\n            return Pos;\r\n        };\r\n        const Should_Add_Point = (DiffX: number, DiffY: number) => {\r\n            //斜率变化的容忍度\r\n            const K = 0.001;\r\n            const CurK = Math.abs(DiffX) < K ? (Number.MAX_SAFE_INTEGER * Math.sign(DiffX) * Math.sign(DiffY)) : (DiffY / DiffX);\r\n            if (Point_List.length > 1 && Math.abs(CurK - PreK) < K) {\r\n                //去掉重复点\r\n                Point_List.pop();\r\n            }\r\n            //将 当前点 的 斜率 CurK 赋值 给 前一个点 的 斜率 PreK\r\n            PreK = CurK;\r\n        };\r\n        const On_Touch_Start = (Event: EventTouch) => {\r\n            Event.getUILocation(Temp_V2);\r\n            Point_List.length = 0;\r\n            const Node_Point = new Node();\r\n            Node_Point.layer = Canvas_Node.layer;\r\n            Canvas_Node.addChild(Node_Point);\r\n            CurGraphics = Node_Point.addComponent(Graphics);\r\n            CurGraphics.strokeColor = Color.WHITE;\r\n            CurGraphics.lineWidth = Line_Width;\r\n            const { x, y } = Get_UI_Pos(Temp_V2);\r\n            CurGraphics.moveTo(x, y);\r\n            Point_List.push({ x, y });\r\n        };\r\n        const On_Touch_Move = (Event: EventTouch) => {\r\n            if (!CurGraphics) return;\r\n            Event.getUILocation(Temp_V2);\r\n            const { x, y } = Get_UI_Pos(Temp_V2);\r\n            const { x: preX, y: preY } = Point_List[Point_List.length - 1];\r\n            const DiffX = x - preX;\r\n            const DiffY = y - preY;\r\n            if (Math.abs(DiffX) + Math.abs(DiffY) >= CurGraphics.lineWidth) {\r\n                Should_Add_Point(DiffX, DiffY);\r\n                Point_List.push({ x, y });\r\n                CurGraphics.strokeColor = Stroke_Color;\r\n                CurGraphics.lineTo(x, y);\r\n                CurGraphics.stroke();\r\n            }\r\n        };\r\n        //创建碰撞器\r\n        const Create_Colliders = () => {\r\n            if (!CurGraphics || Point_List.length <= 1) {\r\n                //清理引用\r\n                CurGraphics.node.destroy();\r\n                CurGraphics = null;\r\n                return;\r\n            }\r\n            CurGraphics.addComponent(RigidBody2D);\r\n            for (let i = 0; i < Point_List.length - 1; i++) {\r\n                const Pos_Start = Point_List[i];\r\n                const Pos_End = Point_List[i + 1];\r\n                const PolygonCollider = CurGraphics.addComponent(PolygonCollider2D);\r\n                const K = v2(Pos_End.x - Pos_Start.x, Pos_End.y - Pos_Start.y).normalize();\r\n                const Width_Half = CurGraphics.lineWidth / 2;\r\n                const Pos1 = v2(K.y, -K.x).multiplyScalar(Width_Half).add2f(Pos_Start.x, Pos_Start.y);\r\n                const Pos2 = v2(-K.y, K.x).multiplyScalar(Width_Half).add2f(Pos_Start.x, Pos_Start.y);\r\n                const Pos3 = v2(K.y, -K.x).multiplyScalar(Width_Half).add2f(Pos_End.x, Pos_End.y);\r\n                const Pos4 = v2(-K.y, K.x).multiplyScalar(Width_Half).add2f(Pos_End.x, Pos_End.y);\r\n                PolygonCollider.points = [Pos1, Pos2, Pos3, Pos4];\r\n                PolygonCollider.apply();\r\n            }\r\n        };\r\n        const On_Touch_End = () => {\r\n            Create_Colliders();\r\n        };\r\n        this.On_Event_TOUCH_START(Canvas_Node, On_Touch_Start);\r\n        this.On_Event_TOUCH_END(Canvas_Node, On_Touch_End);\r\n        this.On_Event_TOUCH_CANCEL(Canvas_Node, On_Touch_End);\r\n        this.On_Event_TOUCH_MOVE(Canvas_Node, On_Touch_Move);\r\n    }\r\n\r\n    Draw_Line(Canvas_Node: Node, Arr_Pos: Vec3[], Stroke_Color: Color = color(100, 255, 133), Line_Width: number = 10) {\r\n        let Component_Graphics = Canvas_Node.getComponent(Graphics);\r\n        if (!Component_Graphics) {\r\n            Component_Graphics = Canvas_Node.addComponent(Graphics);\r\n        }\r\n\r\n        Component_Graphics.clear();\r\n\r\n        Component_Graphics.strokeColor = Stroke_Color;\r\n        Component_Graphics.lineWidth = Line_Width;\r\n\r\n        if (Arr_Pos.length > 0) {\r\n            Component_Graphics.moveTo(Arr_Pos[0].x, Arr_Pos[0].y);\r\n            // 依次连接后续的点\r\n            for (let i = 1; i < Arr_Pos.length; i++) {\r\n                Component_Graphics.lineTo(Arr_Pos[i].x, Arr_Pos[i].y);\r\n            }\r\n            // 绘制线条\r\n            Component_Graphics.stroke();\r\n        } else {\r\n            console.debug(\"Arr_Pos 数组为空，无法绘制线条\");\r\n        }\r\n    }\r\n\r\n    Clear_Line(Canvas_Node: Node) {\r\n        let Component_Graphics = Canvas_Node.getComponent(Graphics);\r\n        if (!Component_Graphics) {\r\n            Component_Graphics = Canvas_Node.addComponent(Graphics);\r\n        }\r\n        Component_Graphics.clear();\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n}\r\n\r\n\r\n"]}