{"version":3,"sources":["file:///Users/jingfaxie/Documents/UGit/minigame3/Aby/assets/scripts/framework/manager/LocalStorageManager.ts"],"names":["LocalStorageManager","sys","constructor","_dataKey","_uidKey","_openIdKey","instance","_instance","setGameName","name","getGameData","data","localStorage","getItem","JSON","parse","setGameData","setItem","stringify","uid","console","info","openId","localStorageManager"],"mappings":";;;uEAEMA,mB;;;;;;;AAFGC,MAAAA,G,OAAAA,G;;;;;;;;;AAEHD,MAAAA,mB,GAAN,MAAMA,mBAAN,CAA0B;AAIdE,QAAAA,WAAW,GAAG;AAAA,eAQdC,QARc,GAQK,EARL;AAAA,eASdC,OATc,GASI,EATJ;AAAA,eAUdC,UAVc,GAUO,EAVP;AAAE;;AACE,mBAARC,QAAQ,GAAwB;AAC9C,cAAI,CAAC,KAAKC,SAAV,EAAqB;AACjB,iBAAKA,SAAL,GAAiB,IAAIP,mBAAJ,EAAjB;AACH;;AACD,iBAAO,KAAKO,SAAZ;AACH;;AAMDC,QAAAA,WAAW,CAACC,IAAD,EAAgB;AACvB,eAAKN,QAAL,GAAgBM,IAAI,GAAG,WAAvB;AACA,eAAKL,OAAL,GAAeK,IAAI,GAAG,MAAtB;AACA,eAAKJ,UAAL,GAAkBI,IAAI,GAAG,CAAE,SAA3B;AACH;;AAEDC,QAAAA,WAAW,GAAG;AACV,cAAIC,IAAI,GAAGV,GAAG,CAACW,YAAJ,CAAiBC,OAAjB,CAAyB,KAAKV,QAA9B,CAAX;;AACA,cAAIQ,IAAJ,EAAU;AACNA,YAAAA,IAAI,GAAGG,IAAI,CAACC,KAAL,CAAWJ,IAAX,CAAP;AACA,mBAAOA,IAAP;AACH;;AAED,iBAAO,EAAP;AACH;;AAEDK,QAAAA,WAAW,CAACL,IAAD,EAAe;AACtBV,UAAAA,GAAG,CAACW,YAAJ,CAAiBK,OAAjB,CAAyB,KAAKd,QAA9B,EAAwCW,IAAI,CAACI,SAAL,CAAeP,IAAf,CAAxC;AACH;;AAEM,YAAHQ,GAAG,CAACA,GAAD,EAAc;AACjBlB,UAAAA,GAAG,CAACW,YAAJ,CAAiBK,OAAjB,CAAyB,KAAKb,OAA9B,EAAuCe,GAAG,GAAG,EAA7C;AACAC,UAAAA,OAAO,CAACC,IAAR,CAAa,cAAcF,GAA3B;AACH;;AAEM,YAAHA,GAAG,GAAG;AACN,iBAAOlB,GAAG,CAACW,YAAJ,CAAiBC,OAAjB,CAAyB,KAAKT,OAA9B,CAAP;AACH;;AAES,YAANkB,MAAM,CAACA,MAAD,EAAiB;AACvBrB,UAAAA,GAAG,CAACW,YAAJ,CAAiBK,OAAjB,CAAyB,KAAKZ,UAA9B,EAA0CiB,MAAM,GAAG,EAAnD;AACAF,UAAAA,OAAO,CAACC,IAAR,CAAa,iBAAiBC,MAA9B;AACH;;AAES,YAANA,MAAM,GAAG;AACT,iBAAOrB,GAAG,CAACW,YAAJ,CAAiBC,OAAjB,CAAyB,KAAKR,UAA9B,CAAP;AACH;;AApDqB,O;AAEtB;AAFEL,MAAAA,mB,CAGaO,S;;qCAqDNgB,mB,GAAsBvB,mBAAmB,CAACM,Q","sourcesContent":["import { sys } from \"cc\";\n\nclass LocalStorageManager {\n\n    // 单例\n    private static _instance: LocalStorageManager;\n    private constructor() {};\n    public static get instance(): LocalStorageManager {\n        if (!this._instance) {\n            this._instance = new LocalStorageManager();\n        }\n        return this._instance;\n    };\n\n    private _dataKey: string = \"\";\n    private _uidKey: string = \"\";\n    private _openIdKey: string = \"\";\n    \n    setGameName(name : string) {\n        this._dataKey = name + \"_gameData\";\n        this._uidKey = name + \"_uid\";\n        this._openIdKey = name + + \"_openId\";\n    }\n\n    getGameData() {\n        let data = sys.localStorage.getItem(this._dataKey);\n        if (data) {\n            data = JSON.parse(data);\n            return data;\n        }\n\n        return {};\n    }\n\n    setGameData(data: object) {\n        sys.localStorage.setItem(this._dataKey, JSON.stringify(data));\n    }\n\n    set uid(uid: string) {\n        sys.localStorage.setItem(this._uidKey, uid + \"\");\n        console.info(\"save uid:\" + uid);\n    }\n\n    get uid() {\n        return sys.localStorage.getItem(this._uidKey);\n    }\n\n    set openId(openId: string) {\n        sys.localStorage.setItem(this._openIdKey, openId + \"\");\n        console.info(\"save openId：\" + openId);\n    }\n    \n    get openId() {\n        return sys.localStorage.getItem(this._openIdKey);\n    }\n\n}\n\nexport const localStorageManager = LocalStorageManager.instance;\n"]}