{"version":3,"sources":["file:///C:/Users/LEGION/Downloads/ZhiShangGouBuDao/assets/Script/Game/GameMode/PanelMathMatch.ts"],"names":["_decorator","color","find","Label","tween","v3","Animation","Sprite","RichText","sys","sp","PanelTemplate","Tool_Event","Tool_Animation","Tool_UI","Tool_Other","Tool_Console","PlatformApi","GravityPlatform","ccclass","property","PanelMathMatch","Interactable","GameTimeAll","GameTimeIng","GameTime","JGTime","BtnBreak","PanelFH","GameData","KeyTarget","KeyExitState","KeyExitValue","KeyShadowIndex","LastKeyIndex","ValueTarget","ValuePos","ValueTargetC","KeyShadow","OnDistance","AnimCorrectNode","AnimWrongNode","TouchNode","TipLabel","TipNode","TipAnim","Obj_Start","num","Time","Time_Max","Step","onLoad","onEnable","IsInit","LoadPanel","GameStart","start","Timing","instance","Async_Function_Target","Anim_Frame_Play_Plus","BtnTip","getChildByName","getComponent","TimStop","Tween_Stop_Target","Promise","resolve","reject","BtnSetting","node","PanelTip","BtnTipClose","BtnTipGet","PanelVictory","PanelFail","BtnNext","BtnExit","OnBtn","Game_Script","AnimSwitch","Resoure_Data","Load_Prefab","BtnContinue","TimerIng","On_Event_TOUCH_END","PanelSetting","BtnSettingCall","Sound_Play","Vibration_Switch_Get","vibrateShort","UpdatePanelSetting","TimerPause","BtnBreakCall","active","IsShare","Event_On","MathMatchLevel","MathMatchScore","Score","DataSet","Music_Resume","BtnReStartCall","shareAppMessage","window","wx","console","log","BtnNextCall","BlockInputEvents","StarsData","Pos","Angle","Stars","AddScoreAnim","I","Star","children","parent","to","position","x","y","angle","scale","Async_Wait","ScoreLabel2","TPos","Get_Target_Node_Local_Pos","ScoreLabel1","Animation_Node_Move_Time","call","by","string","Number","BtnTipCall","grayscale","PropNum","TipCall","BtnTipCloseCall","BtnTipGetCall","showVideoAd","P","N","Set_Prefab_Node","easing","add","a","b","Animation_Node_Move_Bezier_Time","UpdateProp","destroy","TimerInit","ValueNumber","i","length","push","undefined","NullGIndex","Get_Random_Int","j","Result","Obj","Get_Min_Distance_Node","worldPosition","Distance","Num","Index","warn","Set_Color_Label","indexOf","IsExit","Arr_Check_Index","Key","Value","Temp","ColorOff","ColorOn","Set_SpriteFrame","Load_SpriteFrame","Node_Index_Set","OriginalNode","OriginalLastKeyIndex","CurrentLastKeyIndex","TipStart","Arr_Increase","KeyNodeIndexT","KeyNodeValueT","Set_Color_Sprite","UpdateUIValue","GameFailed","Set_Btn_Event_Anim","clone","ComponentLabel","Seconds_To_Time_String","substring","Async_Function_Id","play","Tween_Stop_Tag","TimerResume","TimerStop","InitData","UpdateScore","F","Json","Load_Json","JsonData","OnMessage","Copy_Deep","IsHint","IsContinue","InitInterface","Hand","Anim_Frame_Play","destroyAllChildren","Str","Shadow","ComponentLabel1","Off_Event_TOUCH_All","Check_Shadow","On_Event_TOUCH_START","On_Event_TOUCH_Drag","Event","Pos_Touch_Start","Pos_Touch_End","MoveNode","PosStart","PosEnd","AnimA","TipReset","OriginalNodePos","LastKeyIndexTemp","KeyNodeIndexL","KeyNodeValueL","FindAllEquationIndices_","Arr_Delete","error","Wait","Len","Set_Pos_Word_Same","IsAudio","sort","valueA","parseFloat","valueB","platform","Platform","WECHAT_GAME","WECHAT_MINI_PROGRAM","onLevelStart","GameVictory","onLevelSuccess","T","StarsAnim","CD","Anim_Skeleton_Play","Skeleton","GameResult","BreakNode","SetNode","Spine","SpineNode1","SpineNode2","repeatForever","delay","Rows","Cols","Count","CorrectIndex","WrongIndex","ResultAll","CheckResult","GetResult","expression","processed","op","left","right","result","Error","splice","toString","ErrorChar","ValueResult","isNaN","Indexs","Chars","Sort_Reverse","KeyResult","IsEqual","Math","floor","KeyP","ValueP","AnimReset","AnimV","AnimF","ICall","IsPlay","name","Speed","Console_Style","Font_Color","Font_Size","Font_Weight","Font_Style","Font_Family","Text_Decoration","Text_Shadow","Background_Color","Padding","Margin","Border","Border_Radius"],"mappings":"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","sourcesContent":["import { _decorator, color, Component, find, Label, Layout, log, math, Node, Prefab, Tween, tween, v3, Vec3, Animation, Sprite, RichText, sys, sp, easing } from 'cc';\r\nimport { PanelTemplate } from './PanelTemplate';\r\nimport { Tool_Event } from '../../Tool/Tool_Event';\r\nimport { Tool_Animation } from '../../Tool/Tool_Animation';\r\nimport { Tool_UI } from '../../Tool/Tool_UI';\r\nimport { Tool_Other } from '../../Tool/Tool_Other';\r\nimport { Tool_Console } from '../../Tool/Tool_Console';\r\nimport { PlatformApi } from '../../Other/SDK/PlatformApi';\r\nimport { GravityPlatform } from '../../Other/GeSdk/GravityPlatform';\r\nconst { ccclass, property } = _decorator;\r\n\r\n\r\n\r\n/**数据接口 */\r\nexport interface DataMathMatch {\r\n    Level: number, Key: string[], Value: number[], Result: number[], Count: number;\r\n}\r\n\r\n@ccclass('PanelMathMatch')\r\nexport class PanelMathMatch extends PanelTemplate {\r\n\r\n    Interactable: boolean = true;\r\n\r\n\r\n    //总时间\r\n    GameTimeAll: number = 180;\r\n    //计时时间\r\n    GameTimeIng: number = 0\r\n    //剩余时间\r\n    GameTime: number = 0;\r\n\r\n    JGTime: number = 30;\r\n\r\n\r\n    /**返回按钮 */\r\n    BtnBreak: Node = null;\r\n    PanelFH: Node = null;\r\n    GameData: DataMathMatch = null;\r\n\r\n    /**有效目标 */\r\n    KeyTarget: Node[] = [];\r\n    /**存在状态 */\r\n    KeyExitState: boolean[] = [];\r\n\r\n    /**存在节点 */\r\n    KeyExitValue: Node[] = [];\r\n\r\n\r\n    /**阴影索引 */\r\n    KeyShadowIndex: number = -1;\r\n\r\n\r\n    //Value节点上一次在Key节点的位置\r\n    LastKeyIndex: number[] = [];\r\n    /**有效目标 */\r\n    ValueTarget: Node[] = [];\r\n    ValuePos: Vec3[] = [];\r\n    /**Value有效目标副本 */\r\n    ValueTargetC: Node[] = [];\r\n\r\n    KeyShadow: Prefab = null;\r\n    /**有效距离 */\r\n    OnDistance: number = 50;\r\n\r\n\r\n    /**正确动画节点 */\r\n    AnimCorrectNode: Node[] = [];\r\n    /**错误动画节点 */\r\n    AnimWrongNode: Node[] = [];\r\n    TouchNode: Node = null;\r\n\r\n    TipLabel: Node = null;\r\n    TipNode: Node = null;\r\n\r\n\r\n    TipAnim: Node[] = [];\r\n\r\n    Obj_Start = { num: 0 }\r\n    Time: number = 0;\r\n    Time_Max: number = 15;//15\r\n\r\n\r\n    Step = -1;\r\n\r\n\r\n\r\n    async onLoad() {\r\n        super.onLoad();\r\n    }\r\n\r\n    async onEnable() {\r\n        if (!this.IsInit) {\r\n            await this.LoadPanel();\r\n        }\r\n        this.GameStart();\r\n        //    this.Resoure_Data.Music_Play(\"Audio/BgmGame\");\r\n    }\r\n\r\n    start() {\r\n\r\n    }\r\n\r\n    Timing() {\r\n        this.Obj_Start = { num: 0 };\r\n        Tool_Animation.instance.Async_Function_Target(this.Time_Max, this.Obj_Start, () => {\r\n            //console.log(\"无操作播放\");\r\n            Tool_Animation.instance.Anim_Frame_Play_Plus(this.BtnTip.getChildByName(\"Icon\").getComponent(Animation), null, null, null, null, null, 3, 0, () => {\r\n                this.Timing();\r\n            });\r\n        })\r\n    }\r\n    TimStop() {\r\n        //console.log(\"重置无操作播放计时\");\r\n        Tool_Animation.instance.Tween_Stop_Target(this.Obj_Start);\r\n        this.Timing();\r\n    }\r\n\r\n\r\n\r\n    /**加载面板 */\r\n    async LoadPanel(): Promise<void> {\r\n        return new Promise(async (resolve, reject) => {\r\n            /**绑定关键节点 */\r\n            this.BtnSetting = find(\"BtnSetting\", this.node);\r\n\r\n            this.PanelTip = find(\"PanelTip\", this.node);\r\n            this.BtnTip = find(\"BtnTip\", this.node);\r\n            this.BtnTipClose = find(\"BtnTipClose\", this.PanelTip);\r\n            this.BtnTipGet = find(\"BtnTipGet\", this.PanelTip);\r\n\r\n            this.PanelFH = find(\"PanelFH\", this.node);\r\n\r\n\r\n            this.PanelVictory = find(\"PanelVictory\", this.node);\r\n            this.PanelFail = find(\"PanelFail\", this.node);\r\n            this.BtnNext = find(\"BtnNext\", this.PanelVictory);\r\n\r\n            // this.BtnGet = find(\"BtnGet\", this.PanelTip);\r\n            this.BtnExit = find(\"BtnExit\", this.node);\r\n            /**注册按钮事件 */\r\n            await this.OnBtn(this.Game_Script.AnimSwitch);\r\n            this.IsInit = true;\r\n            resolve();\r\n            this.KeyShadow = await this.Resoure_Data.Load_Prefab(\"Prefab/PanelMathMatch/KeyShadow\");\r\n        });\r\n    }\r\n\r\n    /**注册按钮 */\r\n    async OnBtn(AnimSwitch: boolean = false) {\r\n\r\n\r\n        /**设置按钮 */\r\n        const BtnContinue = () => {\r\n            this.TimerIng();\r\n        }\r\n\r\n\r\n        Tool_Event.instance.On_Event_TOUCH_END(this.Game_Script.PanelSetting.getChildByName(\"BtnLayout\").getChildByName(\"BtnContinue\"), BtnContinue);\r\n\r\n        /**设置按钮 */\r\n        const BtnSettingCall = () => {\r\n            this.Resoure_Data.Sound_Play(\"Audio/BtnClick\");\r\n            if (this.Resoure_Data.Vibration_Switch_Get()) {\r\n                PlatformApi.instance.vibrateShort();\r\n            }\r\n            this.Game_Script.UpdatePanelSetting(true);\r\n            this.TimerPause();\r\n        }\r\n\r\n        /**关闭按钮 */\r\n        const BtnBreakCall = () => {\r\n            this.Resoure_Data.Sound_Play(\"Audio/BtnClick\");\r\n            if (this.Resoure_Data.Vibration_Switch_Get()) {\r\n                PlatformApi.instance.vibrateShort();\r\n            }\r\n            this.node.active = false;\r\n        }\r\n\r\n\r\n        let IsShare: boolean = false;\r\n        Tool_Event.instance.Event_On(\"WXOnShow\", () => {\r\n            if (!IsShare) {\r\n                return;\r\n            }\r\n            IsShare = false;\r\n            this.Game_Script.MathMatchLevel--;\r\n            this.Game_Script.MathMatchScore -= this.Score;\r\n            this.Game_Script.DataSet();\r\n            this.GameStart();\r\n            this.Resoure_Data.Music_Resume();\r\n        }, this);\r\n\r\n        /**重新游戏 */\r\n        const BtnReStartCall = async () => {\r\n            this.Resoure_Data.Sound_Play(\"Audio/BtnClick\");\r\n            if (this.Resoure_Data.Vibration_Switch_Get()) {\r\n                PlatformApi.instance.vibrateShort();\r\n            }\r\n            PlatformApi.instance.shareAppMessage(() => { });\r\n            if (window.wx) {\r\n                IsShare = true;\r\n                console.log(\"重新游戏wx\");\r\n            } else {\r\n                console.log(\"重新游戏\");\r\n                //  await Tool_Animation.instance.Async_Wait(2);\r\n                console.log(this.Game_Script.MathMatchLevel);\r\n\r\n                this.Game_Script.MathMatchLevel--;\r\n                console.log(this.Game_Script.MathMatchLevel);\r\n                this.Game_Script.MathMatchScore -= this.Score;\r\n                this.Game_Script.DataSet();\r\n                this.GameStart();\r\n            }\r\n\r\n        }\r\n        /**下一关按钮 */\r\n        const BtnNextCall = async () => {\r\n            this.Resoure_Data.Sound_Play(\"Audio/BtnClick\");\r\n            if (this.Resoure_Data.Vibration_Switch_Get()) {\r\n                PlatformApi.instance.vibrateShort();\r\n            }\r\n            this.Game_Script.BlockInputEvents.active = true;\r\n            let StarsData: { Pos: Vec3[], Angle: number[] } = {\r\n                Pos: [\r\n                    v3(-175, 150, 0), v3(0, 180, 0), v3(175, 150, 0),\r\n                ], Angle: [\r\n                    50, 25, 0\r\n                ]\r\n            };\r\n            let Stars = find(\"WinBanner/Stars\", this.PanelVictory)\r\n            const AddScoreAnim = async () => {\r\n                for (let I = 0; I < this.Score; I++) {\r\n                    let Star = Stars.children[I].children[0].parent;\r\n                    tween(Star)\r\n                        .to(0.25, { position: v3(StarsData.Pos[1].x, StarsData.Pos[1].y - 50, 0) })\r\n                        .start();\r\n                    tween(Star)\r\n                        .to(0.25, { angle: StarsData.Angle[1] })\r\n                        .start();\r\n                    tween(Star)\r\n                        .to(0.25, { scale: v3(0.5, 0.5, 1) })\r\n                        .start();\r\n                }\r\n                await Tool_Animation.instance.Async_Wait(0.3);\r\n                for (let I = 0; I < this.Score; I++) {\r\n                    let Star = Stars.children[I].children[0].parent;\r\n                    console.log(this.Game_Script.ScoreLabel2.node.parent.getChildByName(\"Icon\"));\r\n\r\n                    let TPos = Tool_UI.instance.Get_Target_Node_Local_Pos(Star, this.Game_Script.ScoreLabel1.node.parent.getChildByName(\"Icon\"));\r\n\r\n                    Tool_Animation.instance.Animation_Node_Move_Time(Star, TPos, 0.25);\r\n                    tween(Star)\r\n                        .to(0.25, { scale: v3(0.25, 0.25, 1) })\r\n                        .call(() => {\r\n                            tween(this.Game_Script.ScoreLabel1.node.parent.getChildByName(\"Icon\"))\r\n                                .by(0.1, { scale: v3(-0.2, -0.2, 0) })\r\n                                .by(0.1, { scale: v3(0.2, 0.2, 0) })\r\n                                .start();\r\n                            this.Game_Script.ScoreLabel1.string = Number(this.Game_Script.ScoreLabel1.string) + 1 + \"\";\r\n                            this.Resoure_Data.Sound_Play(\"Audio/AddScore\");\r\n                        })\r\n                        .start();\r\n                    await Tool_Animation.instance.Async_Wait(0.15);\r\n                }\r\n            }\r\n            await AddScoreAnim();\r\n            await Tool_Animation.instance.Async_Wait(0.6);\r\n            this.GameStart();\r\n        }\r\n\r\n        const BtnTipCall = async () => {\r\n            if (this.BtnTip.getComponent(Sprite).grayscale) {//this.ValueTarget.length \r\n                return;\r\n            }\r\n            this.Resoure_Data.Sound_Play(\"Audio/BtnClick\");\r\n            if (this.Resoure_Data.Vibration_Switch_Get()) {\r\n                PlatformApi.instance.vibrateShort();\r\n            }\r\n            if (this.Game_Script.PropNum > 0) {\r\n                TipCall();\r\n            } else {\r\n                this.PanelTip.active = true;\r\n            }\r\n\r\n        }\r\n        const BtnTipCloseCall = async () => {\r\n            this.Resoure_Data.Sound_Play(\"Audio/BtnClick\");\r\n            if (this.Resoure_Data.Vibration_Switch_Get()) {\r\n                PlatformApi.instance.vibrateShort();\r\n            }\r\n            this.PanelTip.active = false;\r\n        }\r\n        const BtnTipGetCall = async () => {\r\n            this.Resoure_Data.Sound_Play(\"Audio/BtnClick\");\r\n            if (this.Resoure_Data.Vibration_Switch_Get()) {\r\n                PlatformApi.instance.vibrateShort();\r\n            }\r\n            this.TimerPause();\r\n            PlatformApi.instance.showVideoAd(async () => {\r\n                this.Resoure_Data.Music_Resume()\r\n                this.TimerIng();\r\n\r\n                this.PanelTip.active = false;\r\n                let P = await this.Resoure_Data.Load_Prefab(\"Prefab/PanelMathMatch/Icon\");\r\n                let N = Tool_UI.instance.Set_Prefab_Node(P, this.node, v3(0, 0, 0));\r\n                // N.scale = v3(0, 0, 1);\r\n\r\n                this.Game_Script.PropNum += 2;\r\n                this.Game_Script.DataSet();\r\n                this.Resoure_Data.Sound_Play(\"Audio/PropA\");\r\n                //console.log(\"播放道具抖动音效\");\r\n\r\n                tween(N)\r\n                    .to(0.1, { angle: -10 }, { easing: \"backInOut\" })\r\n                    .to(0.1, { angle: 10 }, { easing: \"backInOut\" })\r\n                    .to(0.1, { angle: -10 }, { easing: \"backInOut\" })\r\n                    .to(0.1, { angle: 10 }, { easing: \"backInOut\" })\r\n                    .to(0.1, { angle: -10 }, { easing: \"backInOut\" })\r\n                    .call(() => {\r\n                        tween(N)\r\n                            .to(0.5, { scale: v3(0.5, 0.5, 1) })\r\n                            .start()\r\n                        let Pos = Tool_UI.instance.Get_Target_Node_Local_Pos(N, this.BtnTip).add(v3(10, 40, 0));\r\n                        let a = v3(Pos.x + 250, 1000, 0)\r\n                        let b = v3(N.position.x, -200, 0)\r\n                        Tool_Animation.instance.Animation_Node_Move_Bezier_Time(N, Pos, 1, a, b, 0.5, () => {\r\n                            this.Resoure_Data.Sound_Play(\"Audio/PropGet\");\r\n                            //console.log(\"播放道具获取音效\");\r\n                            this.UpdateProp();\r\n                            N.destroy();\r\n                        })\r\n\r\n                    })\r\n                    .start()\r\n            }, () => {\r\n                this.Resoure_Data.Music_Resume()\r\n                this.TimerInit();\r\n            })\r\n        }\r\n\r\n\r\n        /**提示 */\r\n        const TipCall = async () => {\r\n\r\n            // this.Game_Script.OnMessage(\"没有更多关卡了\");\r\n            //console.error(this.ValueTarget);\r\n\r\n            if (this.TipLabel != null || this.TipNode != null) {\r\n                return;\r\n            }\r\n\r\n            //剩下的数字\r\n            let ValueNumber: number[] = [];\r\n            for (let i = 0; i < this.ValueTarget.length; i++) {\r\n                ValueNumber.push(Number(this.ValueTarget[i].getChildByName(\"Label\").getComponent(Label).string));\r\n            }\r\n            if (ValueNumber == undefined) {\r\n                // Tool_UI.instance.Set_Color_Label(this.TipLabel, color(0, 0, 0, 255));\r\n                // this.TipLabel.getComponent(Label).string = \"\";\r\n                // this.TipLabel.scale = v3(1, 1, 1);\r\n                // Tool_Animation.instance.Tween_Stop_Target(this.TipLabel);\r\n                this.TipLabel = null;\r\n                this.TipNode = null;\r\n                return;\r\n            }\r\n\r\n            this.Game_Script.PropNum--;\r\n            this.Game_Script.DataSet();\r\n            this.UpdateProp();\r\n\r\n            //console.log(\"剩下的数字\", ValueNumber);\r\n\r\n            let NullGIndex = Tool_Other.instance.Get_Random_Int(0, ValueNumber.length - 1);\r\n\r\n            //索引\r\n            //console.log(\"V索引\", NullGIndex);\r\n            //答案\r\n            //console.log(\"答案\", ValueNumber[NullGIndex]);\r\n\r\n            for (let j = 0; j < this.GameData.Result.length; j++) {\r\n                //如何是正确答案\r\n                if (this.GameData.Result[j] == ValueNumber[NullGIndex]) {\r\n                    let Obj = Tool_Animation.instance.Get_Min_Distance_Node(this.KeyTarget[j].worldPosition, this.ValueTargetC);\r\n                    if (Obj.Distance < this.OnDistance) {\r\n                        let Num = Number(this.ValueTargetC[Obj.Index].getChildByName(\"Label\").getComponent(Label).string);\r\n                        console.warn(\"当前答案\", Num);\r\n                        if (Num == ValueNumber[NullGIndex]) {\r\n                            continue;\r\n                        } else {\r\n                            this.TipLabel = this.KeyTarget[j].getChildByName(\"Label\");\r\n                            this.TipLabel.getComponent(Label).string = ValueNumber[NullGIndex] + \"\";\r\n                            Tool_UI.instance.Set_Color_Label(this.TipLabel, color(0, 155, 0, 255));\r\n                            //console.error(\"K索引\", j);\r\n                            //console.error(Obj);\r\n                            this.TipNode = this.ValueTarget[NullGIndex];\r\n                            let TouchNode = this.ValueTargetC[Obj.Index];\r\n                            Obj = Tool_Animation.instance.Get_Min_Distance_Node(TouchNode.worldPosition, this.KeyTarget);\r\n                            let i = this.ValueTargetC.indexOf(TouchNode);\r\n                            console.log(\"i------\", i);\r\n\r\n                            let IsExit: boolean = Tool_UI.instance.Arr_Check_Index(this.ValueTarget, TouchNode) == -1 ? false : true;\r\n                            let Key = find(\"Key\", this.node);\r\n                            let Value = find(\"Value\", this.node);\r\n                            let Temp = find(\"Temp\", this.node);\r\n                            let ColorOff: math.Color = color(255, 255, 155, 255);\r\n                            let ColorOn: math.Color = color(155, 255, 155, 255);\r\n                            Tool_Animation.instance.Tween_Stop_Target(TouchNode);\r\n                            TouchNode.scale = v3(1, 1, 1);\r\n                            TouchNode.angle = 0;\r\n                            Tool_UI.instance.Set_SpriteFrame(TouchNode.getChildByName(\"Bg\"), await this.Resoure_Data.Load_SpriteFrame(\"SpriteFrame/Panel/PanelMathMatch/BoxC\"));\r\n                            Tool_UI.instance.Set_Color_Label(TouchNode.getChildByName(\"Label\"), color(0, 155, 0, 255));\r\n                            Tool_UI.instance.Node_Index_Set(TouchNode, -1);\r\n\r\n                            // 1. 获取原节点（当前占用目标位置的节点）\r\n                            const OriginalNode = this.KeyExitValue[Obj.Index];\r\n                            // 2. 将原节点移回默认位置（或 LastKeyIndex 的位置）\r\n                            //原上次索引\r\n                            let OriginalLastKeyIndex = Tool_UI.instance.Arr_Check_Index(this.ValueTargetC, OriginalNode)\r\n                            //现上次索引\r\n                            let CurrentLastKeyIndex = Tool_UI.instance.Arr_Check_Index(this.ValueTargetC, TouchNode)\r\n                            // //console.log(OriginalLastKeyIndex, CurrentLastKeyIndex);\r\n                            // //console.log(\"原上次索引\", this.LastKeyIndex[OriginalLastKeyIndex], \"现上次索引\", this.LastKeyIndex[CurrentLastKeyIndex]);\r\n\r\n                            this.TipStart();\r\n                            // //console.log(\"是否存在\", IsExit);\r\n                            if (!IsExit) {\r\n                                Tool_UI.instance.Arr_Increase(this.ValueTarget, TouchNode);\r\n                                //题目节点的索引\r\n                                let KeyNodeIndexT: number = Key.children.indexOf(this.KeyTarget[this.LastKeyIndex[CurrentLastKeyIndex]]);\r\n                                let KeyNodeValueT: string = \"N\";\r\n                                this.GameData.Key[KeyNodeIndexT] = KeyNodeValueT;\r\n                                console.log(\"赋值的索引\", KeyNodeIndexT, \"赋值的数据\", KeyNodeValueT);\r\n                                // //console.log(this.GameData);\r\n                                if (this.LastKeyIndex[i] != null) {\r\n                                    this.KeyExitState[this.LastKeyIndex[i]] = false;\r\n                                    this.KeyExitValue[this.LastKeyIndex[i]] = null;\r\n                                    Tool_UI.instance.Set_Color_Sprite(this.KeyTarget[this.LastKeyIndex[i]].getChildByName(\"Bg\").getChildByName(\"Sp\"), ColorOff);\r\n                                }\r\n                                // 重置当前目标位置的状态（如果之前已被占用）\r\n                                if (this.KeyExitState[Obj.Index]) {\r\n                                    this.KeyExitState[Obj.Index] = false;\r\n                                    //console.error(this.KeyExitState[Obj.Index], \"1---------------------\", Obj.Index);\r\n                                    this.KeyExitValue[Obj.Index] = null;\r\n                                    Tool_UI.instance.Set_Color_Sprite(this.KeyTarget[Obj.Index].getChildByName(\"Bg\").getChildByName(\"Sp\"), ColorOff);\r\n                                }\r\n\r\n                                this.LastKeyIndex[i] = null;\r\n                                console.log(this.LastKeyIndex, i);\r\n\r\n                            }\r\n                            this.UpdateUIValue();\r\n                            return;\r\n                        }\r\n\r\n                    } else {\r\n                        this.TipLabel = this.KeyTarget[j].getChildByName(\"Label\");\r\n                        this.TipLabel.getComponent(Label).string = ValueNumber[NullGIndex] + \"\";\r\n                        Tool_UI.instance.Set_Color_Label(this.TipLabel, color(0, 155, 0, 255));\r\n                        // //console.error(\"K索引\", j);\r\n                        // //console.error(Obj);\r\n                        this.TipNode = this.ValueTarget[NullGIndex];\r\n                        this.TipStart();\r\n                        return\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n        /**设置按钮事件 */\r\n        Tool_Event.instance.On_Event_TOUCH_END(this.BtnSetting, BtnSettingCall);\r\n\r\n        Tool_Event.instance.On_Event_TOUCH_END(this.BtnTip, BtnTipCall);\r\n        Tool_Event.instance.On_Event_TOUCH_END(this.BtnTipClose, BtnTipCloseCall);\r\n        Tool_Event.instance.On_Event_TOUCH_END(this.BtnTipGet, BtnTipGetCall);\r\n\r\n\r\n        Tool_Event.instance.On_Event_TOUCH_END(this.BtnNext, BtnNextCall);\r\n\r\n        Tool_Event.instance.On_Event_TOUCH_END(this.BtnExit, BtnBreakCall);\r\n\r\n\r\n\r\n        Tool_Event.instance.On_Event_TOUCH_END(this.PanelVictory.getChildByName(\"BtnNext\"), BtnNextCall);\r\n        Tool_Event.instance.On_Event_TOUCH_END(this.PanelVictory.getChildByName(\"BtnReStart\"), BtnReStartCall);\r\n\r\n        Tool_Event.instance.On_Event_TOUCH_END(this.PanelFail.getChildByName(\"BtnNext\"), () => {\r\n            this.GameStart();\r\n        });\r\n        Tool_Event.instance.On_Event_TOUCH_END(this.PanelFail.getChildByName(\"BtnBreak\"), BtnBreakCall);\r\n\r\n        //复活\r\n        Tool_Event.instance.On_Event_TOUCH_END(this.PanelFH.getChildByName(\"Btn\"), () => {\r\n            this.Resoure_Data.Sound_Play(\"Audio/BtnClick\");\r\n            if (this.Resoure_Data.Vibration_Switch_Get()) {\r\n                PlatformApi.instance.vibrateShort();\r\n            }\r\n            PlatformApi.instance.showVideoAd(() => {\r\n                this.Resoure_Data.Music_Resume()\r\n                this.PanelFH.active = false;\r\n\r\n\r\n                this.TimerInit();\r\n\r\n\r\n\r\n            }, () => {\r\n                this.Resoure_Data.Music_Resume()\r\n            })\r\n\r\n\r\n        });\r\n        Tool_Event.instance.On_Event_TOUCH_END(this.PanelFH.getChildByName(\"BtnClose\"), () => {\r\n            this.Resoure_Data.Sound_Play(\"Audio/BtnClick\");\r\n            if (this.Resoure_Data.Vibration_Switch_Get()) {\r\n                PlatformApi.instance.vibrateShort();\r\n            }\r\n            this.PanelFH.active = false;\r\n            this.GameFailed();\r\n        });\r\n\r\n        /**设置按钮动画 */\r\n        Tool_Event.instance.Set_Btn_Event_Anim(this.BtnSetting, AnimSwitch);\r\n        Tool_Event.instance.Set_Btn_Event_Anim(this.BtnTip, AnimSwitch);\r\n        Tool_Event.instance.Set_Btn_Event_Anim(this.BtnTipClose, AnimSwitch);\r\n        Tool_Event.instance.Set_Btn_Event_Anim(this.BtnTipGet, AnimSwitch);\r\n        Tool_Event.instance.Set_Btn_Event_Anim(this.BtnNext, AnimSwitch);\r\n\r\n        Tool_Event.instance.Set_Btn_Event_Anim(this.BtnExit, AnimSwitch);\r\n        Tool_Event.instance.Set_Btn_Event_Anim(this.PanelFail.getChildByName(\"BtnNext\"), AnimSwitch);\r\n        Tool_Event.instance.Set_Btn_Event_Anim(this.PanelFail.getChildByName(\"BtnBreak\"), AnimSwitch);\r\n\r\n        Tool_Event.instance.Set_Btn_Event_Anim(this.PanelFH.getChildByName(\"Btn\"), AnimSwitch);\r\n        Tool_Event.instance.Set_Btn_Event_Anim(this.PanelFail.getChildByName(\"BtnBreak\"), AnimSwitch);\r\n\r\n\r\n        let Key = find(\"Key\", this.node);\r\n        let Value = find(\"Value\", this.node);\r\n        for (let i = 0; i < Value.children.length; i++) {\r\n            this.ValuePos.push(Value.children[i].position.clone());\r\n        }\r\n    }\r\n\r\n\r\n    TimerInit() {\r\n        this.GameTime = this.GameTimeAll;\r\n        this.TimerIng();\r\n    }\r\n\r\n\r\n    TimerIng() {\r\n        let ComponentLabel = find(\"Title/Bgg/Timer\", this.node).getComponent(Label);\r\n        ComponentLabel.string = Tool_Other.instance.Seconds_To_Time_String(this.GameTime).substring(1);\r\n        Tool_Animation.instance.Async_Function_Id(1, 0, () => {\r\n            this.GameTimeIng++;\r\n            this.GameTime--;\r\n            ComponentLabel.string = Tool_Other.instance.Seconds_To_Time_String(this.GameTime).substring(1);\r\n\r\n            if (this.GameTime <= this.JGTime && !find(\"JG\", this.node).active) {\r\n                find(\"JG\", this.node).active = true;\r\n                find(\"JG\", this.node).getComponent(Animation).play();\r\n            }\r\n\r\n            if (this.GameTime <= 0) {\r\n                this.PanelFH.active = true;\r\n                this.Resoure_Data.Sound_Play(\"Audio/FH\");\r\n                find(\"JG\", this.node).active = false;\r\n            } else {\r\n                this.TimerIng();\r\n            }\r\n\r\n        });\r\n    }\r\n\r\n\r\n    TimerPause() {\r\n        Tool_Animation.instance.Tween_Stop_Tag(0);\r\n    }\r\n    TimerResume() {\r\n        this.TimerIng();\r\n    }\r\n    TimerStop() {\r\n        Tool_Animation.instance.Tween_Stop_Tag(0);\r\n    }\r\n\r\n\r\n    /**初始化数据 */\r\n    async InitData() {\r\n\r\n        this.Game_Script.UpdateScore();\r\n\r\n        //console.log(\"初始化数据\");\r\n        /**注册按钮事件 */\r\n        // await this.OnBtn(this.Game_Script.AnimSwitch);\r\n        this.KeyTarget = [];\r\n        this.KeyExitState = [];\r\n        this.KeyExitValue = [];\r\n\r\n        this.ValueTarget = [];\r\n        this.ValueTargetC = [];\r\n        this.LastKeyIndex = [];\r\n\r\n        this.AnimCorrectNode = [];\r\n        this.AnimWrongNode = [];\r\n\r\n        this.Interactable = true;\r\n\r\n        this.TouchNode = null;\r\n        this.TipLabel = null;\r\n        this.TipNode = null;\r\n        this.GameTimeIng = 0;\r\n\r\n        // this.Game_Script.MathMatchLevel = 7;\r\n\r\n        let F = {\r\n            \"Level\": 6,\r\n            \"Key\": [\r\n                \"U\", \"U\", \"U\", \"U\", \"U\", \"U\", \"U\", \"U\", \"U\", \"U\", \"U\",\r\n                \"U\", \"U\", \"U\", \"U\", \"U\", \"U\", \"U\", \"U\", \"U\", \"U\", \"U\",\r\n                \"U\", \"U\", \"U\", \"U\", \"U\", \"U\", \"U\", \"U\", \"U\", \"U\", \"U\",\r\n                \"U\", \"U\", \"U\", \"U\", \"U\", \"U\", \"U\", \"U\", \"U\", \"U\", \"U\",\r\n                \"U\", \"U\", \"U\", \"U\", \"U\", \"U\", \"U\", \"U\", \"U\", \"U\", \"U\",\r\n                \"U\", \"U\", \"U\", \"U\", \"U\", \"U\", \"U\", \"U\", \"U\", \"U\", \"U\",\r\n                \"U\", \"U\", \"U\", \"U\", \"U\", \"U\", \"U\", \"U\", \"U\", \"U\", \"U\",\r\n                \"U\", \"U\", \"U\", \"U\", \"U\", \"U\", \"U\", \"U\", \"U\", \"U\", \"U\",\r\n                \"U\", \"U\", \"U\", \"U\", \"U\", \"U\", \"U\", \"U\", \"U\", \"U\", \"U\",\r\n                \"U\", \"U\", \"U\", \"U\", \"U\", \"U\", \"U\", \"U\", \"U\", \"U\", \"U\",\r\n                \"U\", \"U\", \"U\", \"U\", \"U\", \"U\", \"U\", \"U\", \"U\", \"U\", \"U\"\r\n            ],\r\n            \"Value\": [],\r\n            \"Result\": [],\r\n            \"Count\": 0\r\n        }\r\n\r\n\r\n        const Json = await this.Resoure_Data.Load_Json(\"Json/mathmatch\");\r\n        const JsonData = Json[\"Data\"];\r\n        console.log(`版本号:${Json[\"Version\"]}`);\r\n        console.log(`当前关卡:${this.Game_Script.MathMatchLevel + 1}`);\r\n\r\n        this.GameData = null;\r\n\r\n        if (this.Game_Script.MathMatchLevel < 0) {\r\n            this.Game_Script.MathMatchLevel = 0;\r\n            //console.log(\"关卡为负\");\r\n            this.Game_Script.DataSet();\r\n        }\r\n\r\n        if (this.Game_Script.MathMatchLevel >= JsonData.length) {\r\n            this.Game_Script.OnMessage(\"恭喜全部通关，后续敬请期待\");\r\n            this.Game_Script.MathMatchLevel = JsonData.length;\r\n            // let Ran = Tool_Other.instance.Get_Random_Int(20, 35);\r\n            // if (Ran < JsonData.length - 1) {\r\n            //     this.GameData = this.Resoure_Data.Copy_Deep(JsonData[Ran]);\r\n            // } else {\r\n            this.GameData = this.Resoure_Data.Copy_Deep(JsonData[JsonData.length - 1]);\r\n            // }\r\n        } else {\r\n            this.GameData = this.Resoure_Data.Copy_Deep(JsonData[this.Game_Script.MathMatchLevel]);\r\n        }\r\n\r\n\r\n        console.log(`当前关卡题目配置`);\r\n        let a: string[][] = [];\r\n\r\n        for (let i = 0; i < 11; i++) {\r\n            a[i] = [];\r\n\r\n            for (let j = 0; j < 11; j++) {\r\n                a[i].push(this.GameData.Key[i * 11 + j])\r\n            }\r\n        }\r\n\r\n\r\n        console.log(a);\r\n\r\n        console.log(`当前关卡答题配置`);\r\n        console.log(this.GameData.Value);\r\n\r\n        console.log(`当前关卡答案配置`);\r\n        console.log(this.GameData.Result);\r\n\r\n\r\n        //console.log(this.GameData);\r\n\r\n        this.Game_Script.IsHint = false;\r\n        this.Game_Script.IsContinue = false;\r\n\r\n\r\n\r\n        this.TimerInit();\r\n\r\n\r\n\r\n    }\r\n\r\n    /**初始化界面 */\r\n    async InitInterface() {\r\n        this.PanelVictory.active = false;\r\n        this.PanelFail.active = false;\r\n        this.PanelTip.active = false;\r\n        this.PanelFH.active = false;\r\n\r\n        let Hand = find(\"Hand\", this.node);\r\n        Hand.active = false;\r\n        find(\"ND\", this.node).active = false;\r\n        find(\"JG\", this.node).active = false;\r\n\r\n\r\n        if (this.Game_Script.MathMatchLevel == 1) {\r\n            find(\"ND\", this.node).active = true;\r\n\r\n            Tool_Animation.instance.Anim_Frame_Play(find(\"ND\", this.node).getComponent(Animation), null, null, () => {\r\n                find(\"ND\", this.node).active = false;\r\n            })\r\n        }\r\n\r\n        this.UpdateProp();\r\n        if (this.Game_Script.MathMatchLevel >= 200) {\r\n            this.node.getChildByName(\"Title\").getChildByName(\"Leves\").getComponent(Label).string = `第${this.Game_Script.MathMatchLevel}关`;\r\n        } else {\r\n            this.node.getChildByName(\"Title\").getChildByName(\"Leves\").getComponent(Label).string = `第${this.Game_Script.MathMatchLevel + 1}关`;\r\n        }\r\n        find(\"Temp\", this.node).destroyAllChildren();\r\n        let Key = find(\"Key\", this.node);\r\n        let Value = find(\"Value\", this.node);\r\n\r\n        for (let i = 0; i < Key.children.length; i++) {\r\n            Key.children[i].active = false;\r\n            Tool_UI.instance.Set_Color_Sprite(Key.children[i].getChildByName(\"Bg\").getChildByName(\"Sp\"), color(255, 255, 155, 255));\r\n        }\r\n\r\n        for (let i = 0; i < Value.children.length; i++) {\r\n            Value.children[i].active = false;\r\n            Value.children[i].scale = v3(1, 1, 1);\r\n            Value.children[i].angle = 0;\r\n\r\n            Tool_UI.instance.Set_SpriteFrame(Value.children[i].getChildByName(\"Bg\"), await this.Resoure_Data.Load_SpriteFrame(\"SpriteFrame/Panel/PanelMathMatch/BoxC\"));\r\n            Tool_UI.instance.Set_Color_Label(Value.children[i].getChildByName(\"Label\"), color(0, 155, 0, 255));\r\n\r\n        }\r\n\r\n        if (this.GameData == null) {\r\n            //console.log(\"配置错误\");\r\n            return;\r\n        }\r\n\r\n        for (let i = 0; i < Key.children.length; i++) {\r\n            Key.children[i].active = true;\r\n            switch (this.GameData.Key[i]) {\r\n                case \"U\":\r\n                    Key.children[i].active = false;\r\n                    break;\r\n                case \"N\":\r\n                    Key.children[i].getChildByName(\"Label\").getComponent(Label).string = \"\";\r\n                    this.KeyTarget.push(Key.children[i]);\r\n                    this.KeyExitState.push(false);\r\n                    this.KeyExitValue.push(null);\r\n                    Tool_UI.instance.Set_SpriteFrame(Key.children[i].getChildByName(\"Bg\"), await this.Resoure_Data.Load_SpriteFrame(\"SpriteFrame/Panel/PanelMathMatch/BoxN\"));\r\n                    break;\r\n                default:\r\n                    let Str: string = \"\";\r\n                    switch (this.GameData.Key[i]) {\r\n                        // case \"/\":\r\n                        //     Str = \"÷\";\r\n                        // break;\r\n                        case \"X\":\r\n                            Str = \"x\";\r\n                            break;\r\n                        default:\r\n                            Str = this.GameData.Key[i];\r\n                            break;\r\n                    }\r\n                    Key.children[i].getChildByName(\"Label\").getComponent(Label).string = Str\r\n\r\n                    Tool_UI.instance.Set_SpriteFrame(Key.children[i].getChildByName(\"Bg\"), await this.Resoure_Data.Load_SpriteFrame(\"SpriteFrame/Panel/PanelMathMatch/BoxU\"));\r\n                    break;\r\n            }\r\n        }\r\n\r\n\r\n\r\n        let Temp = find(\"Temp\", this.node);\r\n        let ColorOff: math.Color = color(255, 255, 155, 255);\r\n        let ColorOn: math.Color = color(155, 255, 155, 255);\r\n\r\n\r\n        for (let i = 0; i < Value.children.length; i++) {\r\n            const Shadow = Value.children[i].getChildByName(\"Shadow\");\r\n            const ComponentLabel1 = Value.children[i].getChildByName(\"Label\").getComponent(Label);\r\n            Shadow.active = false;\r\n            // Value.children[i].active = i < this.GameData.Value.length ? true : false;\r\n            if (i < this.GameData.Value.length ? true : false) {\r\n                this.ValueTarget.push(Value.children[i]);\r\n                this.ValueTargetC.push(Value.children[i]);\r\n                this.LastKeyIndex.push(null);\r\n                Value.children[i].position = this.ValuePos[i];\r\n                ComponentLabel1.string = this.GameData.Value[i] + \"\";\r\n\r\n                Tool_Event.instance.Off_Event_TOUCH_All(Value.children[i]);\r\n\r\n                const TouchNode = Value.children[i];\r\n                const Shadow = TouchNode.getChildByName(\"Shadow\");\r\n                const ComponentLabel = TouchNode.getChildByName(\"Label\").getComponent(Label);\r\n                const Check_Shadow = () => {\r\n                    let Obj = Tool_Animation.instance.Get_Min_Distance_Node(TouchNode.worldPosition, this.KeyTarget);\r\n                    if (Obj.Distance <= this.OnDistance) {\r\n                        if (this.KeyShadowIndex == Obj.Index) {\r\n                            return;\r\n                        }\r\n                        Temp.destroyAllChildren();\r\n                        this.KeyShadowIndex = Obj.Index;\r\n                        Tool_UI.instance.Set_Prefab_Node(this.KeyShadow, Temp, this.KeyTarget[Obj.Index], \"\")\r\n                    } else {\r\n                        Temp.destroyAllChildren();\r\n                        this.KeyShadowIndex = -1;\r\n                    }\r\n                }\r\n\r\n                Tool_Event.instance.On_Event_TOUCH_START(TouchNode, () => {\r\n                    //console.log(this.Game_Script.MathMatchLevel, this.Step, TouchNode.getChildByName(\"Label\").getComponent(Label).string);\r\n\r\n                    if (this.Game_Script.MathMatchLevel == 0) {\r\n                        if (this.Step == 0) {\r\n                            if (TouchNode.getChildByName(\"Label\").getComponent(Label).string != \"1\") {\r\n                                this.Interactable = false;\r\n                                return;\r\n                            } else {\r\n                                this.Interactable = true;\r\n                            }\r\n                        }\r\n                        if (this.Step == 1) {\r\n                            if (TouchNode.getChildByName(\"Label\").getComponent(Label).string != this.KeyExitValue[2].getChildByName(\"Label\").getComponent(Label).string) {\r\n                                this.Interactable = false;\r\n                                return;\r\n                            } else {\r\n                                this.Interactable = true;\r\n                            }\r\n                        }\r\n                    }\r\n                })\r\n\r\n                Tool_Event.instance.On_Event_TOUCH_Drag(TouchNode, () => this.Interactable, async (Event, Pos_Touch_Start) => {\r\n                    /**触摸开始回调 */\r\n\r\n                    if (this.GameData == null) {\r\n                        this.Interactable = false;\r\n                        //console.log(\"配置错误\");\r\n                        return;\r\n                    }\r\n                    this.TouchNode = TouchNode;\r\n                    //console.log(this.LastKeyIndex, i, this.ValueTargetC.indexOf(TouchNode));\r\n                    this.Resoure_Data.Sound_Play(\"Audio/NumClick\");\r\n                    if (this.Resoure_Data.Vibration_Switch_Get()) {\r\n                        PlatformApi.instance.vibrateShort();\r\n                    }\r\n                    let Obj = Tool_Animation.instance.Get_Min_Distance_Node(TouchNode.worldPosition, this.KeyTarget);\r\n                    Tool_Animation.instance.Tween_Stop_Target(this.KeyTarget[Obj.Index]);\r\n                    this.KeyTarget[Obj.Index].scale = v3(1, 1, 1);\r\n                    this.KeyTarget[Obj.Index].angle = 0;\r\n                    Tool_Animation.instance.Tween_Stop_Target(TouchNode);\r\n                    TouchNode.scale = v3(1, 1, 1);\r\n                    TouchNode.angle = 0;\r\n                    Tool_UI.instance.Set_SpriteFrame(TouchNode.getChildByName(\"Bg\"), await this.Resoure_Data.Load_SpriteFrame(\"SpriteFrame/Panel/PanelMathMatch/BoxC\"));\r\n                    Tool_UI.instance.Set_Color_Label(TouchNode.getChildByName(\"Label\"), color(0, 155, 0, 255));\r\n\r\n                    Tool_UI.instance.Node_Index_Set(TouchNode, -1);\r\n                    Shadow.active = true;\r\n                    Tool_Animation.instance.Animation_Node_Move_Time(TouchNode, Pos_Touch_Start.clone().add(v3(0, 25, 0)), 0.02, null, \"smooth\");\r\n                    let IsExit: boolean = Tool_UI.instance.Arr_Check_Index(this.ValueTarget, TouchNode) == -1 ? false : true;\r\n                    if (!IsExit) {\r\n                        tween(TouchNode)\r\n                            .to(0.25, { scale: v3(1, 1, 1) }, { easing: \"backOut\" })\r\n                            .start();\r\n                    }\r\n                    Check_Shadow();\r\n\r\n                    //console.error(this.TouchNode == this.TipNode);\r\n\r\n                    if (this.TouchNode == this.TipNode) {\r\n                        for (let i = 0; i < this.TipAnim.length; i++) {\r\n                            this.TipAnim[i].destroy();\r\n                        }\r\n                        this.TipAnim = [];\r\n                    }\r\n\r\n                }, (Event, Pos_Touch_Start) => {\r\n                    /**触摸移动回调 */\r\n                    Check_Shadow();\r\n                }, async (Event, Pos_Touch_Start, Pos_Touch_End) => {\r\n                    /**触摸结束回调 */\r\n\r\n                    Shadow.active = false;\r\n                    let IsExit: boolean = Tool_UI.instance.Arr_Check_Index(this.ValueTarget, TouchNode) == -1 ? false : true;\r\n                    let Obj = Tool_Animation.instance.Get_Min_Distance_Node(TouchNode.worldPosition, this.KeyTarget);\r\n\r\n                    // 1. 获取原节点（当前占用目标位置的节点）\r\n                    const OriginalNode = this.KeyExitValue[Obj.Index];\r\n                    // 2. 将原节点移回默认位置（或 LastKeyIndex 的位置）\r\n                    //原上次索引\r\n                    let OriginalLastKeyIndex = Tool_UI.instance.Arr_Check_Index(this.ValueTargetC, OriginalNode)\r\n                    //现上次索引\r\n                    let CurrentLastKeyIndex = Tool_UI.instance.Arr_Check_Index(this.ValueTargetC, TouchNode)\r\n                    //console.log(OriginalLastKeyIndex, CurrentLastKeyIndex);\r\n                    //console.log(\"原上次索引\", this.LastKeyIndex[OriginalLastKeyIndex], \"现上次索引\", this.LastKeyIndex[CurrentLastKeyIndex]);\r\n                    if (this.Game_Script.MathMatchLevel == 0) {\r\n                        this.Step++;\r\n                        if (this.Step == 1) {\r\n                            Tool_Animation.instance.Tween_Stop_Target(Hand);\r\n                            let MoveNode = this.KeyExitValue[2];\r\n                            this.Game_Script.OnMessage(\"可以把数字拖动放在另一个格子\");\r\n                            let PosStart = Tool_UI.instance.Get_Target_Node_Local_Pos(Hand, MoveNode).add(v3(30, -50));\r\n                            let PosEnd = Tool_UI.instance.Get_Target_Node_Local_Pos(Hand, this.KeyTarget[3]).add(v3(30, -50));\r\n                            const AnimA = () => {\r\n                                Hand.position = PosStart;\r\n                                Tool_Animation.instance.Animation_Node_Move_Time(Hand, PosEnd, 1, () => {\r\n                                    if (this.Step == 1) {\r\n                                        Tool_Animation.instance.Animation_Node_Move_Time(Hand, PosStart, 0.5, () => {\r\n                                            if (this.Step == 1) {\r\n                                                AnimA();\r\n                                            }\r\n                                        });\r\n                                    }\r\n                                });\r\n                            }\r\n                            AnimA();\r\n                        } else {\r\n                            Hand.active = false;\r\n                        }\r\n                    }\r\n                    if (Obj.Distance <= this.OnDistance) {\r\n\r\n                        this.TipReset();\r\n                        //目标位置被占用\r\n                        //console.error(this.KeyExitState[Obj.Index], this.LastKeyIndex[i], Obj.Index);\r\n                        if (this.KeyExitState[Obj.Index] && this.LastKeyIndex[i] != Obj.Index) {//\r\n                            if (this.LastKeyIndex[i] != null) {\r\n                                this.KeyTarget[Obj.Index].active = false;\r\n                                this.KeyTarget[this.LastKeyIndex[i]].active = false;\r\n                                // 将原节点移动到 LastKeyIndex 的位置\r\n                                const OriginalNodePos = Tool_UI.instance.Get_Target_Node_Local_Pos(OriginalNode, this.KeyTarget[this.LastKeyIndex[i]]);\r\n                                // this.Interactable = false;\r\n                                Tool_Animation.instance.Animation_Node_Move_Time(OriginalNode, OriginalNodePos, 0.25, async () => {\r\n                                    // this.Interactable = true;\r\n                                    this.KeyTarget[Obj.Index].active = true;\r\n                                    this.KeyTarget[this.LastKeyIndex[i]].active = true;\r\n                                    //交换索引\r\n                                    //console.log(this.LastKeyIndex, 1);\r\n                                    //console.error(OriginalLastKeyIndex, this.LastKeyIndex[OriginalLastKeyIndex]);\r\n                                    //console.error(CurrentLastKeyIndex, this.LastKeyIndex[CurrentLastKeyIndex]);\r\n                                    const LastKeyIndexTemp = this.LastKeyIndex[OriginalLastKeyIndex];\r\n                                    this.LastKeyIndex[OriginalLastKeyIndex] = this.LastKeyIndex[CurrentLastKeyIndex];\r\n                                    this.LastKeyIndex[CurrentLastKeyIndex] = LastKeyIndexTemp;\r\n                                    //交换节点的索引\r\n                                    let KeyNodeIndexL = Key.children.indexOf(this.KeyTarget[this.LastKeyIndex[OriginalLastKeyIndex]]);\r\n                                    let KeyNodeValueL = OriginalNode.getChildByName(\"Label\").getComponent(Label).string;\r\n                                    //题目节点的索引\r\n                                    let KeyNodeIndexT = Key.children.indexOf(this.KeyTarget[Obj.Index]);\r\n                                    let KeyNodeValueT = TouchNode.getChildByName(\"Label\").getComponent(Label).string;\r\n                                    this.GameData.Key[KeyNodeIndexL] = KeyNodeValueL;\r\n                                    this.GameData.Key[KeyNodeIndexT] = KeyNodeValueT;\r\n                                    // console.log(\"交换节点的索引\", KeyNodeIndexL, \"交换节点的数值\", KeyNodeValueL);\r\n                                    // console.log(\"触摸节点的索引\", KeyNodeIndexT, \"触摸节点的数值\", KeyNodeValueT);\r\n                                    // console.log(this.GameData);\r\n                                    this.FindAllEquationIndices_(this.GameData.Key);\r\n                                    Tool_Animation.instance.Tween_Stop_Target(OriginalNode);\r\n                                    OriginalNode.scale = v3(0.9, 0.9, 1);\r\n                                    OriginalNode.angle = 0;\r\n                                    Tool_UI.instance.Set_SpriteFrame(OriginalNode.getChildByName(\"Bg\"), await this.Resoure_Data.Load_SpriteFrame(\"SpriteFrame/Panel/PanelMathMatch/BoxC\"));\r\n                                    Tool_UI.instance.Set_Color_Label(OriginalNode.getChildByName(\"Label\"), color(0, 155, 0, 255));\r\n                                    // //console.error(OriginalNode, TouchNode);\r\n                                    await Tool_Animation.instance.Async_Wait(0.05);\r\n                                    this.TouchNode = OriginalNode;\r\n                                    this.FindAllEquationIndices_(this.GameData.Key);\r\n\r\n                                }, \"smooth\");\r\n                                // 更新原节点的状态为占用 LastKeyIndex\r\n                                this.KeyExitState[this.LastKeyIndex[i]] = true;\r\n                                this.KeyExitValue[this.LastKeyIndex[i]] = OriginalNode;\r\n                            } else {\r\n                                // 如果 LastKeyIndex 为 null，将原节点放回 ValueTarget 池\r\n                                Tool_UI.instance.Arr_Increase(this.ValueTarget, OriginalNode);\r\n\r\n                                Tool_UI.instance.Set_SpriteFrame(OriginalNode.getChildByName(\"Bg\"), await this.Resoure_Data.Load_SpriteFrame(\"SpriteFrame/Panel/PanelMathMatch/BoxC\"));\r\n                                Tool_UI.instance.Set_Color_Label(OriginalNode.getChildByName(\"Label\"), color(0, 155, 0, 255));\r\n\r\n                                //交换索引\r\n                                //console.log(this.LastKeyIndex, 2);\r\n                                //console.error(OriginalLastKeyIndex, this.LastKeyIndex[OriginalLastKeyIndex]);\r\n                                //console.error(CurrentLastKeyIndex, this.LastKeyIndex[CurrentLastKeyIndex]);\r\n\r\n\r\n                                const LastKeyIndexTemp = this.LastKeyIndex[OriginalLastKeyIndex];\r\n                                this.LastKeyIndex[OriginalLastKeyIndex] = this.LastKeyIndex[CurrentLastKeyIndex];\r\n                                this.LastKeyIndex[CurrentLastKeyIndex] = LastKeyIndexTemp;\r\n\r\n                                //题目节点的索引\r\n                                let KeyNodeIndexT: number = Key.children.indexOf(this.KeyTarget[Obj.Index]);\r\n                                let KeyNodeValueT: string = TouchNode.getChildByName(\"Label\").getComponent(Label).string;\r\n                                this.GameData.Key[KeyNodeIndexT] = KeyNodeValueT;\r\n                                console.log(\"赋值的索引\", KeyNodeIndexT, \"赋值的数据\", KeyNodeValueT);\r\n                                //console.log(this.GameData);\r\n\r\n\r\n                                this.FindAllEquationIndices_(this.GameData.Key, 0.2);\r\n                            }\r\n                            // 3. 将新节点(TouchNode)放置到目标位置（Obj.Index）\r\n                            this.KeyExitState[Obj.Index] = true;\r\n                            this.KeyExitValue[Obj.Index] = TouchNode;\r\n                            // 4. 更新颜色和临时状态\r\n                            Tool_UI.instance.Set_Color_Sprite(this.KeyTarget[Obj.Index].getChildByName(\"Bg\").getChildByName(\"Sp\"), ColorOn);\r\n                            if (this.LastKeyIndex[i] != null) {\r\n                                Tool_UI.instance.Set_Color_Sprite(this.KeyTarget[this.LastKeyIndex[i]].getChildByName(\"Bg\").getChildByName(\"Sp\"), ColorOn);\r\n                            }\r\n                            //放置成功 移除节点\r\n                            Tool_UI.instance.Arr_Delete(this.ValueTarget, TouchNode);\r\n                            Temp.destroyAllChildren();\r\n                            this.KeyShadowIndex = -1;\r\n                            for (let i = 0; i < this.TipAnim.length; i++) {\r\n                                this.TipAnim[i].destroy();\r\n                            }\r\n                            // 6. 更新 UI\r\n                            this.UpdateUIValue();\r\n                            let Pos = Tool_UI.instance.Get_Target_Node_Local_Pos(TouchNode, this.KeyTarget[Obj.Index]);\r\n                            await Tool_Animation.instance.Animation_Node_Move_Time(TouchNode, Pos, 0.2, null, \"smooth\");\r\n                            tween(TouchNode)\r\n                                .to(0.25, { scale: v3(0.9, 0.9, 1) }, { easing: \"backOut\" })\r\n                                .start();\r\n                            return;\r\n                        }\r\n\r\n                        if (IsExit) {\r\n                            //放置成功 移除节点\r\n                            Tool_UI.instance.Arr_Delete(this.ValueTarget, TouchNode);\r\n                            //题目节点的索引\r\n                            let KeyNodeIndexT: number = Key.children.indexOf(this.KeyTarget[Obj.Index]);\r\n                            let KeyNodeValueT: string = TouchNode.getChildByName(\"Label\").getComponent(Label).string;\r\n                            this.GameData.Key[KeyNodeIndexT] = KeyNodeValueT;\r\n                            console.log(\"赋值的索引\", KeyNodeIndexT, \"赋值的数据\", KeyNodeValueT);\r\n                            //console.log(this.GameData);\r\n                            this.UpdateUIValue();\r\n\r\n                        } else {\r\n                            let KeyNodeIndexL: number = Key.children.indexOf(this.KeyTarget[this.LastKeyIndex[CurrentLastKeyIndex]]);\r\n                            if (KeyNodeIndexL == -1) {\r\n                                //console.log(CurrentLastKeyIndex);//有值\r\n                                //console.log(this.LastKeyIndex[CurrentLastKeyIndex]);\r\n                                //console.log(this.KeyTarget[this.LastKeyIndex[CurrentLastKeyIndex]]);\r\n                            }\r\n\r\n                            let KeyNodeValueL: string = \"N\";\r\n                            this.GameData.Key[KeyNodeIndexL] = KeyNodeValueL;\r\n\r\n                            //题目节点的索引\r\n                            let KeyNodeIndexT: number = Key.children.indexOf(this.KeyTarget[Obj.Index]);\r\n                            let KeyNodeValueT: string = TouchNode.getChildByName(\"Label\").getComponent(Label).string;\r\n                            this.GameData.Key[KeyNodeIndexT] = KeyNodeValueT;\r\n\r\n                            console.log(\"赋值的索引\", KeyNodeIndexL, \"赋值的数据\", KeyNodeValueL);\r\n                            console.log(\"赋值的索引\", KeyNodeIndexT, \"赋值的数据\", KeyNodeValueT);\r\n                            //console.log(this.GameData);\r\n                        }\r\n                        this.KeyExitState[Obj.Index] = true;\r\n                        this.KeyExitValue[Obj.Index] = TouchNode;\r\n                        //console.error(this.LastKeyIndex[i], this.LastKeyIndex[i], this.KeyExitState[this.LastKeyIndex[i]]);\r\n\r\n                        if (this.LastKeyIndex[i] != null && this.LastKeyIndex[i] != Obj.Index) {\r\n                            console.error(this.KeyExitState[this.LastKeyIndex[i]], \"2---------------------\", Obj.Index);\r\n                            this.KeyExitState[this.LastKeyIndex[i]] = false;\r\n                            this.KeyExitValue[this.LastKeyIndex[i]] = null;\r\n\r\n                        }\r\n                        //改变Key背景颜色\r\n                        this.LastKeyIndex[i] != null && Tool_UI.instance.Set_Color_Sprite(this.KeyTarget[this.LastKeyIndex[i]].getChildByName(\"Bg\").getChildByName(\"Sp\"), ColorOff);\r\n                        this.LastKeyIndex[i] = Obj.Index;\r\n\r\n                        // this.LastKeyIndex[this.ValueTargetC.indexOf(TouchNode)] != null && Tool_UI.instance.Set_Color_Sprite(this.KeyTarget[this.LastKeyIndex[i]].getChildByName(\"Bg\").getChildByName(\"Sp\"), ColorOff);\r\n                        // this.LastKeyIndex[this.ValueTargetC.indexOf(TouchNode)] = Obj.Index;\r\n\r\n                        //console.error(Obj.Index, this.LastKeyIndex[i], i, Value.children.indexOf(TouchNode));\r\n\r\n                        Tool_UI.instance.Set_Color_Sprite(this.KeyTarget[Obj.Index].getChildByName(\"Bg\").getChildByName(\"Sp\"), ColorOn);\r\n                        Temp.destroyAllChildren();\r\n                        for (let i = 0; i < this.TipAnim.length; i++) {\r\n                            this.TipAnim[i].destroy();\r\n                        }\r\n                        this.KeyShadowIndex = -1;\r\n                        let Pos = Tool_UI.instance.Get_Target_Node_Local_Pos(TouchNode, this.KeyTarget[Obj.Index]);\r\n                        this.UpdateUIValue();\r\n                        await Tool_Animation.instance.Animation_Node_Move_Time(TouchNode, Pos, 0, null, \"smooth\");\r\n                        tween(TouchNode)\r\n                            .to(0.25, { scale: v3(0.9, 0.9, 1) }, { easing: \"backOut\" })\r\n                            .start();\r\n                    } else {\r\n                        if (!IsExit) {\r\n                            Tool_UI.instance.Arr_Increase(this.ValueTarget, TouchNode);\r\n\r\n                            //题目节点的索引\r\n                            let KeyNodeIndexT: number = Key.children.indexOf(this.KeyTarget[this.LastKeyIndex[CurrentLastKeyIndex]]);\r\n                            let KeyNodeValueT: string = \"N\";\r\n                            this.GameData.Key[KeyNodeIndexT] = KeyNodeValueT;\r\n                            console.log(\"赋值的索引\", KeyNodeIndexT, \"赋值的数据\", KeyNodeValueT);\r\n                            //console.log(this.GameData);\r\n\r\n                            if (this.LastKeyIndex[i] != null && this.LastKeyIndex[i] != Obj.Index) {\r\n                                this.KeyExitState[this.LastKeyIndex[i]] = false;\r\n                                this.KeyExitValue[this.LastKeyIndex[i]] = null;\r\n                                Tool_UI.instance.Set_Color_Sprite(this.KeyTarget[this.LastKeyIndex[i]].getChildByName(\"Bg\").getChildByName(\"Sp\"), ColorOff);\r\n                            }\r\n                            // 重置当前目标位置的状态（如果之前已被占用）\r\n                            if (this.KeyExitState[Obj.Index]) {\r\n                                this.KeyExitState[Obj.Index] = false;\r\n                                //console.error(this.KeyExitState[Obj.Index], \"3---------------------\", Obj.Index);\r\n                                this.KeyExitValue[Obj.Index] = null;\r\n                                Tool_UI.instance.Set_Color_Sprite(this.KeyTarget[Obj.Index].getChildByName(\"Bg\").getChildByName(\"Sp\"), ColorOff);\r\n                            }\r\n\r\n\r\n                            this.LastKeyIndex[i] = null;\r\n                        }\r\n                        // await Tool_Animation.instance.Async_Wait(0.05);\r\n                        this.UpdateUIValue();\r\n                        await Tool_Animation.instance.Async_Wait(0.25);\r\n                        this.TipStart();\r\n\r\n                    }\r\n                    //console.log(\"this.KeyExitState\", this.KeyExitState);\r\n                    //console.log(\"this.KeyExitValue\", this.KeyExitValue);\r\n                    //console.log(\"this.ValueTarget\", this.ValueTarget);\r\n\r\n                    this.FindAllEquationIndices_(this.GameData.Key);\r\n\r\n\r\n                });\r\n            }\r\n        }\r\n\r\n\r\n        // this.UpdateUIValue(0);\r\n\r\n\r\n        // await Tool_Animation.instance.Async_Wait(0.1);\r\n\r\n\r\n\r\n        for (let i = 0; i < this.ValueTarget.length; i++) {\r\n            this.ValueTarget[i].active = false;\r\n        }\r\n        for (let i = 0; i < this.ValueTarget.length; i++) {\r\n            this.ValueTarget[i].active = true;\r\n            this.ValueTarget[i].position = this.ValueTarget[i].position.clone().add(v3(1000, 0, 0));\r\n        }\r\n\r\n        let Time = 0;\r\n        let Wait = 0;\r\n\r\n        let Len = this.GameData.Value.length;\r\n\r\n        Time = 1.2 / Len;\r\n        Wait = Time / 2\r\n\r\n        if (this.Game_Script.MathMatchLevel == 0) {\r\n            this.Game_Script.BlockInputEvents.active = true;\r\n            this.Step = 0;\r\n            let N = this.ValueTarget[2];\r\n            N.active = true;\r\n            N.scale = v3(0.9, 0.9, 1)\r\n            Tool_UI.instance.Set_Pos_Word_Same(N, this.KeyTarget[2]);\r\n            let TouchNode = this.ValueTarget[2]\r\n            let i = this.ValueTargetC.indexOf(TouchNode);\r\n\r\n            // Shadow.active = false;\r\n            let IsExit: boolean = Tool_UI.instance.Arr_Check_Index(this.ValueTarget, TouchNode) == -1 ? false : true;\r\n            let Obj = Tool_Animation.instance.Get_Min_Distance_Node(TouchNode.worldPosition, this.KeyTarget);\r\n\r\n            // 1. 获取原节点（当前占用目标位置的节点）\r\n            const OriginalNode = this.KeyExitValue[Obj.Index];\r\n            // 2. 将原节点移回默认位置（或 LastKeyIndex 的位置）\r\n            //原上次索引\r\n            let OriginalLastKeyIndex = Tool_UI.instance.Arr_Check_Index(this.ValueTargetC, OriginalNode)\r\n            //现上次索引\r\n            let CurrentLastKeyIndex = Tool_UI.instance.Arr_Check_Index(this.ValueTargetC, TouchNode)\r\n\r\n            if (Obj.Distance <= this.OnDistance) {\r\n                this.TipReset();\r\n                //目标位置被占用\r\n\r\n                if (IsExit) {\r\n                    //放置成功 移除节点\r\n                    Tool_UI.instance.Arr_Delete(this.ValueTarget, TouchNode);\r\n                    //题目节点的索引\r\n                    let KeyNodeIndexT: number = Key.children.indexOf(this.KeyTarget[Obj.Index]);\r\n                    let KeyNodeValueT: string = TouchNode.getChildByName(\"Label\").getComponent(Label).string;\r\n                    this.GameData.Key[KeyNodeIndexT] = KeyNodeValueT;\r\n                } else {\r\n                    let KeyNodeIndexL: number = Key.children.indexOf(this.KeyTarget[this.LastKeyIndex[CurrentLastKeyIndex]]);\r\n                    if (KeyNodeIndexL == -1) {\r\n\r\n                    }\r\n\r\n                    let KeyNodeValueL: string = \"N\";\r\n                    this.GameData.Key[KeyNodeIndexL] = KeyNodeValueL;\r\n\r\n                    //题目节点的索引\r\n                    let KeyNodeIndexT: number = Key.children.indexOf(this.KeyTarget[Obj.Index]);\r\n                    let KeyNodeValueT: string = TouchNode.getChildByName(\"Label\").getComponent(Label).string;\r\n                    this.GameData.Key[KeyNodeIndexT] = KeyNodeValueT;\r\n\r\n                }\r\n                this.KeyExitState[Obj.Index] = true;\r\n                this.KeyExitValue[Obj.Index] = TouchNode;\r\n                if (this.LastKeyIndex[i] != null && this.LastKeyIndex[i] != Obj.Index) {\r\n                    this.KeyExitState[this.LastKeyIndex[i]] = false;\r\n                    this.KeyExitValue[this.LastKeyIndex[i]] = null;\r\n                }\r\n                //改变Key背景颜色\r\n                this.LastKeyIndex[i] != null && Tool_UI.instance.Set_Color_Sprite(this.KeyTarget[this.LastKeyIndex[i]].getChildByName(\"Bg\").getChildByName(\"Sp\"), ColorOff);\r\n                this.LastKeyIndex[i] = Obj.Index;\r\n\r\n                // this.LastKeyIndex[this.ValueTargetC.indexOf(TouchNode)] != null && Tool_UI.instance.Set_Color_Sprite(this.KeyTarget[this.LastKeyIndex[i]].getChildByName(\"Bg\").getChildByName(\"Sp\"), ColorOff);\r\n                // this.LastKeyIndex[this.ValueTargetC.indexOf(TouchNode)] = Obj.Index;\r\n\r\n                //console.error(Obj.Index, this.LastKeyIndex[i], i, Value.children.indexOf(TouchNode));\r\n\r\n                Tool_UI.instance.Set_Color_Sprite(this.KeyTarget[Obj.Index].getChildByName(\"Bg\").getChildByName(\"Sp\"), ColorOn);\r\n                Temp.destroyAllChildren();\r\n                for (let i = 0; i < this.TipAnim.length; i++) {\r\n                    this.TipAnim[i].destroy();\r\n                }\r\n                this.KeyShadowIndex = -1;\r\n                let Pos = Tool_UI.instance.Get_Target_Node_Local_Pos(TouchNode, this.KeyTarget[Obj.Index]);\r\n                await Tool_Animation.instance.Animation_Node_Move_Time(TouchNode, Pos, 0, null, \"smooth\");\r\n                tween(TouchNode)\r\n                    .to(0.25, { scale: v3(0.9, 0.9, 1) }, { easing: \"backOut\" })\r\n                    .start();\r\n            }\r\n\r\n            this.UpdateUIValue(Time, Wait, true);\r\n            await Tool_Animation.instance.Async_Wait(1);\r\n            this.Game_Script.BlockInputEvents.active = false;\r\n            Hand.active = true;\r\n            Tool_Animation.instance.Tween_Stop_Target(Hand);\r\n            let MoveNode = this.ValueTarget[0];\r\n            this.Game_Script.OnMessage(\"将需要的数字拖动到空格上\");\r\n            let PosStart = Tool_UI.instance.Get_Target_Node_Local_Pos(Hand, MoveNode).add(v3(30, -50));\r\n            let PosEnd = Tool_UI.instance.Get_Target_Node_Local_Pos(Hand, this.KeyTarget[0]).add(v3(30, -50));\r\n            const AnimA = () => {\r\n                Hand.position = PosStart;\r\n                Tool_Animation.instance.Animation_Node_Move_Time(Hand, PosEnd, 1, () => {\r\n                    if (MoveNode == this.ValueTarget[0]) {\r\n                        Tool_Animation.instance.Animation_Node_Move_Time(Hand, PosStart, 0.5, () => {\r\n                            if (MoveNode == this.ValueTarget[0]) {\r\n                                AnimA();\r\n                            }\r\n                        });\r\n                    }\r\n                });\r\n            }\r\n            AnimA();\r\n        } else {\r\n            this.UpdateUIValue(Time, Wait, true);//1.2\r\n        }\r\n\r\n\r\n    }\r\n\r\n    /**刷新排序 */\r\n    async UpdateUIValue(Time: number = 0.2, Wait: number = 0, IsAudio: boolean = false) {\r\n\r\n        if (IsAudio) {\r\n            this.Resoure_Data.Sound_Play(\"Audio/BoxStart\");\r\n        }\r\n        //console.log(\"刷新排序\");\r\n\r\n        // this.Interactable = false;\r\n        this.ValueTarget.sort((a, b) => {\r\n            const valueA = parseFloat(a.getChildByName(\"Label\").getComponent(Label).string);\r\n            const valueB = parseFloat(b.getChildByName(\"Label\").getComponent(Label).string);\r\n            return valueA - valueB;\r\n        });\r\n        for (let i = 0; i < this.ValueTarget.length; i++) {\r\n            this.ValueTarget[i].scale = v3(1, 1, 1);\r\n            this.ValueTarget[i].angle = 0;\r\n            Tool_Animation.instance.Animation_Node_Move_Time(this.ValueTarget[i], this.ValuePos[i], Time, null, \"smooth\");\r\n            // if (Wait != 0) {\r\n            await Tool_Animation.instance.Async_Wait(Wait);\r\n            // }\r\n        }\r\n        if (IsAudio) {\r\n            this.Resoure_Data.Sound_Play(\"Audio/BoxEnd\");\r\n        }\r\n\r\n        if (this.Game_Script.MathMatchLevel <= 0 && this.Step <= 1) {\r\n            this.BtnTip.getComponent(Sprite).grayscale = true;\r\n        } else {\r\n            this.BtnTip.getComponent(Sprite).grayscale = this.ValueTarget.length == 0;\r\n        }\r\n\r\n        await Tool_Animation.instance.Async_Wait(Time);\r\n        // this.Interactable = true;\r\n    }\r\n\r\n    async GameStart() {\r\n        this.BtnTip.getComponent(Sprite).grayscale = true;\r\n\r\n        this.Game_Script.BlockInputEvents.active = false;\r\n\r\n        if (sys.platform === sys.Platform.WECHAT_GAME || sys.platform === sys.Platform.WECHAT_MINI_PROGRAM) {\r\n            try {\r\n                // window.ge.onLevelStart({ \"$user_level\": this.Game_Script.MathMatchLevel });\r\n                GravityPlatform.instance.onLevelStart({ \"$user_level\": this.Game_Script.MathMatchLevel });\r\n            } catch (error) {\r\n                //console.log(error);\r\n\r\n            }\r\n        }\r\n\r\n        this.TipReset();\r\n        this.Timing();\r\n        await this.InitData();\r\n        await this.InitInterface();\r\n\r\n\r\n    }\r\n\r\n    async GameVictory() {\r\n        if (this.PanelVictory.active) {\r\n            return;\r\n        }\r\n        this.Resoure_Data.Sound_Play(\"Audio/Victory\");\r\n        this.PanelVictory.active = true;\r\n        this.Interactable = false;\r\n\r\n        if (sys.platform === sys.Platform.WECHAT_GAME || sys.platform === sys.Platform.WECHAT_MINI_PROGRAM) {\r\n            try {\r\n                GravityPlatform.instance.onLevelSuccess({ \"$user_level\": this.Game_Script.MathMatchLevel });\r\n                // window.ge.onLevelSuccess({ \"$user_level\": this.Game_Script.MathMatchLevel });\r\n            } catch (error) {\r\n                console.log(error);\r\n            }\r\n        }\r\n\r\n\r\n        this.TimerPause();\r\n\r\n        find(\"JG\", this.node).active = false;\r\n\r\n\r\n        let T = this.GameTimeIng / this.GameTimeAll;\r\n        this.Score = 0;\r\n        if (T < 0.45) {\r\n            this.Score = 3;\r\n            this.Resoure_Data.Sound_Play(\"Audio/Start3\");\r\n        } else if (T < 0.7) {\r\n            this.Score = 2;\r\n            this.Resoure_Data.Sound_Play(\"Audio/Start2\");\r\n        } else if (T < 1) {\r\n            this.Score = 1;\r\n            this.Resoure_Data.Sound_Play(\"Audio/Start1\");\r\n        } else {\r\n            this.Score = 0;\r\n        }\r\n\r\n\r\n        this.Game_Script.MathMatchLevel++;\r\n        this.Game_Script.MathMatchScore += this.Score;\r\n        /**保存数据 */\r\n        this.Game_Script.DataSet();\r\n        // this.Game_Script.UpdateScene();\r\n\r\n        if (this.Score == 0) {\r\n            this.PanelVictory.getChildByName(\"WinBanner\").getChildByName(\"Label\").getComponent(RichText).string = `<color=#17a6fc>${this.GameTimeAll}/</color><color=#FF0000>${this.GameTimeIng}</color>`;\r\n        } else {\r\n            this.PanelVictory.getChildByName(\"WinBanner\").getChildByName(\"Label\").getComponent(RichText).string = `<color=#17a6fc>${this.GameTimeAll}/</color><color=#00FF00>${this.GameTimeIng}</color>`;\r\n        }\r\n\r\n\r\n        this.Game_Script.BlockInputEvents.active = true;\r\n        let StarsData: { Pos: Vec3[], Angle: number[] } = {\r\n            Pos: [\r\n                v3(-175, 150, 0), v3(0, 180, 0), v3(175, 150, 0),\r\n            ], Angle: [\r\n                50, 25, 0\r\n            ]\r\n        };\r\n        let Stars = find(\"WinBanner/Stars\", this.PanelVictory)\r\n        for (let I = 0; I < Stars.children.length; I++) {\r\n            let Star = Stars.children[I].children[0];\r\n            Star.active = false;\r\n            Star.scale = v3(1, 1, 1);\r\n            Star.parent.position = StarsData.Pos[I]\r\n            Star.parent.angle = StarsData.Angle[I]\r\n            Star.parent.scale = v3(1, 1, 1);\r\n        }\r\n        const StarsAnim = async () => {\r\n            for (let I = 0; I < this.Score; I++) {\r\n                let Star = Stars.children[I].children[0];\r\n                Star.scale = v3(4, 4, 1);\r\n                Star.active = true;\r\n                tween(Star)\r\n                    .to(0.05, { scale: v3(5, 5, 1) })\r\n                    .to(0.4, { scale: v3(1, 1, 1) })\r\n                    .start();\r\n                await Tool_Animation.instance.Async_Wait(0.4);\r\n            }\r\n            this.Game_Script.BlockInputEvents.active = false;\r\n        }\r\n        StarsAnim();\r\n\r\n        const CD = async () => {\r\n            Tool_Animation.instance.Anim_Skeleton_Play(find(\"C1\", this.PanelVictory).getComponent(sp.Skeleton), \"default\", 0, \"caidai\", false);\r\n            await Tool_Animation.instance.Async_Wait(0.1);\r\n            Tool_Animation.instance.Anim_Skeleton_Play(find(\"C2\", this.PanelVictory).getComponent(sp.Skeleton), \"default\", 0, \"caidai\", false, () => {\r\n                //console.log(\"结束\");\r\n\r\n            });\r\n        }\r\n        CD();\r\n\r\n        if (this.Resoure_Data.Vibration_Switch_Get()) {\r\n            for (let i = 0; i < 5; i++) {\r\n                PlatformApi.instance.vibrateShort();\r\n                await Tool_Animation.instance.Async_Wait(0.2);\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    async GameFailed() {\r\n\r\n        if (sys.platform === sys.Platform.WECHAT_GAME || sys.platform === sys.Platform.WECHAT_MINI_PROGRAM) {\r\n            try {\r\n                // window.ge.onLevelFail({ \"$user_level\": this.Game_Script.MathMatchLevel });\r\n                GravityPlatform.instance.onLevelStart({ \"$user_level\": this.Game_Script.MathMatchLevel });\r\n            } catch (error) {\r\n                //console.log(error);\r\n\r\n            }\r\n        }\r\n        this.Resoure_Data.Sound_Play(\"Audio/Failed\");\r\n        this.PanelFail.active = true;\r\n        this.Interactable = false;\r\n        this.PanelFail.getChildByName(\"WinBanner\").getChildByName(\"Label\").getComponent(RichText).string = `<color=#17a6fc>${this.GameTimeAll}/</color><color=#FF0000>${this.GameTimeIng}</color>`;\r\n\r\n\r\n\r\n    }\r\n\r\n    GameResult() {\r\n\r\n\r\n    }\r\n\r\n\r\n    BreakNode(SetNode: Node) {\r\n\r\n    }\r\n\r\n    TipReset() {\r\n        if (this.TipLabel != null) {\r\n            Tool_UI.instance.Set_Color_Label(this.TipLabel, color(0, 0, 0, 255));\r\n            this.TipLabel.getComponent(Label).string = \"\";\r\n            this.TipLabel.scale = v3(1, 1, 1);\r\n            Tool_Animation.instance.Tween_Stop_Target(this.TipLabel);\r\n            this.TipLabel = null;\r\n        }\r\n        if (this.TipNode != null) {\r\n            Tool_Animation.instance.Tween_Stop_Target(this.TipNode);\r\n            this.TipNode = null;\r\n        }\r\n\r\n        for (let i = 0; i < this.TipAnim.length; i++) {\r\n            this.TipAnim[i].destroy();\r\n        }\r\n        this.TipAnim = [];\r\n\r\n    }\r\n\r\n    async TipStart() {\r\n\r\n\r\n        //console.log(this.TipAnim);\r\n        if (this.TipAnim.length != 0) {\r\n            return;\r\n        }\r\n\r\n\r\n        if (this.TipNode != null && this.TipLabel != null) {\r\n            // Tool_Animation.instance.Animation_Heartbeat(this.TipLabel);\r\n\r\n            for (let i = 0; i < this.TipAnim.length; i++) {\r\n                this.TipAnim[i].destroy();\r\n            }\r\n\r\n            let Spine = await this.Resoure_Data.Load_Prefab(\"Prefab/PanelMathMatch/Spine\");\r\n            let SpineNode1 = Tool_UI.instance.Set_Prefab_Node(Spine, this.node.getChildByName(\"TempV\"), this.ValuePos[this.ValueTarget.indexOf(this.TipNode)].clone().add(v3(0, -250, 0)));\r\n            Tool_Animation.instance.Anim_Skeleton_Play(SpineNode1.getComponent(sp.Skeleton), \"default\", 0, \"animation2\", true)\r\n\r\n            let SpineNode2 = Tool_UI.instance.Set_Prefab_Node(Spine, this.node.getChildByName(\"TempV\"), this.TipLabel);\r\n            Tool_Animation.instance.Anim_Skeleton_Play(SpineNode2.getComponent(sp.Skeleton), \"default\", 0, \"animation1\", true)\r\n\r\n            this.TipAnim.push(SpineNode1)\r\n            this.TipAnim.push(SpineNode2)\r\n\r\n\r\n\r\n            Tool_Animation.instance.Tween_Stop_Target(this.TipLabel);\r\n            this.TipLabel.angle = 0;\r\n            // Tool_Animation.instance.Tween_Stop_Target(this.TipNode);\r\n            // this.TipNode.angle = 0;\r\n\r\n            tween(this.TipLabel)\r\n                .repeatForever(\r\n                    tween()\r\n                        .to(0.2, { angle: 5 })\r\n                        .to(0.2, { angle: -10 })\r\n                        .to(0.2, { angle: 10 })\r\n                        .to(0.2, { angle: -10 })\r\n                        .to(0.2, { angle: 5 })\r\n                        .to(0.2, { angle: 0 })\r\n                        .delay(1)\r\n                )\r\n                .start()\r\n\r\n\r\n        }\r\n    }\r\n\r\n    async FindAllEquationIndices_(Key: string[], Time: number = 0, Rows: number = 11, Cols: number = 11): Promise<{ CorrectIndex: number[][]; WrongIndex: number[][]; }> {\r\n\r\n        this.Interactable = false;\r\n\r\n        this.TimStop();\r\n\r\n        if (this.Game_Script.MathMatchLevel <= 0 && this.Step <= 1) {\r\n            this.BtnTip.getComponent(Sprite).grayscale = true;\r\n        } else {\r\n            this.BtnTip.getComponent(Sprite).grayscale = this.ValueTarget.length == 0;\r\n        }\r\n\r\n        // this.Interactable = false;\r\n        await Tool_Animation.instance.Async_Wait(Time);\r\n        let Count = 0;\r\n        const Result = {\r\n            CorrectIndex: [] as number[][],\r\n            WrongIndex: [] as number[][]\r\n        };\r\n        const ResultAll = {\r\n            CorrectIndex: [] as number[],\r\n            WrongIndex: [] as number[]\r\n        };\r\n        /**检查题目右边是否存在结果 */\r\n        function CheckResult(Index: number): number {\r\n            // return Key[Index] == \"N\" || Key[Index] == \"U\" ? null : Number(Key[Index]);\r\n            return Key[Index] == \"N\" ? null : Number(Key[Index]);\r\n        }\r\n        /**计算题目左边结果 */\r\n        function GetResult(expression: string[]): number {\r\n            // 先处理乘除法\r\n            const processed = [...expression];\r\n            if (processed.indexOf(\"N\") != -1) {\r\n                return null;\r\n            }\r\n            // 第一轮处理：乘除法\r\n            for (let i = 1; i < processed.length; i += 2) {\r\n                const op = processed[i];\r\n                if (op === \"X\" || op === \"x\" || op === \"/\") {\r\n                    const left = parseFloat(processed[i - 1]);\r\n                    const right = parseFloat(processed[i + 1]);\r\n                    let result: number;\r\n                    if (op === \"/\") {\r\n                        if (right === 0) throw new Error(\"Division by zero\");\r\n                        result = left / right;\r\n                    } else {\r\n                        result = left * right;\r\n                    }\r\n                    // 替换这三个元素为计算结果\r\n                    processed.splice(i - 1, 3, result.toString());\r\n                    i -= 2; // 因为数组长度减少了，调整索引\r\n                }\r\n            }\r\n            // 第二轮处理：加减法\r\n            let result = parseFloat(processed[0]);\r\n            for (let i = 1; i < processed.length; i += 2) {\r\n                const op = processed[i];\r\n                const num = parseFloat(processed[i + 1]);\r\n                if (op === '+') {\r\n                    result += num;\r\n                } else if (op === '-') {\r\n                    result -= num;\r\n                } else {\r\n                    console.log(`${processed} `);\r\n                    console.log(i);\r\n\r\n                    throw new Error(`Unknown operator: ${op}`);\r\n                }\r\n            }\r\n            return result;\r\n        }\r\n        let ErrorChar = [\"=\", \"U\"];\r\n        for (let i = 0; i < Key.length; i++) {\r\n            if (Key[i] == \"=\") {\r\n                // //console.log(\"--------------------------------------\");\r\n                // //console.log(\"--------------------------------------\");\r\n                // //console.log(\"--------------------------------------\");\r\n                let ValueResult: number | null;\r\n                //水平方向\r\n                // //console.log(\"水平方向\");\r\n\r\n                if (i % Rows != Rows - 1) {\r\n                    ValueResult = CheckResult(i + 1);//*\r\n                    if (ValueResult != null && !Number.isNaN(ValueResult)) {\r\n                        let Index = i;\r\n                        let Indexs: number[] = [];\r\n                        let Chars: string[] = [];\r\n                        while (Index % Rows != 0) {//*\r\n                            Index -= 1;//*\r\n                            if (ErrorChar.indexOf(Key[Index]) == -1) {\r\n                                Indexs.push(Index);\r\n                            } else {\r\n                                break;\r\n                            }\r\n                        }\r\n                        Tool_Other.instance.Sort_Reverse(Indexs);\r\n                        for (let j = 0; j < Indexs.length; j++) {\r\n                            Chars.push(Key[Indexs[j]]);\r\n                        }\r\n                        Indexs.push(i);\r\n                        Indexs.push(i + 1);//*\r\n                        let KeyResult: number = GetResult(Chars);\r\n                        let IsEqual: boolean = KeyResult == ValueResult;\r\n                        // console.log(Indexs);\r\n                        // console.log(Chars);\r\n                        // console.log(\"ValueResult\", ValueResult, \"KeyResult\", KeyResult);\r\n                        // console.log(\"是否相等\", IsEqual);\r\n                        if (Indexs.length >= 5) {\r\n                            if (IsEqual) {\r\n                                Result.CorrectIndex.push(Indexs);\r\n                                ResultAll.CorrectIndex = [...ResultAll.CorrectIndex, ...Indexs];\r\n                                Count++\r\n                            } else {\r\n                                if (KeyResult != null) {\r\n                                    Result.WrongIndex.push(Indexs);\r\n                                    ResultAll.WrongIndex = [...ResultAll.WrongIndex, ...Indexs];\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n\r\n                if (Math.floor(i / Rows) != Cols - 1) {\r\n                    //垂直方向\r\n                    // //console.log(\"垂直方向\");\r\n                    ValueResult = CheckResult(i + Rows);\r\n                    if (ValueResult != null && !Number.isNaN(ValueResult)) {\r\n                        let Index = i;\r\n                        let Indexs: number[] = [];\r\n                        let Chars: string[] = [];\r\n                        while (Math.floor(Index / Rows) != 0) {\r\n                            Index -= Rows;//*\r\n                            if (ErrorChar.indexOf(Key[Index]) == -1) {\r\n                                Indexs.push(Index);\r\n                            } else {\r\n                                break;\r\n                            }\r\n                        }\r\n                        Tool_Other.instance.Sort_Reverse(Indexs);\r\n                        for (let j = 0; j < Indexs.length; j++) {\r\n                            Chars.push(Key[Indexs[j]]);\r\n                        }\r\n                        Indexs.push(i);\r\n                        Indexs.push(i + Rows);\r\n                        let KeyResult: number = GetResult(Chars);\r\n                        let IsEqual: boolean = KeyResult == ValueResult;\r\n                        // console.log(Indexs);\r\n                        // console.log(Chars);\r\n                        // console.log(\"ValueResult\", ValueResult, \"KeyResult\", KeyResult);\r\n                        // console.log(\"是否相等\", IsEqual);\r\n                        if (Indexs.length >= 5) {\r\n                            if (IsEqual) {\r\n                                Result.CorrectIndex.push(Indexs);\r\n                                ResultAll.CorrectIndex = [...ResultAll.CorrectIndex, ...Indexs];\r\n                                Count++\r\n                            } else {\r\n                                if (KeyResult != null) {\r\n                                    Result.WrongIndex.push(Indexs);\r\n                                    ResultAll.WrongIndex = [...ResultAll.WrongIndex, ...Indexs];\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n\r\n                if (i % Rows != Rows - 1 && Math.floor(i / Rows) != Cols - 1) {\r\n                    //主对角线\r\n                    ValueResult = CheckResult(i + (Rows + 1));\r\n                    if (ValueResult != null && !Number.isNaN(ValueResult)) {\r\n                        let Index = i;\r\n                        let Indexs: number[] = [];\r\n                        let Chars: string[] = [];\r\n                        while (Index % Rows != 0 && Math.floor(Index / Rows) != 0) {\r\n                            Index -= (Rows + 1);\r\n                            if (ErrorChar.indexOf(Key[Index]) == -1) {\r\n                                Indexs.push(Index);\r\n                            } else {\r\n                                break;\r\n                            }\r\n                        }\r\n                        Tool_Other.instance.Sort_Reverse(Indexs);\r\n                        for (let j = 0; j < Indexs.length; j++) {\r\n                            Chars.push(Key[Indexs[j]]);\r\n                        }\r\n                        Indexs.push(i);\r\n                        Indexs.push(i + (Rows + 1));\r\n                        console.log(Chars);\r\n                        let KeyResult: number = GetResult(Chars);\r\n                        let IsEqual: boolean = KeyResult == ValueResult;\r\n                        // console.log(\"主对角线\");\r\n                        // console.log(Indexs);\r\n                        // console.log(\"ValueResult\", ValueResult, \"KeyResult\", KeyResult);\r\n                        // console.log(\"是否相等\", IsEqual);\r\n                        if (Indexs.length >= 5) {\r\n                            if (IsEqual) {\r\n                                Result.CorrectIndex.push(Indexs);\r\n                                ResultAll.CorrectIndex = [...ResultAll.CorrectIndex, ...Indexs];\r\n                                Count++\r\n                            } else {\r\n                                if (KeyResult != null) {\r\n                                    Result.WrongIndex.push(Indexs);\r\n                                    ResultAll.WrongIndex = [...ResultAll.WrongIndex, ...Indexs];\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n\r\n\r\n\r\n\r\n                if (i % Rows != 0 && Math.floor(i / Rows) != Cols - 1) {\r\n                    //副对角线\r\n                    // //console.log(\"副对角线\");\r\n                    ValueResult = CheckResult(i + (Rows - 1));\r\n                    if (ValueResult != null && !Number.isNaN(ValueResult)) {\r\n                        let Index = i;\r\n                        let Indexs: number[] = [];\r\n                        let Chars: string[] = [];\r\n\r\n\r\n                        while (Index % Rows != (Rows - 1) && Math.floor(Index / Rows) != 0) {\r\n                            console.log(Index % Rows, Math.floor(Index / Rows));\r\n                            Index -= (Rows - 1);\r\n                            if (ErrorChar.indexOf(Key[Index]) == -1) {\r\n                                Indexs.push(Index);\r\n                            } else {\r\n                                break;\r\n                            }\r\n                        }\r\n\r\n                        Tool_Other.instance.Sort_Reverse(Indexs);\r\n                        for (let j = 0; j < Indexs.length; j++) {\r\n                            Chars.push(Key[Indexs[j]]);\r\n                        }\r\n                        Indexs.push(i);\r\n                        Indexs.push(i + (Rows - 1));\r\n                        let KeyResult: number = GetResult(Chars);\r\n                        let IsEqual: boolean = KeyResult == ValueResult;\r\n                        // console.log(Indexs);\r\n                        // console.log(Chars);\r\n                        // console.log(\"ValueResult\", ValueResult, \"KeyResult\", KeyResult);\r\n                        // console.log(\"是否相等\", IsEqual);\r\n                        if (Indexs.length >= 5) {\r\n                            if (IsEqual) {\r\n                                Result.CorrectIndex.push(Indexs);\r\n                                ResultAll.CorrectIndex = [...ResultAll.CorrectIndex, ...Indexs];\r\n                                Count++\r\n                            } else {\r\n                                if (KeyResult != null) {\r\n                                    Result.WrongIndex.push(Indexs);\r\n                                    ResultAll.WrongIndex = [...ResultAll.WrongIndex, ...Indexs];\r\n                                }\r\n                            }\r\n                        }\r\n\r\n                    }\r\n\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n\r\n\r\n        let KeyP = find(\"Key\", this.node);\r\n        let ValueP = find(\"Value\", this.node);\r\n\r\n\r\n\r\n        // console.error(Result.CorrectIndex);\r\n        // console.error(Result.WrongIndex);\r\n\r\n\r\n        let AnimReset = async () => {\r\n            for (let i = 0; i < KeyP.children.length; i++) {\r\n                if (ResultAll.CorrectIndex.indexOf(i) == -1) {\r\n                    switch (this.GameData.Key[i]) {\r\n                        case \"N\":\r\n                            Tool_UI.instance.Set_SpriteFrame(KeyP.children[i].getChildByName(\"Bg\"), await this.Resoure_Data.Load_SpriteFrame(\"SpriteFrame/Panel/PanelMathMatch/BoxN\"));\r\n                            break;\r\n                        default:\r\n                            Tool_UI.instance.Set_SpriteFrame(KeyP.children[i].getChildByName(\"Bg\"), await this.Resoure_Data.Load_SpriteFrame(\"SpriteFrame/Panel/PanelMathMatch/BoxU\"));\r\n                            break;\r\n                    }\r\n                } else {\r\n                    Tool_UI.instance.Arr_Delete(this.AnimCorrectNode, KeyP.children[i]);\r\n                }\r\n\r\n                if (ResultAll.WrongIndex.indexOf(i) == -1) {\r\n                    switch (this.GameData.Key[i]) {\r\n                        case \"N\":\r\n                            Tool_UI.instance.Set_SpriteFrame(KeyP.children[i].getChildByName(\"Bg\"), await this.Resoure_Data.Load_SpriteFrame(\"SpriteFrame/Panel/PanelMathMatch/BoxN\"));\r\n                            break;\r\n                        default:\r\n                            Tool_UI.instance.Set_SpriteFrame(KeyP.children[i].getChildByName(\"Bg\"), await this.Resoure_Data.Load_SpriteFrame(\"SpriteFrame/Panel/PanelMathMatch/BoxU\"));\r\n                            break;\r\n                    }\r\n                } else {\r\n                    Tool_UI.instance.Arr_Delete(this.AnimWrongNode, KeyP.children[i]);\r\n                }\r\n\r\n            }\r\n\r\n            await AnimV();\r\n            AnimF();\r\n\r\n        }\r\n\r\n        let AnimV = async () => {\r\n            for (let i = 0; i < Result.CorrectIndex.length; i++) {\r\n                for (let j = 0; j < Result.CorrectIndex[i].length; j++) {\r\n                    if (this.AnimCorrectNode.indexOf(KeyP.children[Result.CorrectIndex[i][j]]) == -1) {\r\n                        this.AnimCorrectNode.push(KeyP.children[Result.CorrectIndex[i][j]]);\r\n                        Tool_UI.instance.Set_SpriteFrame(KeyP.children[Result.CorrectIndex[i][j]].getChildByName(\"Bg\"), await this.Resoure_Data.Load_SpriteFrame(\"SpriteFrame/Panel/PanelMathMatch/BoxC\"));\r\n                    }\r\n                }\r\n            }\r\n            for (let i = 0; i < Result.CorrectIndex.length; i++) {\r\n                let ICall = async () => {\r\n                    //上次触摸的节点在题目中\r\n                    let IsPlay = false;\r\n                    let Obj = Tool_Animation.instance.Get_Min_Distance_Node(this.TouchNode.worldPosition, this.KeyTarget);\r\n                    if (Obj.Distance <= this.OnDistance) {\r\n                        for (let j = 0; j < Result.CorrectIndex[i].length; j++) {\r\n                            if (this.KeyTarget[Obj.Index].name == KeyP.children[Result.CorrectIndex[i][j]].name) {\r\n                                IsPlay = true;\r\n                                //console.log(\"AnimV\");\r\n                                break;\r\n                            }\r\n                        }\r\n                    }\r\n                    if (IsPlay) {\r\n                        this.Resoure_Data.Sound_Play(\"Audio/Correct\");\r\n                        for (let j = 0; j < Result.CorrectIndex[i].length; j++) {\r\n                            //题目的Value占位节点\r\n                            let Obj = Tool_Animation.instance.Get_Min_Distance_Node(KeyP.children[Result.CorrectIndex[i][j]].worldPosition, this.ValueTargetC);\r\n                            if (Obj.Distance <= this.OnDistance) {\r\n                                Tool_UI.instance.Set_SpriteFrame(this.ValueTargetC[Obj.Index].getChildByName(\"Bg\"), await this.Resoure_Data.Load_SpriteFrame(\"SpriteFrame/Panel/PanelMathMatch/BoxC\"));\r\n                                Tool_UI.instance.Set_Color_Label(this.ValueTargetC[Obj.Index].getChildByName(\"Label\"), color(0, 155, 0, 255));\r\n                                // Tool_Animation.instance.Tween_Stop_Target(this.ValueTargetC[Obj.Index]);\r\n                                // this.ValueTargetC[Obj.Index].scale = v3(0.9, 0.9, 1);\r\n                                tween(this.ValueTargetC[Obj.Index])\r\n                                    .to(0.1, { scale: v3(0.6, 0.6, 1) })\r\n                                    .to(0.1, { scale: v3(0.9, 0.9, 1) })\r\n                                    .start();\r\n                            }\r\n                            //题目的Key占位节点\r\n                            // Tool_Animation.instance.Tween_Stop_Target(KeyP.children[Result.CorrectIndex[i][j]]);\r\n                            // KeyP.children[Result.CorrectIndex[i][j]].scale = v3(1, 1, 1);\r\n                            tween(KeyP.children[Result.CorrectIndex[i][j]])\r\n                                .to(0.1, { scale: v3(0.6, 0.6, 1) })\r\n                                .to(0.1, { scale: v3(1, 1, 1) })\r\n                                .start();\r\n                            await Tool_Animation.instance.Async_Wait(0.05 * Speed);\r\n                        }\r\n                    }\r\n                }\r\n                ICall();\r\n            }\r\n        }\r\n\r\n        let AnimF = async () => {\r\n            // for (let i = 0; i < Result.WrongIndex.length; i++) {\r\n            //     for (let j = 0; j < Result.WrongIndex[i].length; j++) {\r\n            //         //console.error(this.AnimWrongNode.indexOf(KeyP.children[Result.WrongIndex[i][j]]));\r\n\r\n            //         if (this.AnimWrongNode.indexOf(KeyP.children[Result.WrongIndex[i][j]]) == -1) {\r\n            //             this.AnimWrongNode.push(KeyP.children[Result.WrongIndex[i][j]]);\r\n            //             Tool_UI.instance.Set_SpriteFrame(KeyP.children[Result.WrongIndex[i][j]].getChildByName(\"Bg\"), await this.Resoure_Data.Load_SpriteFrame(\"SpriteFrame/Panel/PanelMathMatch/BoxE\"));\r\n            //         }\r\n            //     }\r\n            // }\r\n            for (let i = 0; i < Result.WrongIndex.length; i++) {\r\n                let ICall = async () => {\r\n                    //上次触摸的节点在题目中\r\n                    let IsPlay = false;\r\n                    let Obj = Tool_Animation.instance.Get_Min_Distance_Node(this.TouchNode.worldPosition, this.KeyTarget);\r\n\r\n                    if (Obj.Distance <= this.OnDistance) {\r\n                        for (let j = 0; j < Result.WrongIndex[i].length; j++) {\r\n                            if (this.KeyTarget[Obj.Index].name == KeyP.children[Result.WrongIndex[i][j]].name) {\r\n                                IsPlay = true;\r\n                                //console.log(\"AnimF\");\r\n                                break;\r\n                            }\r\n                        }\r\n                    }\r\n                    if (IsPlay) {\r\n                        this.Resoure_Data.Sound_Play(\"Audio/Wrong\");\r\n                        for (let j = 0; j < Result.WrongIndex[i].length; j++) {\r\n                            //题目的Value占位节点\r\n                            if (Number.isNaN(Number(KeyP.children[Result.WrongIndex[i][j]].getChildByName(\"Label\").getComponent(Label).string))) {\r\n                                continue;\r\n                            }\r\n                            let Obj = Tool_Animation.instance.Get_Min_Distance_Node(KeyP.children[Result.WrongIndex[i][j]].worldPosition, this.ValueTargetC);\r\n                            if (Obj.Distance <= this.OnDistance) {\r\n                                Tool_UI.instance.Set_SpriteFrame(this.ValueTargetC[Obj.Index].getChildByName(\"Bg\"), await this.Resoure_Data.Load_SpriteFrame(\"SpriteFrame/Panel/PanelMathMatch/BoxE\"));\r\n                                Tool_UI.instance.Set_Color_Label(this.ValueTargetC[Obj.Index].getChildByName(\"Label\"), color(155, 0, 0, 255));\r\n\r\n                                // Tool_Animation.instance.Tween_Stop_Target(this.ValueTargetC[Obj.Index]);\r\n                                // Tool_Animation.instance.Tween_Stop_Target(KeyP.children[Result.WrongIndex[i][j]]);\r\n\r\n                                tween(this.ValueTargetC[Obj.Index])\r\n                                    .to(0.1, { angle: 10 })\r\n                                    .to(0.1, { angle: -20 })\r\n                                    .to(0.1, { angle: 20 })\r\n                                    .to(0.1, { angle: -20 })\r\n                                    .to(0.1, { angle: 10 })\r\n                                    .to(0.1, { angle: 0 })\r\n                                    .start();\r\n                                tween(KeyP.children[Result.WrongIndex[i][j]])\r\n                                    .to(0.1, { angle: 10 })\r\n                                    .to(0.1, { angle: -20 })\r\n                                    .to(0.1, { angle: 20 })\r\n                                    .to(0.1, { angle: -20 })\r\n                                    .to(0.1, { angle: 10 })\r\n                                    .to(0.1, { angle: 0 })\r\n                                    .start();\r\n                                // tween(this.ValueTargetC[Obj.Index])\r\n                                //     .by(0.1, { scale: v3(-0.4, -0.4, 1) })\r\n                                //     .by(0.1, { scale: v3(0.4, 0.4, 1) })\r\n                                //     .start();\r\n                            }\r\n                            //题目的Key占位节点\r\n                            // tween(KeyP.children[Result.WrongIndex[i][j]])\r\n                            //     .by(0.1 * Speed, { scale: v3(-0.4, - 0.4, 1) })\r\n                            //     .by(0.1 * Speed, { scale: v3(0.4, 0.4, 1) })\r\n                            //     .start();\r\n                            // await Tool_Animation.instance.Async_Wait(0.05 * Speed);\r\n                        }\r\n                    }\r\n                }\r\n                ICall();\r\n            }\r\n        }\r\n\r\n\r\n        var Speed = 1;\r\n        await AnimReset();\r\n        await Tool_Animation.instance.Async_Wait(0.2);\r\n        this.Interactable = true;\r\n\r\n        if (Count == this.GameData.Count) {\r\n            //console.log(\"胜利\");\r\n            await Tool_Animation.instance.Async_Wait(0.5);\r\n            this.GameVictory();\r\n        }\r\n        Tool_Console.instance.Console_Style(Count, {\r\n            Font_Color: 'rgba(255, 99, 71, 1)',\r\n            Font_Size: '20px',\r\n            Font_Weight: 'lighter',\r\n            Font_Style: 'normal',\r\n            Font_Family: \"'fantasy',cursive\",\r\n            Text_Decoration: 'none',\r\n            Text_Shadow: \"2px 2px 2px rgba(0, 0, 0, 0.5)\",\r\n            Background_Color: 'rgba(155, 155, 155, 0.2)',\r\n            Padding: \"10px 20px\",\r\n            Margin: \"10px auto\",\r\n            Border: \"1px dashed rgba(0, 255, 0, 1)\",\r\n            Border_Radius: \"5px\",\r\n        })\r\n        // console.log(this.KeyExitState);\r\n\r\n\r\n        return Result;\r\n    }\r\n\r\n\r\n\r\n    UpdateProp() {\r\n\r\n        this.BtnTip.getChildByName(\"PropNum\").getChildByName(\"Label\").getComponent(Label).string = this.Game_Script.PropNum + \"\";\r\n\r\n    }\r\n\r\n}\r\n\r\n\r\n"]}