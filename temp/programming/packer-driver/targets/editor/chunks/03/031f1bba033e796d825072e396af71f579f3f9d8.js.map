{"version":3,"sources":["file:///D:/CYDW/WoChengYuTeNiu/assets/Script/Game/GameMode/PanelFilm.ts"],"names":["_decorator","color","find","Label","Layout","Sprite","tween","UIOpacity","v3","Animation","PlatformApi","Tool_Event","Tool_UI","PanelTemplate","Tool_Animation","Tool_Other","ccclass","property","PanelFilm","KeyData","ValueStr","ValueIndex","ValueMoveing","TipState","BtnBreak","BtnGet","GetState","BtnDelete","onLoad","onEnable","IsInit","LoadPanel","GameStart","Resoure_Data","Music_Play","start","Promise","resolve","reject","BtnSetting","node","BtnTip","PanelTip","BtnTipClose","PanelVictory","BtnNext","OnBtn","Game_Script","AnimSwitch","BtnSettingCall","Sound_Play","UpdatePanelSetting","BtnTipCall","active","Call","IsHint","PropNum","DataSet","UpdatePropUI","instance","showVideoAd","BtnTipCloseCall","BtnNextCall","BtnCloseCall","BtnGetCall","Grid","i","children","length","getChildByName","BtnDeleteCall","Key","getComponent","string","substring","Set_UIOpacity","Btns","On_Event_TOUCH_END","Set_Btn_Event_Anim","Value","Component_UIOpacity","Component_Get","opacity","undefined","Char","Result","GetResult","isValid","isComplete","GameVictory","KeyLabel","by","position","easing","call","scheduleOnce","InitData","OnMessage","FilmLevel","Text","Correct","push","j","Wrong","Hints","Sort_Random","console","log","Component_On","updateLayout","Tween_Stop_Target","scale","Set_Color","EntryNodes","PosEnd","clone","Component_Off","Set_Pos_X","Animation_Node_Move_Time","Async_Wait","showInterstitialAd","FilmScore","UpdateScene","grayscale","play","BtnTipLabel","BtnTipNull","GetData","FilmData","Movie","Candidate","startsWith"],"mappings":"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","sourcesContent":["import { _decorator, color, Component, find, Label, Layout, log, Node, Sprite, tween, UIOpacity, v3, Vec3, Animation } from 'cc';\r\nimport { PlatformApi } from '../../Other/SDK/PlatformApi';\r\nimport { Tool_Event } from '../../Tool/Tool_Event';\r\nimport { Tool_UI } from '../../Tool/Tool_UI';\r\nimport { PanelTemplate } from './PanelTemplate';\r\nimport { Tool_Animation } from '../../Tool/Tool_Animation';\r\nimport { Tool_Other } from '../../Tool/Tool_Other';\r\nconst { ccclass, property } = _decorator;\r\n\r\n/**影视数据类型 */\r\ntype TypeData = {\r\n    Correct: string;\r\n    Wrong: string;\r\n    Hints: string,\r\n    Movie: string,\r\n}\r\n\r\n@ccclass('PanelFilm')\r\nexport class PanelFilm extends PanelTemplate {\r\n\r\n    /**Key数据 */\r\n    KeyData: TypeData = null;\r\n\r\n    /**Value字符串 */\r\n    ValueStr: string = \"\";\r\n    /**Value索引 */\r\n    ValueIndex: number = 0;\r\n    /**是否移动 */\r\n    ValueMoveing: boolean = false;\r\n\r\n    /**提示状态 */\r\n    TipState: boolean = false;\r\n\r\n    /**返回按钮 */\r\n    BtnBreak: Node = null;\r\n    /**获取答案按钮 */\r\n    BtnGet: Node = null;\r\n    /**答案状态 */\r\n    GetState: boolean = false;\r\n    /**删除按钮 */\r\n    BtnDelete: Node = null;\r\n\r\n    async onLoad() {\r\n        super.onLoad();\r\n    }\r\n\r\n    async onEnable() {\r\n        if (!this.IsInit) {\r\n            await this.LoadPanel();\r\n        }\r\n        this.GameStart();\r\n        this.Resoure_Data.Music_Play(\"Audio/BGMGame\");\r\n    }\r\n\r\n    async start() {\r\n\r\n    }\r\n\r\n    /**加载面板 */\r\n    async LoadPanel(): Promise<void> {\r\n        return new Promise(async (resolve, reject) => {\r\n            /**绑定关键节点 */\r\n            this.BtnSetting = find(\"BtnSetting\", this.node);\r\n            this.BtnTip = find(\"BtnTip\", this.node);\r\n            this.PanelTip = find(\"PanelTip\", this.node);\r\n            this.BtnTipClose = find(\"BtnTipClose\", this.PanelTip);\r\n            this.PanelVictory = find(\"PanelVictory\", this.node);\r\n            this.BtnNext = find(\"BtnNext\", this.PanelVictory);\r\n            this.BtnBreak = find(\"BtnBreak\", this.PanelVictory);\r\n            this.BtnGet = find(\"BtnGet\", this.PanelTip);\r\n            this.BtnDelete = find(\"Key/BtnDelete\", this.node);\r\n            /**注册按钮事件 */\r\n            await this.OnBtn(this.Game_Script.AnimSwitch);\r\n            this.IsInit = true;\r\n            resolve();\r\n        });\r\n    }\r\n\r\n    /**注册按钮 */\r\n    async OnBtn(AnimSwitch: boolean = false) {\r\n        /**设置按钮 */\r\n        const BtnSettingCall = () => {\r\n            this.Resoure_Data.Sound_Play(\"Audio/SoundBtn\");\r\n            this.Game_Script.UpdatePanelSetting(true);\r\n        }\r\n        /**提示按钮 */\r\n        const BtnTipCall = () => {\r\n            this.Resoure_Data.Sound_Play(\"Audio/SoundBtn\");\r\n            if (this.TipState) {\r\n                this.PanelTip.active = true;\r\n            } else {\r\n                const Call = () => {\r\n                    this.TipState = true;\r\n                    this.Game_Script.IsHint = true;\r\n                    this.PanelTip.active = true;\r\n                }\r\n                if (this.Game_Script.PropNum > 0) {\r\n                    this.Game_Script.PropNum--;\r\n                    this.Game_Script.DataSet();\r\n                    this.UpdatePropUI();\r\n                    Call();\r\n                } else {\r\n                    PlatformApi.instance.showVideoAd(async () => {\r\n                        Call();\r\n                    }, () => {\r\n\r\n                    });\r\n                }\r\n            }\r\n        }\r\n        /**关闭提示界面 */\r\n        const BtnTipCloseCall = () => {\r\n            this.Resoure_Data.Sound_Play(\"Audio/SoundBtn\");\r\n            this.PanelTip.active = false;\r\n        }\r\n        /**下一关按钮 */\r\n        const BtnNextCall = () => {\r\n            this.Resoure_Data.Sound_Play(\"Audio/SoundBtn\");\r\n            this.GameStart();\r\n        }\r\n        /**关闭按钮 */\r\n        const BtnCloseCall = () => {\r\n            this.Resoure_Data.Sound_Play(\"Audio/SoundBtn\");\r\n            this.node.active = false;\r\n        }\r\n        /**获取答案 */\r\n        const BtnGetCall = () => {\r\n            this.Resoure_Data.Sound_Play(\"Audio/SoundBtn\");\r\n            if (this.GetState) {\r\n                return;\r\n            }\r\n            this.GetState = true;\r\n            let Grid = find(\"Window/Grid\", this.PanelTip);\r\n            PlatformApi.instance.showVideoAd(async () => {\r\n                for (let i = 0; i < Grid.children.length; i++) {\r\n                    Grid.children[i].getChildByName(\"Lock\").active = false;\r\n                    Grid.children[i].getChildByName(\"Label\").active = !Grid.children[i].getChildByName(\"Lock\").active;\r\n                }\r\n            }, () => {\r\n\r\n            });\r\n        }\r\n        /**删除按钮 */\r\n        const BtnDeleteCall = () => {\r\n            this.Resoure_Data.Sound_Play(\"Audio/SoundBtn\");\r\n            if (this.ValueIndex > 0) {\r\n                let Key = find(\"Key\", this.node);\r\n                Key.children[this.ValueIndex - 1].getChildByName(\"Label\").getComponent(Label).string = \"\";\r\n                this.ValueStr = this.ValueStr.substring(0, this.ValueStr.length - 1);\r\n                Tool_UI.instance.Set_UIOpacity(Btns[this.ValueIndex - 1], 255);\r\n                this.ValueIndex--;\r\n            }\r\n        }\r\n        /**设置按钮事件 */\r\n        Tool_Event.instance.On_Event_TOUCH_END(this.BtnSetting, BtnSettingCall);\r\n        Tool_Event.instance.On_Event_TOUCH_END(this.BtnTip, BtnTipCall);\r\n        Tool_Event.instance.On_Event_TOUCH_END(this.BtnTipClose, BtnTipCloseCall);\r\n        Tool_Event.instance.On_Event_TOUCH_END(this.BtnNext, BtnNextCall);\r\n        Tool_Event.instance.On_Event_TOUCH_END(this.BtnBreak, BtnCloseCall);\r\n        Tool_Event.instance.On_Event_TOUCH_END(this.BtnGet, BtnGetCall);\r\n        Tool_Event.instance.On_Event_TOUCH_END(this.BtnDelete, BtnDeleteCall);\r\n        /**设置按钮动画 */\r\n        Tool_Event.instance.Set_Btn_Event_Anim(this.BtnSetting, AnimSwitch);\r\n        Tool_Event.instance.Set_Btn_Event_Anim(this.BtnTip, AnimSwitch);\r\n        Tool_Event.instance.Set_Btn_Event_Anim(this.BtnTipClose, AnimSwitch);\r\n        Tool_Event.instance.Set_Btn_Event_Anim(this.BtnNext, AnimSwitch);\r\n        Tool_Event.instance.Set_Btn_Event_Anim(this.BtnBreak, AnimSwitch);\r\n        Tool_Event.instance.Set_Btn_Event_Anim(this.BtnGet, AnimSwitch);\r\n        Tool_Event.instance.Set_Btn_Event_Anim(this.BtnDelete, AnimSwitch);\r\n        let Key = find(\"Key\", this.node);\r\n        let Value = find(\"Value\", this.node);\r\n        let Btns: Node[] = [];\r\n        for (let i = 0; i < Value.children.length; i++) {\r\n            const Component_UIOpacity = Tool_UI.instance.Component_Get(Value.children[i], UIOpacity);\r\n            Tool_Event.instance.On_Event_TOUCH_END(Value.children[i], () => {\r\n                if (Component_UIOpacity.opacity == 255) {\r\n                    if (this.ValueMoveing) {\r\n                        return;\r\n                    }\r\n                    if (this.KeyData == null || this.KeyData == undefined) {\r\n                        return;\r\n                    }\r\n                    this.Resoure_Data.Sound_Play(\"Audio/Sound/Click\");\r\n                    this.ValueMoveing = true;\r\n                    Component_UIOpacity.opacity = 155;\r\n                    Btns[this.ValueIndex] = Value.children[i];\r\n                    let Char = Value.children[i].getChildByName(\"Label\").getComponent(Label).string;\r\n                    let Result = this.GetResult(Char);\r\n                    if (Result.isValid) {\r\n\r\n                        if (this.ValueIndex == 1) {\r\n                            /**首字正确 */\r\n                            this.Resoure_Data.Sound_Play(\"Audio/Sound/FirstCorrect\");\r\n                        }\r\n\r\n\r\n                        Key.children[this.ValueIndex - 1].getChildByName(\"Label\").getComponent(Label).string = Char;\r\n                        if (Result.isComplete) {\r\n                            this.GameVictory();\r\n                        } else {\r\n                            this.ValueMoveing = false;\r\n                        }\r\n                    } else {\r\n                        /**错误 */\r\n                        this.Resoure_Data.Sound_Play(\"Audio/Sound/Error\");\r\n                        Key.children[this.ValueIndex].getChildByName(\"Label\").getComponent(Label).string = Char;\r\n                        let KeyLabel = Key.children[this.ValueIndex].getChildByName(\"Label\");\r\n                        KeyLabel.getComponent(Label).color = color(255, 0, 0, 255);\r\n                        tween(KeyLabel)\r\n                            .by(0.05, { position: v3(-25, 0, 0) }, { easing: \"quadOut\" })\r\n                            .by(0.1, { position: v3(50, 0, 0) }, { easing: \"quadOut\" })\r\n                            .by(0.05, { position: v3(-25, 0, 0) }, { easing: \"quadOut\" })\r\n                            .call(() => {\r\n                            })\r\n                            .start();\r\n                        this.scheduleOnce(() => {\r\n                            KeyLabel.getComponent(Label).string = \"\";\r\n                            KeyLabel.getComponent(Label).color = color(0, 0, 0, 255);\r\n                            Component_UIOpacity.opacity = 255;\r\n                            this.ValueMoveing = false;\r\n                        }, 0.5);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    /**游戏开始 */\r\n    async GameStart() {\r\n        if (this.Game_Script == null) {\r\n            return;\r\n        }\r\n        /**初始化数据 */\r\n        this.InitData();\r\n        this.Game_Script.IsHint = false;\r\n        this.PanelVictory.active = false;\r\n        this.PanelTip.active = false;\r\n        this.TipState = false;\r\n        this.GetState = false;\r\n        this.UpdatePropUI();\r\n        if (this.KeyData == null || this.KeyData == undefined) {\r\n            this.Game_Script.OnMessage(\"暂时没有新题目了\");\r\n            return;\r\n        }\r\n        this.node.getChildByName(\"Title\").getChildByName(\"Leves\").getComponent(Label).string = `影视大咖·第${this.Game_Script.FilmLevel + 1}关`;\r\n        let Text: string[] = [];\r\n        for (let i = 0; i < this.KeyData.Correct.length; i++) {\r\n            Text.push(this.KeyData.Correct.substring(i, i + 1));\r\n        }\r\n        for (let j = 0; j < this.KeyData.Wrong.length; j++) {\r\n            Text.push(this.KeyData.Wrong.substring(j, j + 1));\r\n        }\r\n        /**初始化提示界面 */\r\n        let Grid = find(\"Window/Grid\", this.PanelTip);\r\n        for (let i = 0; i < Grid.children.length; i++) {\r\n            Grid.children[i].getChildByName(\"Label\").getComponent(Label).string = this.KeyData.Hints.substring(i, i + 1);\r\n            Grid.children[i].getChildByName(\"Lock\").active = true;\r\n            Grid.children[i].getChildByName(\"Label\").active = !Grid.children[i].getChildByName(\"Lock\").active;\r\n        }\r\n        Tool_Other.instance.Sort_Random(Text);\r\n        console.log(Text);\r\n        let Key = find(\"Key\", this.node);\r\n        let Value = find(\"Value\", this.node);\r\n        Tool_UI.instance.Component_On(Value, Layout);\r\n        Value.getComponent(Layout).updateLayout();\r\n        for (let i = 0; i < Key.children.length - 1; i++) {\r\n            Tool_Animation.instance.Tween_Stop_Target(Key.children[i]);\r\n            Key.children[i].getChildByName(\"Label\").getComponent(Label).string = \"\";\r\n            Key.children[i].scale = v3(1, 1, 1);\r\n            Key.children[i].active = i < this.KeyData.Correct.length ? true : false;\r\n        }\r\n        for (let i = 0; i < Value.children.length; i++) {\r\n            Tool_Animation.instance.Tween_Stop_Target(Value.children[i]);\r\n            Value.children[i].getChildByName(\"Label\").getComponent(Label).string = Text[i];\r\n            Tool_UI.instance.Set_UIOpacity(Value.children[i], 255);\r\n            Tool_UI.instance.Set_Color(Value.children[i].getChildByName(\"Bg\"), color(255, 227, 167, 255));\r\n            Value.children[i].scale = v3(1, 1, 1);\r\n            Value.children[i].active = true;\r\n            Tool_UI.instance.Set_UIOpacity(Value.children[i], 0);\r\n        }\r\n        /**入场节点 */\r\n        let EntryNodes: Node[] = [];\r\n        let PosEnd: Vec3[] = [];\r\n        this.scheduleOnce(async () => {\r\n            for (let i = 0; i < Value.children.length; i++) {\r\n                PosEnd.push(Value.children[i].position.clone());\r\n                EntryNodes.push(Value.children[i]);\r\n            }\r\n            // PosEnd[Value.children.length - 1] = v3(55, 0, 0);\r\n            // PosEnd[Value.children.length - 2] = v3(-55, 0, 0);\r\n            Tool_UI.instance.Component_Off(Value, Layout);\r\n            for (let i = 0; i < EntryNodes.length; i++) {\r\n                Tool_UI.instance.Set_Pos_X(EntryNodes[i], -640);\r\n                Tool_UI.instance.Set_UIOpacity(EntryNodes[i], 255);\r\n                // Tool_UI.instance.Node_Index_Set(EntryNodes[i], 0);\r\n                Tool_Animation.instance.Animation_Node_Move_Time(EntryNodes[i], PosEnd[i], 0.25);\r\n                await Tool_Animation.instance.Async_Wait(0.05);\r\n            }\r\n        });\r\n    }\r\n\r\n    /**游戏胜利 */\r\n    async GameVictory() {\r\n        /**胜利音效 */\r\n        this.Resoure_Data.Sound_Play(\"Audio/Sound/Victory\");\r\n        PlatformApi.instance.showInterstitialAd();\r\n        this.Game_Script.FilmLevel++;\r\n        this.Game_Script.FilmScore += this.Game_Script.IsHint ? 1 : 2;\r\n        /**保存数据 */\r\n        this.Game_Script.DataSet();\r\n        this.Game_Script.UpdateScene();\r\n        find(\"WinBanner/Condition1/Correct\", this.PanelVictory).active = !this.Game_Script.IsHint\r\n        find(\"WinBanner/Condition1/Wrong\", this.PanelVictory).active = this.Game_Script.IsHint;\r\n        find(\"WinBanner/Stars/StarR\", this.PanelVictory).getComponent(Sprite).grayscale = this.Game_Script.IsHint;\r\n        find(\"Light\", this.PanelVictory).getComponent(Animation).play();\r\n        this.PanelVictory.active = true;\r\n    }\r\n\r\n    /**刷新道具UI */\r\n    UpdatePropUI() {\r\n        const BtnTipLabel = this.BtnTip.getChildByName(\"PropNum\").getChildByName(\"Label\").getComponent(Label);\r\n        const BtnTipNull = this.BtnTip.getChildByName(\"PropNum\").getChildByName(\"PropNumNull\");\r\n        BtnTipLabel.string = `${this.Game_Script.PropNum}`;\r\n        if (this.Game_Script.PropNum > 0) {\r\n            BtnTipNull.active = false;\r\n        } else {\r\n            BtnTipNull.active = true;\r\n        }\r\n    }\r\n\r\n    /**初始数据 */\r\n    InitData() {\r\n        this.GetData();\r\n        this.ValueStr = \"\";\r\n        this.ValueIndex = 0;\r\n        this.ValueMoveing = false;\r\n    }\r\n\r\n    /**获取数据 */\r\n    GetData() {\r\n        const FilmData: TypeData[] = [\r\n            // === 简单===\r\n            { Correct: \"测试电影名字1\", Wrong: \"这段文字是用来凑数的好难编\", Hints: \"测试电影aa\", Movie: \"图片提示(图片的名字)\" },\r\n            { Correct: \"测试电影名字2\", Wrong: \"这段文字是用来凑数的好难编\", Hints: \"测试电影ss\", Movie: \"图片提示(图片的名字)\" },\r\n            { Correct: \"测试电影名字3\", Wrong: \"这段文字是用来凑数的好难编\", Hints: \"测试电影dd\", Movie: \"图片提示(图片的名字)\" },\r\n            { Correct: \"测试电影名字4\", Wrong: \"这段文字是用来凑数的好难编\", Hints: \"测试电影aa\", Movie: \"图片提示(图片的名字)\" },\r\n            { Correct: \"测试电影名字5\", Wrong: \"这段文字是用来凑数的好难编\", Hints: \"测试电影ss\", Movie: \"图片提示(图片的名字)\" },\r\n            { Correct: \"测试电影名字6\", Wrong: \"这段文字是用来凑数的好难编\", Hints: \"测试电影dd\", Movie: \"图片提示(图片的名字)\" },\r\n\r\n        ];\r\n        if (this.Game_Script.FilmLevel >= FilmData.length) {\r\n            this.KeyData = null;\r\n            return;\r\n        }\r\n        this.KeyData = FilmData[this.Game_Script.FilmLevel];\r\n    }\r\n\r\n    /**获取结果 */\r\n    GetResult(Char: string): { isValid: boolean, isComplete: boolean } {\r\n        // 拼接新字符形成候选字符串\r\n        const Candidate = this.ValueStr + Char;\r\n        // 检查是否是完整成语\r\n        const isComplete: boolean = Candidate === this.KeyData.Correct;\r\n        // 检查是否有成语以这个候选字符串开头\r\n        const isValid = this.KeyData.Correct?.startsWith(Candidate) ?? false;\r\n        if (isValid) {\r\n            this.ValueIndex++;\r\n        }\r\n        if (isComplete) {\r\n            // 如果是完整成语，重置当前拼接状态\r\n            this.ValueStr = \"\";\r\n            return { isValid: true, isComplete: true };\r\n        } else if (isValid) {\r\n            // 如果是有效部分，更新当前拼接状态\r\n            this.ValueStr = Candidate;\r\n            return { isValid: true, isComplete: false };\r\n        } else {\r\n            // 无效输入，重置当前拼接状态\r\n            return { isValid: false, isComplete: false };\r\n        }\r\n    }\r\n\r\n}\r\n\r\n\r\n"]}