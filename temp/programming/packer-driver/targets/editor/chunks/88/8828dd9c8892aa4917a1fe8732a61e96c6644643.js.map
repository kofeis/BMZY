{"version":3,"sources":["file:///D:/CYDW/WoChengYuTeNiu/assets/Script/Tool/Tool_Animation.ts"],"names":["_decorator","Component","Animation","Sprite","Tween","tween","v3","Vec2","Vec3","Material","UIOpacity","color","isValid","Tool_Other","Tool_UI","ccclass","property","Tool_Animation","Async_Wait","Delay_Time","Promise","resolve","reject","scheduleOnce","Async_Function_Id","Id","Call","Obj_Start","num","Obj_End","to","progress","start","end","current","ratio","tag","call","Async_Function_Target","Async_Function_For","Count","Fun_Start","Fun_End","i","Timing","Obj_Timing","Clock","console","debug","TimReset","Tween_Stop_Target","TimPause","Tween_Pause_Target","TimResume","Tween_Resume_Target","TimStop","Target","pauseAllByTarget","resumeAllByTarget","stopAllByTarget","Tween_Stop_Tag","stopAllByTag","Tween_Stop_All","stopAll","Animation_Num_Jump_Time","Component_Label","Value_Start","Value_Change","Time","Lenth","Easing","easing","string","toFixed","Animation_Num_Jump_Speed","Speed","Length","Math","abs","Get_Move_Time","Start_Pos","Pos_Finish","Dis","Get_Distance","Number","Get_Angle","Pos_Start","Delta_X","x","Delta_Y","y","AngleIn_Degrees","atan2","PI","instance","Get_Type_Is_Abnormal","warn","distance","Get_Distance_Limited","Distance","clone","Direction","subtract","normalize","Intermediate_Position","add","multiplyScalar","Position_Restricted","Target_Position","Min_Position","Max_Position","Ortho_Height_Multiple","Design_Width","Get_Width_Design","Design_Height","Get_Height_Design","clamp","value","min","max","Animation_Node_Move_Speed","Node_Set","Position","Move_Time","position","Animation_Node_Move_Time","Animation_Nodes_Swap_Pos_Speed","Node_A","Node_B","Position_A","Position_B","Animation_Nodes_Move_Swap_Time","Animation_Node_Move_Bezier_Time","Target_Pos","PointA_Pos","PointB_Pos","Control_Point1","Control_Point2","End_Position","Bezier","t","pow","Animation_Node_Move_Bezier_Speed","Animation_Node_Move_Bezier_Time1","Animation_Node_Move_Parabola_Time","Control_Point","Animation_Nodes_Move_Speed","forEach","element","Pos","Animation_Nodes_Move_Time","index","length","Animation_Node_Move_Follow_Speed","Target_Node","Next_Pos","Animation_Hit","Hit_time","Color","Component_Sprite","getComponent","addComponent","Original_Color","a","g","b","log","Animation_Hit_Opacity","Min_Opacity","Max_Opacity","Component_UIOpacity","opacity","Animation_Death_Effect","Duration","Min_Scale","Max_Scale","Initial_Scale","scale","Initial_Opacity","parallel","Anim_Show_Node","Anim_Hide_Node","Anim_Show_Window","Scale_Current","z","Anim_Frame_Play","Anim","Name","error","defaultClip","name","State","getState","speed","play","once","EventType","FINISHED","Anim_Frame_Play_Plus","Min_Range","Max_Range","WrapMode","RepeatCount","Delay","wrapMode","repeatCount","playbackRange","delay","Anim_Frame_CrossFade","crossFade","Anim_Frame_Resume","isPlaying","isPaused","resume","Anim_Frame_Pause","Anim_Frame_Resume_Plus","pause","off","Anim_Frame_Stop","stop","Anim_Frame_Speed","Anim_Skeleton_Play","Skeleton","Skin","Track_Index","Anim_Name","Loop","setSkin","_updateSkeletonData","setAnimation","setCompleteListener","Animation_Heartbeat","repeatForever","Anim_On","Component_Get","Anim_Off","Anim_Dissolve","Set_Material","res","Sp","customMaterial","copy","setProperty","Current_Num","Get_Min_Distance_Pos_Arr","Position_World","Target_Position_World_Arr","Min_Index","Min_Distance","MAX_VALUE","Index","Get_Min_Distance_Node","Target_Parent_Node","Children","children","Child_Position","worldPosition"],"mappings":"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","sourcesContent":["import { __private, _decorator, AnimationState, Component, Animation, Node, sp, Sprite, Tween, tween, v3, Vec2, Vec3, Material, director, Skeleton, macro, UIOpacity, Color, color, Label, instantiate, easing, Widget, isValid, TweenEasing } from 'cc';\r\nimport { Tool_Other } from './Tool_Other';\r\nimport { Tool_UI } from './Tool_UI';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('Tool_Animation')\r\nexport class Tool_Animation extends Component {\r\n\r\n    public static readonly instance = new Tool_Animation();\r\n\r\n    /**异步等待 */\r\n    Async_Wait(Delay_Time: number): Promise<void> {\r\n        return new Promise((resolve, reject) => {\r\n            this.scheduleOnce(() => {\r\n                resolve();\r\n            }, Delay_Time);\r\n        })\r\n    }\r\n\r\n    /**\r\n     * 异步函数 Id \r\n     * @param Delay_Time 延时时间\r\n     * @param Id 缓动标签\r\n     * @param Call 回调函数\r\n     */\r\n    Async_Function_Id(Delay_Time: number, Id: number, Call: Function = () => { }): Promise<void> {\r\n        return new Promise((resolve, reject) => {\r\n            let Obj_Start = { num: 0 };\r\n            const Obj_End = { num: 1 };\r\n            tween(Obj_Start)\r\n                .to(Delay_Time, Obj_End, {\r\n                    progress: (start: number, end: number, current: number, ratio: number): number => {\r\n                        return ratio;\r\n                    }\r\n                })\r\n                .tag(Id)\r\n                .call(() => {\r\n                    Call?.();\r\n                    resolve();\r\n                })\r\n                .start();\r\n            return Obj_Start;\r\n        });\r\n    }\r\n\r\n    /**\r\n     *  异步函数 Target\r\n     * @param Delay_Time 延时时间\r\n     * @param Obj_Start 开始对象\r\n     * @param Call 回调函数\r\n     */\r\n    Async_Function_Target(Delay_Time: number, Obj_Start: { num: number }, Call: Function = () => { }): Promise<void> {\r\n        return new Promise((resolve, reject) => {\r\n            const Obj_End = { num: 1 };\r\n            tween(Obj_Start)\r\n                .to(Delay_Time, Obj_End, {\r\n                    progress: (start: number, end: number, current: number, ratio: number): number => {\r\n                        return ratio;\r\n                    }\r\n                })\r\n                .call(() => {\r\n                    Call?.();\r\n                    resolve();\r\n                })\r\n                .start();\r\n        });\r\n    }\r\n\r\n\r\n    /**异步函数循环 */\r\n    Async_Function_For(Count: number, Fun_Start: Function = () => { }, Fun_End: Function = () => { }): Promise<void> {\r\n        return new Promise((resolve, reject) => {\r\n            for (let i = 0; i < Count; i++) {\r\n                if (i == Count - 1) {\r\n                    Fun_End?.(i);\r\n                } else {\r\n                    Fun_Start?.(i);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    /**倒计时开始 */\r\n    Timing(Obj_Timing: { num: number }, Clock: number = 60, Call: Function = () => { }) {\r\n        Obj_Timing.num = 0;\r\n        this.Async_Function_Target(Clock, Obj_Timing, () => {\r\n            console.debug(\"倒计时结束\");\r\n            Call?.();\r\n        });\r\n    }\r\n\r\n    /**倒计时重置 */\r\n    TimReset(Obj_Timing: { num: number }, Clock: number = 60, Call: Function = () => { }) {\r\n        console.debug(\"倒计时重置\");\r\n        this.Tween_Stop_Target(Obj_Timing);\r\n        this.Timing(Obj_Timing, Clock, Call);\r\n    }\r\n\r\n    /**倒计时暂停 */\r\n    TimPause(Obj_Timing: { num: number }, Clock: number = 60, Call: Function = () => { }) {\r\n        console.debug(\"倒计时暂停\");\r\n        this.Tween_Pause_Target(Obj_Timing);\r\n    }\r\n\r\n    /**倒计时恢复 */\r\n    TimResume(Obj_Timing: { num: number }, Clock: number = 60, Call: Function = () => { }) {\r\n        console.debug(\"倒计时暂停\");\r\n        this.Tween_Resume_Target(Obj_Timing);\r\n    }\r\n\r\n    /**倒计时停止 */\r\n    TimStop(Obj_Timing: { num: number }, Clock: number = 60, Call: Function = () => { }) {\r\n        console.debug(\"倒计时停止\");\r\n        this.Tween_Stop_Target(Obj_Timing);\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    /**暂停缓动对象 */\r\n    Tween_Pause_Target(Target: object, Call = () => { }) {\r\n        Tween.pauseAllByTarget(Target);\r\n        Call?.();\r\n    }\r\n\r\n    /**恢复缓动对象 */\r\n    Tween_Resume_Target(Target: object, Call = () => { }) {\r\n        Tween.resumeAllByTarget(Target);\r\n        Call?.();\r\n    }\r\n\r\n    /**停止缓动对象 */\r\n    Tween_Stop_Target(Target: object, Call = () => { }) {\r\n        Tween.stopAllByTarget(Target);\r\n        Call?.();\r\n    }\r\n\r\n    /**停止缓动标签 */\r\n    Tween_Stop_Tag(Id: number, Call = () => { }) {\r\n        Tween.stopAllByTag(Id);\r\n        Call?.();\r\n    }\r\n\r\n    /**停止所有缓动 */\r\n    Tween_Stop_All() {\r\n        Tween.stopAll();\r\n    }\r\n\r\n    /**\r\n     * 数字跳动（基于时间）\r\n     * @param Label Label 组件\r\n     * @param Value_Start 初始值\r\n     * @param Value_Change 改变值\r\n     * @param Time 时间\r\n     * @param Obj_Start 开始对象\r\n     * @param Id ID\r\n     * @param Call 回调\r\n     * @param Lenth 小数位数\r\n     * @param Easing \"linear\" | \"smooth\" | \"fade\" | \"constant\" | \"quadIn\" | \"quadOut\" | \"quadInOut\" | \"quadOutIn\" | \"cubicIn\" | \"cubicOut\" | \"cubicInOut\" | \"cubicOutIn\" | \"quartIn\" | \"quartOut\" | \"quartInOut\" | \"quartOutIn\" | \"quintIn\" | \"quintOut\" | \"quintInOut\" | \"quintOutIn\" | \"sineIn\" | \"sineOut\" | \"sineInOut\" | \"sineOutIn\" | \"expoIn\" | \"expoOut\" | \"expoInOut\" | \"expoOutIn\" | \"circIn\" | \"circOut\" | \"circInOut\" | \"circOutIn\" | \"elasticIn\" | \"elasticOut\" | \"elasticInOut\" | \"elasticOutIn\" | \"backIn\" | \"backOut\" | \"backInOut\" | \"backOutIn\" | \"bounceIn\" | \"bounceOut\" | \"bounceInOut\" | \"bounceOutIn\";\r\n     */\r\n    Animation_Num_Jump_Time(\r\n        Component_Label: Label,\r\n        Value_Start: number,\r\n        Value_Change: number,\r\n        Time: number,\r\n        Obj_Start: { num: number },\r\n        Id: number, Call = () => { },\r\n        Lenth: number = 2, Easing: TweenEasing = \"linear\"\r\n    ) {\r\n        const Obj_End = { num: 1 };\r\n        tween(Obj_Start)\r\n            .to(Time, Obj_End, {\r\n                easing: Easing,\r\n                progress: (start: number, end: number, current: number, ratio: number): number => {\r\n                    Component_Label.string = (Value_Start + ratio * Value_Change).toFixed(Lenth);\r\n                    return ratio;\r\n                }\r\n            })\r\n            .tag(Id)\r\n            .call(() => Call?.())\r\n            .start();\r\n    }\r\n    /**\r\n     * 数字跳动（基于速度）\r\n     * @param Component_Label Label 组件\r\n     * @param Value_Start 初始值\r\n     * @param Value_Change 改变值\r\n     * @param Speed 变化速度（值/秒）\r\n     * @param Obj_Start 开始对象\r\n     * @param Id ID\r\n     * @param Call 回调\r\n     * @param Length 小数位数\r\n     * @param Easing \"linear\" | \"smooth\" | \"fade\" | \"constant\" | \"quadIn\" | \"quadOut\" | \"quadInOut\" | \"quadOutIn\" | \"cubicIn\" | \"cubicOut\" | \"cubicInOut\" | \"cubicOutIn\" | \"quartIn\" | \"quartOut\" | \"quartInOut\" | \"quartOutIn\" | \"quintIn\" | \"quintOut\" | \"quintInOut\" | \"quintOutIn\" | \"sineIn\" | \"sineOut\" | \"sineInOut\" | \"sineOutIn\" | \"expoIn\" | \"expoOut\" | \"expoInOut\" | \"expoOutIn\" | \"circIn\" | \"circOut\" | \"circInOut\" | \"circOutIn\" | \"elasticIn\" | \"elasticOut\" | \"elasticInOut\" | \"elasticOutIn\" | \"backIn\" | \"backOut\" | \"backInOut\" | \"backOutIn\" | \"bounceIn\" | \"bounceOut\" | \"bounceInOut\" | \"bounceOutIn\";\r\n     */\r\n    Animation_Num_Jump_Speed(Component_Label: Label, Value_Start: number, Value_Change: number, Speed: number, Obj_Start: { num: number }, Id: number, Call = () => { }, Length: number = 2, Easing: TweenEasing = \"linear\") {\r\n        // 计算动画时间（时间 = 变化量 / 速度）\r\n        const Time = (Math.abs(Value_Change) / Speed) * 1000; // 转为毫秒\r\n        const Obj_End = { num: 1 };\r\n        tween(Obj_Start)\r\n            .to(Time, Obj_End, {\r\n                easing: Easing,\r\n                progress: (start: number, end: number, current: number, ratio: number): number => {\r\n                    Component_Label.string = (Value_Start + ratio * Value_Change).toFixed(Length);\r\n                    return ratio;\r\n                }\r\n            })\r\n            .tag(Id)\r\n            .call(() => {\r\n                Call?.();\r\n            })\r\n            .start();\r\n    }\r\n\r\n    /**获得移动时间 */\r\n    Get_Move_Time(Speed: number, Start_Pos: Vec3, Pos_Finish: Vec3) {\r\n        if (Speed <= 0) {\r\n            return;\r\n        }\r\n        let Dis = this.Get_Distance(Start_Pos, Pos_Finish);\r\n        let Time = Number((Dis / Speed).toFixed(2));\r\n        return Time;\r\n    }\r\n\r\n    /**获取两点角度\r\n    *@param Pos_Start 起点坐标\r\n    *@param Pos_Finish 终点坐标\r\n    */\r\n    Get_Angle(Pos_Start: Vec3, Pos_Finish: Vec3): number {\r\n        const Delta_X = Pos_Finish.x - Pos_Start.x;\r\n        const Delta_Y = Pos_Finish.y - Pos_Start.y;\r\n        const AngleIn_Degrees = Math.atan2(Delta_Y, Delta_X) * (180 / Math.PI);\r\n        return AngleIn_Degrees;\r\n    }\r\n\r\n    /**获取两点距离\r\n    *@param Pos_Start 起点坐标\r\n    *@param Pos_Finish 终点坐标\r\n    */\r\n    Get_Distance(Pos_Start: Vec3, Pos_Finish: Vec3) {\r\n        if (!Tool_Other.instance.Get_Type_Is_Abnormal(Pos_Start) || !Tool_Other.instance.Get_Type_Is_Abnormal(Pos_Finish)) {\r\n            console.warn(\"类型异常\");\r\n            return;\r\n        }\r\n        return Number(Vec2.distance(Pos_Start, Pos_Finish).toFixed(2));\r\n    }\r\n\r\n    /**\r\n     *根据两点坐标和距离,计算距离开始位置Dis的坐标\r\n     *@param p1 起始点坐标\r\n     *@param p2 目标点坐标\r\n     *@param dis 距离起始点的距离\r\n     *@returns 中间位置坐标\r\n     */\r\n    Get_Distance_Limited(Pos_Start: Vec3, Pos_Finish: Vec3, Dis: number): Vec3 {\r\n        // 计算两点之间的距离\r\n        const Distance = this.Get_Distance(Pos_Start.clone(), Pos_Finish.clone());\r\n        // 如果两点之间的距离小于或等于目标距离,则返回目标点坐标\r\n        if (Distance <= Dis) {\r\n            return Pos_Finish.clone();\r\n        }\r\n        // 计算方向向量并归一化\r\n        const Direction = Pos_Finish.clone().subtract(Pos_Start.clone()).normalize();\r\n        // 计算中间位置坐标\r\n        const Intermediate_Position = Pos_Start.clone().add(Direction.multiplyScalar(Dis));\r\n        return Intermediate_Position;\r\n    }\r\n\r\n\r\n    /**\r\n     * 位置限制\r\n     * @param {Vec3} Target_Position - 目标坐标\r\n     * @param {Vec3} Min_Position - 最小坐标\r\n     * @param {Vec3} Max_Position - 最大坐标\r\n     * @param {number} Ortho_Height_Multiple - 正交高度倍数\r\n     * @returns {Vec3} - 限制后的目标坐标       \r\n     */\r\n    Position_Restricted(Target_Position: Vec3, Min_Position: Vec3, Max_Position: Vec3, Ortho_Height_Multiple: number = 1) {\r\n        /** 设计分辨率 */\r\n        const Design_Width = Tool_UI.instance.Get_Width_Design() * Ortho_Height_Multiple;\r\n        const Design_Height = Tool_UI.instance.Get_Height_Design() * Ortho_Height_Multiple;\r\n        // 调整最小和最大坐标\r\n        Min_Position = v3(Min_Position.x + Design_Width, Min_Position.y + Design_Height, 0);\r\n        Max_Position = v3(Max_Position.x - Design_Width, Max_Position.y - Design_Height, 0);\r\n        // 限制坐标的辅助函数\r\n        const clamp = (value: number, min: number, max: number) => Math.max(min, Math.min(value, max));\r\n        // 限制目标坐标\r\n        Target_Position.x = clamp(Target_Position.x, Min_Position.x, Max_Position.x);\r\n        Target_Position.y = clamp(Target_Position.y, Min_Position.y, Max_Position.y);\r\n\r\n        return Target_Position;\r\n    }\r\n\r\n\r\n\r\n\r\n    /**动画_节点_移动_速度\r\n    *@Node 节点\r\n    *@Position 坐标\r\n    *@Speed 速度\r\n    *@Call 回调函数\r\n    *@Easing \"linear\" | \"smooth\" | \"fade\" | \"constant\" | \"quadIn\" | \"quadOut\" | \"quadInOut\" | \"quadOutIn\" | \"cubicIn\" | \"cubicOut\" | \"cubicInOut\" | \"cubicOutIn\" | \"quartIn\" | \"quartOut\" | \"quartInOut\" | \"quartOutIn\" | \"quintIn\" | \"quintOut\" | \"quintInOut\" | \"quintOutIn\" | \"sineIn\" | \"sineOut\" | \"sineInOut\" | \"sineOutIn\" | \"expoIn\" | \"expoOut\" | \"expoInOut\" | \"expoOutIn\" | \"circIn\" | \"circOut\" | \"circInOut\" | \"circOutIn\" | \"elasticIn\" | \"elasticOut\" | \"elasticInOut\" | \"elasticOutIn\" | \"backIn\" | \"backOut\" | \"backInOut\" | \"backOutIn\" | \"bounceIn\" | \"bounceOut\" | \"bounceInOut\" | \"bounceOutIn\";\r\n    */\r\n    Animation_Node_Move_Speed(Node_Set: Node, Position: Vec3, Speed: number = 1000, Call: Function = () => { }, Easing: TweenEasing = \"linear\") {\r\n        if (Speed <= 0) {\r\n            return;\r\n        }\r\n        let Move_Time: number = this.Get_Move_Time(Speed, Node_Set.position, Position);\r\n        this.Tween_Stop_Target(Node_Set);\r\n        tween(Node_Set)\r\n            .to(Move_Time, { position: Position }, { easing: Easing })\r\n            .call(() => {\r\n                Call?.();\r\n            })\r\n            .start();\r\n    }\r\n    /**动画_节点_移动_时间\r\n    *@Node 节点\r\n    *@Position 坐标\r\n    *@Time 时间\r\n    *@Call 回调函数\r\n    *@Easing \"linear\" | \"smooth\" | \"fade\" | \"constant\" | \"quadIn\" | \"quadOut\" | \"quadInOut\" | \"quadOutIn\" | \"cubicIn\" | \"cubicOut\" | \"cubicInOut\" | \"cubicOutIn\" | \"quartIn\" | \"quartOut\" | \"quartInOut\" | \"quartOutIn\" | \"quintIn\" | \"quintOut\" | \"quintInOut\" | \"quintOutIn\" | \"sineIn\" | \"sineOut\" | \"sineInOut\" | \"sineOutIn\" | \"expoIn\" | \"expoOut\" | \"expoInOut\" | \"expoOutIn\" | \"circIn\" | \"circOut\" | \"circInOut\" | \"circOutIn\" | \"elasticIn\" | \"elasticOut\" | \"elasticInOut\" | \"elasticOutIn\" | \"backIn\" | \"backOut\" | \"backInOut\" | \"backOutIn\" | \"bounceIn\" | \"bounceOut\" | \"bounceInOut\" | \"bounceOutIn\";\r\n    */\r\n    Animation_Node_Move_Time(Node_Set: Node, Position: Vec3, Time: number = 1, Call: Function = () => { }, Easing: TweenEasing = \"linear\") {\r\n        if (Time < 0) {\r\n            return;\r\n        }\r\n        this.Tween_Stop_Target(Node_Set);\r\n        tween(Node_Set)\r\n            .to(Time, { position: Position }, { easing: Easing })\r\n            .call(() => {\r\n                Call?.();\r\n            })\r\n            .start();\r\n    }\r\n\r\n    /**动画_节点_交换_坐标_速度 */\r\n    Animation_Nodes_Swap_Pos_Speed(Node_A: Node, Node_B: Node, Speed: number = 1000, Call: Function = () => { }, Easing: TweenEasing = \"linear\") {\r\n        if (Speed <= 0) {\r\n            return;\r\n        }\r\n        const Position_A = Node_A.position.clone();\r\n        const Position_B = Node_B.position.clone();\r\n        this.Animation_Node_Move_Speed(Node_A, Position_B, Speed, null, Easing);\r\n        this.Animation_Node_Move_Speed(Node_B, Position_A, Speed, () => {\r\n            Call?.();\r\n        }, Easing);\r\n    }\r\n    /**动画_节点_交换_坐标_时间 */\r\n    Animation_Nodes_Move_Swap_Time(Node_A: Node, Node_B: Node, Time: number = 1, Call: Function = () => { }, Easing: TweenEasing = \"linear\") {\r\n        if (Time < 0) {\r\n            return;\r\n        }\r\n        const Position_A = Node_A.position.clone();\r\n        const Position_B = Node_B.position.clone();\r\n        this.Animation_Node_Move_Time(Node_A, Position_B, Time, null, Easing);\r\n        this.Animation_Node_Move_Time(Node_B, Position_A, Time, () => {\r\n            Call?.();\r\n        }, Easing);\r\n    }\r\n\r\n    /**动画_节点_移动_贝塞尔_时间\r\n    *@Node 节点\r\n    *@Target_Pos 目标坐标\r\n    *@Id 缓动标签\r\n    *@PointA_Pos 控制点坐标\r\n    *@PointB_Pos 控制点坐标\r\n    *@Time 时间\r\n    *@Call 回调函数\r\n    */\r\n    Animation_Node_Move_Bezier_Time(Node_Set: Node, Target_Pos: Vec3, Id: number, PointA_Pos: Vec3, PointB_Pos: Vec3, Time: number = 1, Call: Function = () => { }) {\r\n        if (Time < 0) {\r\n            return;\r\n        }\r\n        // 定义贝塞尔曲线的控制点\r\n        /**开始坐标 */\r\n        const Pos_Start = Node_Set.position.clone();\r\n        /**控制点1坐标 */\r\n        const Control_Point1 = Pos_Start.clone().add(PointA_Pos); // 控制点1\r\n        /**控制点2坐标 */\r\n        const Control_Point2 = Target_Pos.clone().add(PointB_Pos); // 控制点2\r\n        const End_Position = Target_Pos.clone();\r\n        // 创建贝塞尔曲线函数\r\n        const Bezier = (t) => {\r\n            return Pos_Start.clone().multiplyScalar(Math.pow(1 - t, 3))\r\n                .add(Control_Point1.clone().multiplyScalar(3 * Math.pow(1 - t, 2) * t))\r\n                .add(Control_Point2.clone().multiplyScalar(3 * (1 - t) * Math.pow(t, 2)))\r\n                .add(End_Position.clone().multiplyScalar(Math.pow(t, 3)));\r\n        };\r\n        let Obj_Start = { num: 0 };\r\n        const Obj_End = { num: 1 };\r\n        tween(Obj_Start)\r\n            .to(Time, Obj_End, {\r\n                progress: (start: number, end: number, current: number, ratio: number): number => {\r\n                    if (isValid(Node_Set, true)) {\r\n                        Node_Set.position = Bezier(ratio);\r\n                    } else {\r\n                        this.Tween_Stop_Target(Obj_Start);\r\n                    }\r\n                    return ratio;\r\n                }\r\n            })\r\n            .tag(Id)\r\n            .call(() => {\r\n                Call?.();\r\n            })\r\n            .start();\r\n    }\r\n\r\n    /**\r\n     * 动画_节点_移动_贝塞尔_速度\r\n     * @Node 节点\r\n     * @Target_Pos 目标坐标\r\n     * @PointA_Pos 控制点坐标\r\n     * @PointB_Pos 控制点坐标\r\n     * @Speed 速度\r\n     * @Call 回调函数\r\n     */\r\n    Animation_Node_Move_Bezier_Speed(Node_Set: Node, Target_Pos: Vec3, Id: number, PointA_Pos: Vec3, PointB_Pos: Vec3, Speed: number = 520, Call: Function = () => { }) {\r\n        // 获取当前节点位置\r\n        const Pos_Start = Node_Set.position.clone();\r\n        const End_Position = Target_Pos.clone();\r\n        let Time = this.Get_Move_Time(Speed, Pos_Start, End_Position);\r\n        if (Time < 0) {\r\n            return;\r\n        }\r\n        // 定义贝塞尔曲线的控制点\r\n        const Control_Point1 = Pos_Start.clone().add(PointA_Pos); // 控制点1\r\n        const Control_Point2 = Target_Pos.clone().add(PointB_Pos); // 控制点2\r\n        // 创建贝塞尔曲线函数\r\n        const Bezier = (t) => {\r\n            return Pos_Start.clone().multiplyScalar(Math.pow(1 - t, 3))\r\n                .add(Control_Point1.clone().multiplyScalar(3 * Math.pow(1 - t, 2) * t))\r\n                .add(Control_Point2.clone().multiplyScalar(3 * (1 - t) * Math.pow(t, 2)))\r\n                .add(End_Position.clone().multiplyScalar(Math.pow(t, 3)));\r\n        };\r\n        let Obj_Start = { num: 0 };\r\n        const Obj_End = { num: 1 };\r\n        tween(Obj_Start)\r\n            .to(Time, Obj_End, {\r\n                progress: (start: number, end: number, current: number, ratio: number): number => {\r\n                    if (isValid(Node_Set, true)) {\r\n                        Node_Set.position = Bezier(ratio);\r\n                    } else {\r\n                        this.Tween_Stop_Target(Obj_Start);\r\n                    }\r\n                    return ratio;\r\n                }\r\n            })\r\n            .tag(Id)\r\n            .call(() => {\r\n                Call?.();\r\n            })\r\n            .start();\r\n    }\r\n    /**动画_节点_移动_贝塞尔_时间\r\n    *@Node 节点\r\n    *@Target_Pos 目标坐标\r\n    *@Id 缓动标签\r\n    *@PointA_Pos 控制点坐标\r\n    *@PointB_Pos 控制点坐标\r\n    *@Time 时间\r\n    *@Call 回调函数\r\n    */\r\n    Animation_Node_Move_Bezier_Time1(Node_Set: Node, Target_Pos: Vec3, Obj_Start: { num: number }, Id: number, PointA_Pos: Vec3, PointB_Pos: Vec3, Time: number = 1, Call: Function = () => { }) {\r\n        if (Time < 0) {\r\n            return;\r\n        }\r\n        // 定义贝塞尔曲线的控制点\r\n        /**开始坐标 */\r\n        const Pos_Start = Node_Set.position.clone();\r\n        /**控制点1坐标 */\r\n        const Control_Point1 = Pos_Start.clone().add(PointA_Pos); // 控制点1\r\n        /**控制点2坐标 */\r\n        const Control_Point2 = Target_Pos.clone().add(PointB_Pos); // 控制点2\r\n        const End_Position = Target_Pos.clone();\r\n        // 创建贝塞尔曲线函数\r\n        const Bezier = (t) => {\r\n            return Pos_Start.clone().multiplyScalar(Math.pow(1 - t, 3))\r\n                .add(Control_Point1.clone().multiplyScalar(3 * Math.pow(1 - t, 2) * t))\r\n                .add(Control_Point2.clone().multiplyScalar(3 * (1 - t) * Math.pow(t, 2)))\r\n                .add(End_Position.clone().multiplyScalar(Math.pow(t, 3)));\r\n        };\r\n        // let Obj_Start = { num: 0 };\r\n        const Obj_End = { num: 1 };\r\n        tween(Obj_Start)\r\n            .to(Time, Obj_End, {\r\n                progress: (start: number, end: number, current: number, ratio: number): number => {\r\n                    if (isValid(Node_Set, true)) {\r\n                        Node_Set.position = Bezier(ratio);\r\n                    } else {\r\n                        this.Tween_Stop_Target(Obj_Start);\r\n                    }\r\n                    return ratio;\r\n                }\r\n            })\r\n            .tag(Id)\r\n            .call(() => {\r\n                Call?.();\r\n            })\r\n            .start();\r\n    }\r\n\r\n    /**\r\n     * 动画_节点_移动_抛物线_时间\r\n     * @param Node_Set 节点\r\n     * @param Target_Pos 目标坐标\r\n     * @param Time 时间\r\n     * @param Obj_Start 开始对象 let Obj_Start = { num: 0 };\r\n     * @param Id 缓动标签\r\n     * @param Call 回调函数\r\n     * @returns\r\n     */\r\n    Animation_Node_Move_Parabola_Time(Node_Set: Node, Target_Pos: Vec3, Time: number = 1, Obj_Start: { num: number }, Id: number, Call: Function = () => { }) {\r\n        if (Time < 0) {\r\n            return;\r\n        }\r\n        // 定义起始坐标和目标坐标\r\n        const Pos_Start = Node_Set.position.clone();\r\n        const End_Position = Target_Pos.clone();\r\n        // 计算控制点，形成抛物线\r\n        const Control_Point = new Vec3(\r\n            (Pos_Start.x + End_Position.x) / 2,\r\n            Math.max(Pos_Start.y, End_Position.y) + Math.abs(Target_Pos.y - Pos_Start.y) * 0.5, // 向上偏移\r\n            0\r\n        );\r\n        // 创建贝塞尔曲线函数\r\n        const Bezier = (t) => {\r\n            return Pos_Start.clone().multiplyScalar(Math.pow(1 - t, 2))\r\n                .add(Control_Point.clone().multiplyScalar(2 * (1 - t) * t))\r\n                .add(End_Position.clone().multiplyScalar(Math.pow(t, 2)));\r\n        };\r\n        const Obj_End = { num: 1 };\r\n        tween(Obj_Start)\r\n            .to(Time, Obj_End, {\r\n                progress: (start: number, end: number, current: number, ratio: number): number => {\r\n                    if (isValid(Node_Set, true)) {\r\n                        Node_Set.position = Bezier(ratio);\r\n                    } else {\r\n                        this.Tween_Stop_Target(Obj_Start);\r\n                    }\r\n                    return ratio;\r\n                }\r\n            })\r\n            .tag(Id)\r\n            .call(() => {\r\n                Call?.();\r\n            })\r\n            .start();\r\n    }\r\n    /**动画_节点数组_移动_速度\r\n     *@Node 节点\r\n     *@Position 坐标\r\n     *@Time 速度\r\n     *@Call 回调函数\r\n     */\r\n    Animation_Nodes_Move_Speed(Node_Set: Node[], Position: Vec3, Speed: number = 1000, Call: Function = () => { }) {\r\n        if (Speed <= 0) {\r\n            return;\r\n        }\r\n        Node_Set.forEach(element => {\r\n            let Pos = element.position.clone().add(Position)\r\n            this.Animation_Node_Move_Speed(element, Pos, Speed);\r\n        });\r\n    }\r\n    /**动画_节点数组_移动_时间\r\n     *@Node 节点\r\n     *@Position 坐标\r\n     *@Time 速度\r\n     *@Call 回调函数\r\n     */\r\n    Animation_Nodes_Move_Time(Node_Set: Node[], Position: Vec3, Time: number = 1, Call: Function = () => { }) {\r\n        Node_Set.forEach((element, index) => {\r\n            let Pos = element.position.clone().add(Position)\r\n            if (index === Node_Set.length - 1) {\r\n                this.Animation_Node_Move_Time(element, Pos, Time, Call, \"smooth\");\r\n            } else {\r\n                this.Animation_Node_Move_Time(element, Pos, Time, null, \"smooth\");\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    /**动画_节点数组_移动_跟随\r\n     * \r\n     */\r\n    Animation_Node_Move_Follow_Speed(Node_Set: Node, Target_Node: Node, Speed: number = 1000, Call: Function = () => { }) {\r\n        let Next_Pos = this.Get_Distance_Limited(Node_Set.position, Target_Node.position, 25);\r\n        /**修正坐标 */\r\n        if (this.Get_Distance(Next_Pos, Target_Node.position) <= 25) {\r\n            Next_Pos = Target_Node.position.clone();\r\n            this.Animation_Node_Move_Speed(Node_Set, Next_Pos, Speed, Call);\r\n        } else {\r\n            this.Animation_Node_Move_Speed(Node_Set, Next_Pos, Speed, () => {\r\n                this.Animation_Node_Move_Follow_Speed(Node_Set, Target_Node, Speed, Call);\r\n            });\r\n        }\r\n    }\r\n\r\n\r\n\r\n\r\n    /**动画_受击效果\r\n     *@pNode 节点\r\n     *@Hit_time 受击时间\r\n     *@Original_Color 初始颜色\r\n     */\r\n    Animation_Hit(Node_Set: Node, Hit_time: number, Call: Function = () => { }, Color: Color = color(255, 255, 255, 255)) {\r\n        let Component_Sprite = Node_Set.getComponent(Sprite);\r\n        if (!Component_Sprite) {\r\n            Node_Set.addComponent(Sprite);\r\n            Component_Sprite = Node_Set.getComponent(Sprite);\r\n        }\r\n        let Original_Color: Color = color(Component_Sprite.color.a, Component_Sprite.color.g, Component_Sprite.color.b, Component_Sprite.color.a);\r\n        console.log(Original_Color);\r\n        tween(Component_Sprite)\r\n            .to(Hit_time, { color: color(255, 0, 0, 255) })\r\n            .call(() => {\r\n                if (Color == null) {\r\n                    Component_Sprite.color = Original_Color;\r\n                } else {\r\n                    Component_Sprite.color = Color;\r\n                }\r\n                Call?.();\r\n            })\r\n            .start();\r\n    }\r\n\r\n\r\n\r\n\r\n    Animation_Hit_Opacity(Node_Set: Node, Hit_time: number, Call: Function = () => { }, Min_Opacity: number = 155, Max_Opacity: number = 255) {\r\n        let Component_UIOpacity = Node_Set.getComponent(UIOpacity);\r\n        if (!Component_UIOpacity) {\r\n            Component_UIOpacity = Node_Set.addComponent(UIOpacity);\r\n        }\r\n        Component_UIOpacity.opacity = Max_Opacity;\r\n        tween(Component_UIOpacity)\r\n            .to(Hit_time / 2, { opacity: Min_Opacity })\r\n            .to(Hit_time / 2, { opacity: Max_Opacity })\r\n            .call(() => {\r\n                Call?.();\r\n            })\r\n            .start();\r\n    }\r\n\r\n    /**\r\n * 实现节点的死亡效果（缩放 + 透明度 + 爆炸效果）\r\n * @param Node_Set 目标节点\r\n * @param Duration 动画总时长\r\n * @param Call 动画完成后的回调函数\r\n * @param Min_Scale 最小缩放值（默认 0）\r\n * @param Max_Scale 最大缩放值（默认 1.5，用于爆炸效果）\r\n * @param Min_Opacity 最小透明度（默认 0）\r\n * @param Max_Opacity 最大透明度（默认 255）\r\n */\r\n    Animation_Death_Effect(Node_Set: Node, Duration: number, Call: Function = () => { }, Min_Scale: number = 0, Max_Scale: number = 1.5, Min_Opacity: number = 0, Max_Opacity: number = 255) {\r\n        // 获取或添加 UIOpacity 组件\r\n        let Component_UIOpacity = Node_Set.getComponent(UIOpacity);\r\n        if (!Component_UIOpacity) {\r\n            Component_UIOpacity = Node_Set.addComponent(UIOpacity);\r\n        }\r\n        // 初始状态\r\n        const Initial_Scale = Node_Set.scale.clone();\r\n        const Initial_Opacity = Max_Opacity;\r\n\r\n        // 设置初始透明度\r\n        Component_UIOpacity.opacity = Initial_Opacity;\r\n\r\n        // 缩放 + 透明度 + 爆炸效果\r\n        tween(Node_Set)\r\n            .to(Duration * 0.3, { scale: v3(Max_Scale, Max_Scale, 1) }) // 爆炸效果：快速放大\r\n            .to(Duration * 0.2, { scale: v3(Min_Scale, Min_Scale, 1) }) // 缩小到最小\r\n            .parallel( // 并行动画：透明度变化\r\n                tween(Component_UIOpacity)\r\n                    .to(Duration * 0.5, { opacity: Min_Opacity }) // 透明度逐渐降低\r\n            )\r\n            .call(() => {\r\n                // 恢复初始状态（可选）\r\n                Node_Set.scale = Initial_Scale;\r\n                Component_UIOpacity.opacity = Initial_Opacity;\r\n                console.log(555);\r\n                // 动画完成后调用回调函数\r\n                Call?.();\r\n            })\r\n            .start();\r\n    }\r\n\r\n    //Easing \"linear\" | \"smooth\" | \"fade\" | \"constant\" | \"quadIn\" | \"quadOut\" | \"quadInOut\" | \"quadOutIn\" | \"cubicIn\" | \"cubicOut\" | \"cubicInOut\" | \"cubicOutIn\" | \"quartIn\" | \"quartOut\" | \"quartInOut\" | \"quartOutIn\" | \"quintIn\" | \"quintOut\" | \"quintInOut\" | \"quintOutIn\" | \"sineIn\" | \"sineOut\" | \"sineInOut\" | \"sineOutIn\" | \"expoIn\" | \"expoOut\" | \"expoInOut\" | \"expoOutIn\" | \"circIn\" | \"circOut\" | \"circInOut\" | \"circOutIn\" | \"elasticIn\" | \"elasticOut\" | \"elasticInOut\" | \"elasticOutIn\" | \"backIn\" | \"backOut\" | \"backInOut\" | \"backOutIn\" | \"bounceIn\" | \"bounceOut\" | \"bounceInOut\" | \"bounceOutIn\";\r\n\r\n    /**动画显示节点 */\r\n    Anim_Show_Node(Node_Set: Node, Time: number = 0.5, Call: Function = () => { }) {\r\n        let Component = Node_Set.getComponent(UIOpacity);\r\n        if (!Component) {\r\n            Node_Set.addComponent(UIOpacity);\r\n            Component = Node_Set.getComponent(UIOpacity);\r\n        }\r\n        Component.opacity = 0;\r\n        tween(Component)\r\n            .to(Time, { opacity: 255 }, { easing: \"smooth\" })\r\n            .call(() => {\r\n                Call?.();\r\n            })\r\n            .start();\r\n    }\r\n    /**动画_隐藏节点 */\r\n    Anim_Hide_Node(Node_Set: Node, Time: number = 0.5, Call: Function = () => { }) {\r\n        let Component = Node_Set.getComponent(UIOpacity);\r\n        if (!Component) {\r\n            Node_Set.addComponent(UIOpacity);\r\n            Component = Node_Set.getComponent(UIOpacity);\r\n        }\r\n        Component.opacity = 255;\r\n        tween(Component)\r\n            .to(Time, { opacity: 0 }, { easing: \"smooth\" })\r\n            .call(() => {\r\n                Call?.();\r\n            })\r\n            .start();\r\n    }\r\n\r\n\r\n    /**动画弹窗 */\r\n    Anim_Show_Window(Node_Set: Node, Time: number = 0.5, Call: Function = () => { }) {\r\n        let Scale_Current: Vec3 = v3(Node_Set.scale.x, Node_Set.scale.y, Node_Set.scale.z);\r\n        Node_Set.scale = v3(0, 0, 1);\r\n        tween(Node_Set)\r\n            .to(Time, { scale: Scale_Current }, { easing: \"backOut\" })\r\n            .call(() => {\r\n                Call?.();\r\n            })\r\n            .start();\r\n    }\r\n\r\n\r\n\r\n\r\n    /**播放帧动画 */\r\n    Anim_Frame_Play(Anim: Animation, Name: string = null, Speed: number = 1, Call: Function = () => { }) {\r\n        if (Anim == null) {\r\n            console.error(\"动画缺失\");\r\n            return;\r\n        }\r\n        if (Name == null || Name == \"\") {\r\n            if (Anim.defaultClip) {\r\n                Name = Anim.defaultClip.name;\r\n            } else {\r\n                console.error(\"动画缺失\");\r\n                return;\r\n            }\r\n        }\r\n        let State: AnimationState = Anim.getState(Name);\r\n        State.speed = Speed;\r\n        Anim.play(Name);\r\n        Anim.once(Animation.EventType.FINISHED, () => {\r\n            Call?.();\r\n        });\r\n    }\r\n    /**播放帧动画\r\n     * @param Name 动画组件\r\n     * @param Name 动画名字\r\n     * @param Speed 播放速率\r\n     * @param Min_Range 播放范围\r\n     * @param Max_Range 播放范围\r\n     * @param WrapMode 循环方式\r\n     * @param RepeatCount 重复次数\r\n     * @param Delay 延时时间\r\n     * @param Call 回调\r\n     *  Tool_Animation.instance.Anim_Frame_Play( Animation, null, 1, null, null, null, null, null, () => {\r\n     \r\n        })\r\n     */\r\n    Anim_Frame_Play_Plus(Anim: Animation, Name: string = null, Speed: number = 1, Min_Range: number = null, Max_Range: number = null, WrapMode: __private._cocos_animation_types__WrapMode = null, RepeatCount: number = null, Delay: number = 0, Call: Function = () => { }) {\r\n        if (Anim == null) {\r\n            console.error(\"动画缺失\");\r\n            return;\r\n        }\r\n        if (Name == null || Name == \"\") {\r\n            if (Anim.defaultClip) {\r\n                Name = Anim.defaultClip.name;\r\n            } else {\r\n                console.error(\"动画缺失\");\r\n                return;\r\n            }\r\n        }\r\n        let State: AnimationState = Anim.getState(Name);\r\n        if (Speed != null) {\r\n            State.speed = Speed;\r\n        }\r\n        if (WrapMode != null) {\r\n            State.wrapMode = WrapMode;\r\n        }\r\n        if (RepeatCount != null) {\r\n            State.repeatCount = RepeatCount;\r\n        }\r\n        if (Min_Range != null && Max_Range != null && Min_Range <= Max_Range) {\r\n            State.playbackRange = {\r\n                min: Min_Range,\r\n                max: Max_Range\r\n            }\r\n        }\r\n\r\n        if (Delay != null) {\r\n            State.delay = Delay;\r\n        }\r\n\r\n        Anim.play(Name);\r\n        Anim.once(Animation.EventType.FINISHED, () => {\r\n            Call?.();\r\n        });\r\n    }\r\n    /**切换帧动画 */\r\n    Anim_Frame_CrossFade(Anim: Animation, Name: string = null, Duration: number = 0, Call: Function = () => { }) {\r\n        if (Anim == null) {\r\n            console.error(\"动画缺失\");\r\n            return;\r\n        }\r\n        Anim.crossFade(Name, Duration);\r\n        Anim.once(Animation.EventType.FINISHED, () => {\r\n            Call?.();\r\n        });\r\n    }\r\n    /**恢复帧动画 */\r\n    Anim_Frame_Resume(Anim: Animation, Name: string = null, Speed: number = 1, Call: Function = () => { }) {\r\n        if (Anim == null) {\r\n            console.error(\"动画缺失\");\r\n            return;\r\n        }\r\n        if (Name == null) {\r\n            if (Anim.defaultClip) {\r\n                Name = Anim.defaultClip.name;\r\n            } else {\r\n                console.error(\"动画缺失\");\r\n                return;\r\n            }\r\n        }\r\n        let State: AnimationState = Anim.getState(Name);\r\n        State.speed = Speed;\r\n        if (State.isPlaying) {\r\n            if (State.isPaused) {\r\n                Anim.resume();\r\n                Anim.once(Animation.EventType.FINISHED, () => {\r\n                    Call?.();\r\n                });\r\n            } else {\r\n                this.Anim_Frame_Pause(Anim);\r\n            }\r\n        } else {\r\n            this.Anim_Frame_Play(Anim, Name, Speed, Call);\r\n        }\r\n    }\r\n    /**恢复帧动画 */\r\n    Anim_Frame_Resume_Plus(Anim: Animation, Name: string = null, Speed: number = 1, Min_Range: number = null, Max_Range: number = null, WrapMode: __private._cocos_animation_types__WrapMode = null, RepeatCount: number = null, Delay: number = 0, Call: Function = () => { }) {\r\n        if (Anim == null) {\r\n            console.error(\"动画缺失\");\r\n            return;\r\n        }\r\n        if (Name == null) {\r\n            if (Anim.defaultClip) {\r\n                Name = Anim.defaultClip.name;\r\n            } else {\r\n                console.error(\"动画缺失\");\r\n                return;\r\n            }\r\n        }\r\n        let State: AnimationState = Anim.getState(Name);\r\n        // console.log(\"是否已被暂停或停止:\", State.isMotionless);\r\n        // console.log(\"是否已被暂停:\", State.isPaused);\r\n        // console.log(\" 是否正在播放状态\", State.isPlaying);\r\n        if (WrapMode != null) {\r\n            State.wrapMode = WrapMode;\r\n        }\r\n        if (RepeatCount != null) {\r\n            State.repeatCount = RepeatCount;\r\n        }\r\n        if (Min_Range != null && Max_Range != null && Min_Range <= Max_Range) {\r\n            State.playbackRange = {\r\n                min: Min_Range,\r\n                max: Max_Range\r\n            }\r\n        }\r\n        State.delay = Delay;\r\n        State.speed = Speed;\r\n        if (State.isPlaying) {\r\n            if (State.isPaused) {\r\n                Anim.resume();\r\n                Anim.once(Animation.EventType.FINISHED, () => {\r\n                    Call?.();\r\n                });\r\n            } else {\r\n                this.Anim_Frame_Pause(Anim);\r\n            }\r\n        } else {\r\n            this.Anim_Frame_Play_Plus(Anim, Name, Speed, Min_Range, Max_Range, WrapMode, RepeatCount, Delay, Call);\r\n        }\r\n    }\r\n    /**暂停帧动画 */\r\n    Anim_Frame_Pause(Anim: Animation, Call: Function = () => { }) {\r\n        if (Anim == null) {\r\n            console.error(\"动画缺失\");\r\n            return;\r\n        }\r\n        Anim.pause();\r\n        Anim.off(Animation.EventType.FINISHED);\r\n        Call?.();\r\n    }\r\n    /**停止帧动画 */\r\n    Anim_Frame_Stop(Anim: Animation, Call: Function = () => { }) {\r\n        if (Anim == null) {\r\n            console.error(\"动画缺失\");\r\n            return;\r\n        }\r\n        Anim.stop();\r\n        Anim.off(Animation.EventType.FINISHED);\r\n        Call?.();\r\n    }\r\n    /**帧动画速度修改 */\r\n    Anim_Frame_Speed(Anim: Animation, Name: string = null, Speed: number = 1) {\r\n        if (Anim == null) {\r\n            console.error(\"动画缺失\");\r\n            return;\r\n        }\r\n        if (Name == null || Name == \"\") {\r\n            if (Anim.defaultClip) {\r\n                Name = Anim.defaultClip.name;\r\n            } else {\r\n                console.error(\"动画缺失\");\r\n                return;\r\n            }\r\n        }\r\n        let State: AnimationState = Anim.getState(Name);\r\n        State.speed = Speed;\r\n    }\r\n\r\n\r\n    /**播放骨骼动画 */\r\n    Anim_Skeleton_Play(Skeleton: sp.Skeleton, Skin: string, Track_Index: number, Anim_Name: string, Loop: boolean, Call: Function = () => { }) {\r\n        if (Skin == \"\") {\r\n            Skin = \"default\"\r\n        }\r\n        Skeleton.setSkin(Skin);\r\n        //@ts-ignore\r\n        Skeleton._updateSkeletonData();\r\n        Skeleton.setAnimation(Track_Index, Anim_Name, Loop);\r\n        Skeleton.setCompleteListener(() => {\r\n            Skeleton.setCompleteListener(null);\r\n            Call?.();\r\n        })\r\n    }\r\n\r\n\r\n    /**动画_心跳效果 */\r\n    Animation_Heartbeat(Node_Set: Node) {\r\n        tween(Node_Set)\r\n            .repeatForever(\r\n                tween()\r\n                    .to(0.5, { scale: v3(0.8, 0.8, 1) })\r\n                    .to(0.3, { scale: v3(0.9, 0.9, 1) })\r\n                    .to(0.45, { scale: v3(0.75, 0.75, 1) })\r\n                    .to(0.3, { scale: v3(1, 1, 1) })\r\n            )\r\n            .start()\r\n    }\r\n\r\n    Anim_On(Node_Set: Node, Call: Function = () => { }) {\r\n        let Component_UIOpacity = Tool_UI.instance.Component_Get(Node_Set, UIOpacity);\r\n        // let Time = 0.25;\r\n        // tween(Node_Set)\r\n        //     .to(Time, { scale: v3(0.8, 0.8, 1) })\r\n        //     .start();\r\n        // tween(Component_UIOpacity)\r\n        //     .to(Time, { opacity: 100 })\r\n        //     .call(() => {\r\n        //         Call?.();\r\n        //     })\r\n        //     .start();\r\n\r\n        let Time = 0.15;\r\n        tween(Node_Set)\r\n            .to(Time, { scale: v3(0.95, 0.95, 1) })\r\n            .start();\r\n        tween(Component_UIOpacity)\r\n            .to(Time, { opacity: 200 })\r\n            .call(() => {\r\n                Call?.();\r\n            })\r\n            .start();\r\n    }\r\n\r\n    Anim_Off(Node_Set: Node) {\r\n        let Component_UIOpacity = Tool_UI.instance.Component_Get(Node_Set, UIOpacity);\r\n        // tween(Node_Set)\r\n        //     .to(0.17, { scale: v3(1.05, 1.05, 1) })\r\n        //     .to(0.08, { scale: v3(1, 1, 1) })\r\n        //     .start();\r\n        // tween(Component_UIOpacity)\r\n        //     .to(0.25, { opacity: 255 })\r\n        //     .start();\r\n\r\n        tween(Node_Set)\r\n            .to(0.1, { scale: v3(1.05, 1.05, 1) })\r\n            .to(0.05, { scale: v3(1, 1, 1) })\r\n            .start();\r\n        tween(Component_UIOpacity)\r\n            .to(0.15, { opacity: 255 })\r\n            .start();\r\n    }\r\n\r\n\r\n\r\n    /**\r\n     * 溶解动画\r\n     * @param Node_Set 溶解节点\r\n     * @param Set_Material 溶解材质 let Set_Material = await this.Resoure_Data.Load_Material(\"Effect/dissolve\");\r\n     * @param Time 时间\r\n     * @param Call 回调\r\n     */\r\n    async Anim_Dissolve(Node_Set: Node, Set_Material: Material, Time: number = 1, Call: Function = () => { }) {\r\n        if (!Tool_Other.instance.Get_Type_Is_Abnormal(Set_Material)) {\r\n            return;\r\n        }\r\n        return new Promise<void>(res => {\r\n            const Sp = Node_Set.getComponent(Sprite);\r\n            // 确保为每个节点创建独立的材质实例\r\n            if (!Sp.customMaterial) {\r\n                Sp.customMaterial = new Material();// 克隆材质\r\n                Sp.customMaterial.copy(Set_Material);\r\n            } else {\r\n                Sp.customMaterial.copy(Set_Material); // 如果已经存在，重新复制\r\n            }\r\n            Sp.customMaterial.setProperty('dissolveThreshold', 0);\r\n            let Obj_Start = { num: 0 };\r\n            const Obj_End = { num: 1 };\r\n            tween(Obj_Start)\r\n                .to(Time, Obj_End, {\r\n                    progress: (start: number, end: number, current: number, ratio: number): number => {\r\n                        const Current_Num = 1 * ratio;//1 * ratio     0.3 + 0.7 * ratio\r\n                        Sp.customMaterial.setProperty('dissolveThreshold', Current_Num);\r\n                        return Current_Num;\r\n                    }\r\n                })\r\n                .call(() => {\r\n                    res();\r\n                    Call?.();\r\n                })\r\n                .start();\r\n        });\r\n    }\r\n\r\n\r\n    /**\r\n     * 获取距离目标坐标最近的点的索引和距离\r\n     * @param Position_World 世界坐标\r\n     * @param Target_Position_World_Arr 目标世界坐标数组\r\n     * @returns 返回最近点的索引和距离，如果数组为空则返回 null\r\n     */\r\n    Get_Min_Distance_Pos_Arr(Position_World: Vec3, Target_Position_World_Arr: Vec3[]): { Index: number; Distance: number } | null {\r\n        // 参数校验\r\n        if (!Tool_Other.instance.Get_Type_Is_Abnormal(Position_World) || !Tool_Other.instance.Get_Type_Is_Abnormal(Target_Position_World_Arr)) {\r\n            console.warn(\"类型异常\");\r\n            return null;\r\n        }\r\n        // 检查数组是否为空\r\n        if (Target_Position_World_Arr.length === 0) {\r\n            return null;\r\n        }\r\n        // 初始化最小距离和索引\r\n        let Min_Index = 0;\r\n        let Min_Distance = Number.MAX_VALUE;\r\n        // 遍历数组，找到距离最小的点\r\n        for (let i = 0; i < Target_Position_World_Arr.length; i++) {\r\n            const Distance = this.Get_Distance(Position_World, Target_Position_World_Arr[i]);\r\n            if (Distance < Min_Distance) {\r\n                Min_Distance = Distance;\r\n                Min_Index = i;\r\n            }\r\n        }\r\n        return {\r\n            Index: Min_Index,\r\n            Distance: Min_Distance\r\n        };\r\n    }\r\n    /**\r\n     * 获取距离目标坐标最近的点的索引和距离\r\n     * @param Position_World 世界坐标\r\n     * @param Target_Parent_Node 父节点\r\n     * @returns 返回最近子节点的索引和距离，如果没有子节点则返回 null\r\n     */\r\n    Get_Min_Distance_Node(Position_World: Vec3, Target_Parent_Node: Node): { Index: number; Distance: number } | null {\r\n        // 参数校验\r\n        if (!Tool_Other.instance.Get_Type_Is_Abnormal(Position_World) || !Tool_Other.instance.Get_Type_Is_Abnormal(Target_Parent_Node)) {\r\n            console.warn(\"类型异常\");\r\n            return null;\r\n        }\r\n        // 检查子节点数量\r\n        const Children = Target_Parent_Node.children;\r\n        if (Children.length === 0) {\r\n            return null;\r\n        }\r\n        // 初始化最小距离和索引\r\n        let Min_Index = 0;\r\n        let Min_Distance = Number.MAX_VALUE;\r\n        // 遍历子节点，找到距离最小的节点\r\n        for (let i = 0; i < Children.length; i++) {\r\n            const Child_Position = Children[i].worldPosition;\r\n            const Distance = this.Get_Distance(Position_World, Child_Position);\r\n            if (Distance < Min_Distance) {\r\n                Min_Distance = Distance;\r\n                Min_Index = i;\r\n            }\r\n        }\r\n        return {\r\n            Index: Min_Index,\r\n            Distance: Min_Distance\r\n        };\r\n    }\r\n\r\n\r\n}\r\n\r\n\r\n"]}