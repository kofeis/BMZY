{"version":3,"sources":["file:///D:/CYDW/WoChengYuTeNiu/assets/Script/Other/folder/LoginLayer.ts"],"names":["_decorator","assetManager","Component","Label","Node","Sprite","SpriteFrame","Texture2D","WechatManager","ccclass","property","LoginLayer","start","instance","initAutoSetting","url","setAvatar","clickShareEvent","spire","avatar","getComponent","loadRemote","ext","err","imageAsset","console","error","message","sp","texture","image","spriteFrame"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,Y,OAAAA,Y;AAAcC,MAAAA,S,OAAAA,S;AAAuBC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,M,OAAAA,M;AAAQC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,S,OAAAA,S;;AACnFC,MAAAA,a,iBAAAA,a;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBV,U;;4BAIjBW,U,WADZF,OAAO,CAAC,YAAD,C,UAELC,QAAQ,CAACN,IAAD,C,UACRM,QAAQ,CAACP,KAAD,C,2BAHX,MACaQ,UADb,SACgCT,SADhC,CAC0C;AAAA;AAAA;;AAAA;;AACI;AADJ;AAAA;;AAEI;AAElCU,QAAAA,KAAK,GAAS;AACtB;AAAA;AAAA,8CAAcC,QAAd,CAAuBC,eAAvB,CAAwCC,GAAD,IAAS;AAC9C,iBAAKC,SAAL,CAAeD,GAAf;AACD,WAFD;AAGD;;AAEME,QAAAA,eAAe,GAAG,CACvB;AACD,SAZuC,CAcxC;;;AACQD,QAAAA,SAAS,CAACD,GAAD,EAAY;AAC3B,cAAIG,KAAK,GAAG,KAAKC,MAAL,CAAYC,YAAZ,CAAyBf,MAAzB,CAAZ;AACAJ,UAAAA,YAAY,CAACoB,UAAb,CAAoCN,GAAG,GAAG,aAA1C,EAAyD;AAAEO,YAAAA,GAAG,EAAE;AAAP,WAAzD,EAA0E,CAACC,GAAD,EAAMC,UAAN,KAAqB;AAC7F,gBAAID,GAAJ,EAAS;AACP,qBAAOE,OAAO,CAACC,KAAR,CAAcH,GAAG,CAACI,OAAlB,CAAP;AACD;;AAED,gBAAIC,EAAE,GAAG,IAAItB,WAAJ,EAAT;AACA,gBAAIuB,OAAO,GAAG,IAAItB,SAAJ,EAAd;AACAsB,YAAAA,OAAO,CAACC,KAAR,GAAgBN,UAAhB;AACAI,YAAAA,EAAE,CAACC,OAAH,GAAaA,OAAb;AACAX,YAAAA,KAAK,CAACa,WAAN,GAAoBH,EAApB;AACD,WAVD;AAWD;;AA5BuC,O;;;;;iBACT,I;;;;;;;iBACK,I","sourcesContent":["import { _decorator, assetManager, Component, ImageAsset, Label, Node, Sprite, SpriteFrame, Texture2D } from 'cc';\r\nimport { WechatManager } from './WechatManager';\r\nconst { ccclass, property } = _decorator;\r\n\r\n\r\n@ccclass('LoginLayer')\r\nexport class LoginLayer extends Component {\r\n  @property(Node) avatar: Node = null;        // 头像\r\n  @property(Label) nameLabel: Label = null;   // 昵称\r\n\r\n  protected start(): void {\r\n    WechatManager.instance.initAutoSetting((url) => {\r\n      this.setAvatar(url);\r\n    });\r\n  }\r\n\r\n  public clickShareEvent() {\r\n    // WechatManager.instance.showShareMenu();\r\n  }\r\n\r\n  //设置头像\r\n  private setAvatar(url): void {\r\n    let spire = this.avatar.getComponent(Sprite);\r\n    assetManager.loadRemote<ImageAsset>(url + \"?aaa=aa.jpg\", { ext: '.jpg' }, (err, imageAsset) => {\r\n      if (err) {\r\n        return console.error(err.message);\r\n      }\r\n\r\n      let sp = new SpriteFrame();\r\n      let texture = new Texture2D();\r\n      texture.image = imageAsset;\r\n      sp.texture = texture\r\n      spire.spriteFrame = sp;\r\n    })\r\n  }\r\n}\r\n"]}