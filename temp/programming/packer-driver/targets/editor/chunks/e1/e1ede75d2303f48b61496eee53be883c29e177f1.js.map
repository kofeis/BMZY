{"version":3,"sources":["file:///D:/Tool/Project/WoChengYuTeNiu/assets/Script/Game/GameMode/PanelIdiom.ts"],"names":["_decorator","color","find","Label","Layout","Sprite","tween","Animation","v3","PanelTemplate","PlatformApi","Tool_Animation","Tool_Event","Tool_Other","Tool_UI","ccclass","property","PanelIdiom","KeyData","ValueStr","ValueIndex","ValueMoveing","TipState","PanelVictory","BtnBreak","BtnGet","GetState","onLoad","onEnable","IsInit","LoadPanel","GameStart","Resoure_Data","Music_Play","start","Promise","resolve","reject","BtnSetting","node","BtnTip","PanelTip","BtnTipClose","BtnNext","OnBtn","Game_Script","AnimSwitch","BtnSettingCall","Sound_Play","UpdatePanelSetting","BtnTipCall","active","Call","IsHint","PropNum","DataSet","UpdatePropUI","instance","showVideoAd","BtnTipCloseCall","BtnNextCall","BtnBreakCall","BtnGetCall","Grid","i","children","length","getChildByName","On_Event_TOUCH_END","Set_Btn_Event_Anim","Key","Value","undefined","PosStart","position","clone","PosEnd","Get_Target_Node_Local_Pos","Animation_Node_Move_Time","Char","getComponent","string","Result","GetResult","isValid","isComplete","j","by","scale","easing","Async_Wait","console","log","GameVictory","Set_Color_Sprite","call","to","InitData","IsContinue","OnMessage","IdiomLevel","Text","push","substring","Sort_Random","Component_On","updateLayout","Tween_Stop_Target","Set_UIOpacity","EntryNodes","scheduleOnce","Component_Off","Set_Pos_X","showInterstitialAd","IdiomScore","UpdateScene","grayscale","play","BtnTipLabel","BtnTipNull","GetData","Json","Load_Json","JsonData","Candidate","indexOf","some","Idiom","startsWith"],"mappings":"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","sourcesContent":["import { _decorator, color, Component, find, Label, Layout, Node, Sprite, tween, Animation, v3, Vec3 } from 'cc';\r\nimport { PanelTemplate } from './PanelTemplate';\r\nimport { PlatformApi } from '../../Other/SDK/PlatformApi';\r\nimport { Tool_Animation } from '../../Tool/Tool_Animation';\r\nimport { Tool_Event } from '../../Tool/Tool_Event';\r\nimport { Tool_Other } from '../../Tool/Tool_Other';\r\nimport { Tool_UI } from '../../Tool/Tool_UI';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('PanelIdiom')\r\nexport class PanelIdiom extends PanelTemplate {\r\n\r\n    /**Key数据 */\r\n    KeyData = null;\r\n\r\n    /**Value字符串 */\r\n    ValueStr: string = \"\";\r\n    /**Value索引 */\r\n    ValueIndex: number = 0;\r\n    /**是否移动 */\r\n    ValueMoveing: boolean = false;\r\n\r\n    /**提示状态 */\r\n    TipState: boolean = false;\r\n    /**胜利界面 */\r\n    PanelVictory: Node = null;\r\n\r\n    /**返回按钮 */\r\n    BtnBreak: Node = null;\r\n    /**获取答案按钮 */\r\n    BtnGet: Node = null;\r\n    /**答案状态 */\r\n    GetState: boolean = false;\r\n\r\n    async onLoad() {\r\n        super.onLoad();\r\n    }\r\n\r\n    async onEnable() {\r\n        if (!this.IsInit) {\r\n            await this.LoadPanel();\r\n        }\r\n        this.GameStart();\r\n        this.Resoure_Data.Music_Play(\"Audio/BGMGame\");\r\n    }\r\n\r\n    async start() {\r\n\r\n    }\r\n\r\n    /**加载面板 */\r\n    async LoadPanel(): Promise<void> {\r\n        return new Promise(async (resolve, reject) => {\r\n            /**绑定关键节点 */\r\n            this.BtnSetting = find(\"BtnSetting\", this.node);\r\n            this.BtnTip = find(\"BtnTip\", this.node);\r\n            this.PanelTip = find(\"PanelTip\", this.node);\r\n            this.BtnTipClose = find(\"BtnTipClose\", this.PanelTip);\r\n            this.PanelVictory = find(\"PanelVictory\", this.node);\r\n            this.BtnNext = find(\"BtnNext\", this.PanelVictory);\r\n            this.BtnBreak = find(\"BtnBreak\", this.PanelVictory);\r\n            this.BtnGet = find(\"BtnGet\", this.PanelTip);\r\n            /**注册按钮事件 */\r\n            await this.OnBtn(this.Game_Script.AnimSwitch);\r\n            this.IsInit = true;\r\n            resolve();\r\n        });\r\n    }\r\n\r\n    /**注册按钮 */\r\n    async OnBtn(AnimSwitch: boolean = false) {\r\n        /**设置按钮 */\r\n        const BtnSettingCall = () => {\r\n            this.Resoure_Data.Sound_Play(\"Audio/SoundBtn\");\r\n            this.Game_Script.UpdatePanelSetting(true);\r\n        }\r\n        /**提示按钮 */\r\n        const BtnTipCall = () => {\r\n            this.Resoure_Data.Sound_Play(\"Audio/SoundBtn\");\r\n            if (this.TipState) {\r\n                this.PanelTip.active = true;\r\n            } else {\r\n                const Call = () => {\r\n                    this.TipState = true;\r\n                    this.Game_Script.IsHint = true;\r\n                    this.PanelTip.active = true;\r\n                }\r\n                if (this.Game_Script.PropNum > 0) {\r\n                    this.Game_Script.PropNum--;\r\n                    this.Game_Script.DataSet();\r\n                    this.UpdatePropUI();\r\n                    Call();\r\n                } else {\r\n                    PlatformApi.instance.showVideoAd(async () => {\r\n                        Call();\r\n                    }, () => {\r\n\r\n                    });\r\n                }\r\n            }\r\n        }\r\n        /**关闭提示界面 */\r\n        const BtnTipCloseCall = () => {\r\n            this.Resoure_Data.Sound_Play(\"Audio/SoundBtn\");\r\n            this.PanelTip.active = false;\r\n        }\r\n        /**下一关按钮 */\r\n        const BtnNextCall = () => {\r\n            this.Resoure_Data.Sound_Play(\"Audio/SoundBtn\");\r\n            this.GameStart();\r\n        }\r\n        /**关闭按钮 */\r\n        const BtnBreakCall = () => {\r\n            this.Resoure_Data.Sound_Play(\"Audio/SoundBtn\");\r\n            this.node.active = false;\r\n        }\r\n        /**获取答案 */\r\n        const BtnGetCall = () => {\r\n            this.Resoure_Data.Sound_Play(\"Audio/SoundBtn\");\r\n            if (this.GetState) {\r\n                return;\r\n            }\r\n            this.GetState = true;\r\n            let Grid = find(\"Window/Grid\", this.PanelTip);\r\n            PlatformApi.instance.showVideoAd(async () => {\r\n                for (let i = 8; i < Grid.children.length; i++) {\r\n                    Grid.children[i].getChildByName(\"Lock\").active = false;\r\n                    Grid.children[i].getChildByName(\"Label\").active = !Grid.children[i].getChildByName(\"Lock\").active;\r\n                }\r\n            }, () => {\r\n\r\n            });\r\n        }\r\n        /**设置按钮事件 */\r\n        Tool_Event.instance.On_Event_TOUCH_END(this.BtnSetting, BtnSettingCall);\r\n        Tool_Event.instance.On_Event_TOUCH_END(this.BtnTip, BtnTipCall);\r\n        Tool_Event.instance.On_Event_TOUCH_END(this.BtnTipClose, BtnTipCloseCall);\r\n        Tool_Event.instance.On_Event_TOUCH_END(this.BtnNext, BtnNextCall);\r\n        Tool_Event.instance.On_Event_TOUCH_END(this.BtnBreak, BtnBreakCall);\r\n        Tool_Event.instance.On_Event_TOUCH_END(this.BtnGet, BtnGetCall);\r\n        Tool_Event.instance.On_Event_TOUCH_END(this.PanelTip.getChildByName(\"Bg\"), () => {\r\n            this.PanelTip.active = false;\r\n        });\r\n        /**设置按钮动画 */\r\n        Tool_Event.instance.Set_Btn_Event_Anim(this.BtnSetting, AnimSwitch);\r\n        Tool_Event.instance.Set_Btn_Event_Anim(this.BtnTip, AnimSwitch);\r\n        Tool_Event.instance.Set_Btn_Event_Anim(this.BtnTipClose, AnimSwitch);\r\n        Tool_Event.instance.Set_Btn_Event_Anim(this.BtnNext, AnimSwitch);\r\n        Tool_Event.instance.Set_Btn_Event_Anim(this.BtnBreak, AnimSwitch);\r\n        Tool_Event.instance.Set_Btn_Event_Anim(this.BtnGet, AnimSwitch);\r\n        let Key = find(\"Key\", this.node);\r\n        let Value = find(\"Value\", this.node);\r\n        for (let i = 0; i < Value.children.length; i++) {\r\n            Tool_Event.instance.On_Event_TOUCH_END(Value.children[i], () => {\r\n                if (this.ValueMoveing) {\r\n                    return;\r\n                }\r\n                if (this.KeyData == null || this.KeyData == undefined) {\r\n                    return;\r\n                }\r\n                if (Key.children[this.ValueIndex] == undefined) {\r\n                    return;\r\n                }\r\n\r\n                this.Resoure_Data.Sound_Play(\"Audio/Sound/Click\");\r\n\r\n                this.ValueMoveing = true;\r\n                let PosStart = Value.children[i].position.clone();\r\n\r\n                // console.error(Value.children[i], Key.children[this.ValueIndex], this.ValueIndex, Key);\r\n\r\n                let PosEnd = Tool_UI.instance.Get_Target_Node_Local_Pos(Value.children[i], Key.children[this.ValueIndex]);\r\n\r\n                Tool_Animation.instance.Animation_Node_Move_Time(Value.children[i], PosEnd, 0.25, async () => {\r\n                    let Char = Value.children[i].getChildByName(\"Label\").getComponent(Label).string;\r\n                    let Result = this.GetResult(Char);\r\n                    if (Result.isValid) {\r\n\r\n\r\n                        if (this.ValueIndex % 4 == 1) {\r\n                            /**首字正确 */\r\n                            this.Resoure_Data.Sound_Play(\"Audio/Sound/FirstCorrect\");\r\n                        }\r\n\r\n\r\n\r\n                        Key.children[this.ValueIndex - 1].getChildByName(\"Label\").getComponent(Label).string = Char;\r\n                        Value.children[i].active = false;\r\n                        if (Result.isComplete) {\r\n                            /**一组词音效 */\r\n                            this.Resoure_Data.Sound_Play(\"Audio/Sound/YiZuCi\");\r\n                            for (let j = 4; j > 0; j--) {\r\n                                tween(Key.children[this.ValueIndex - j])\r\n                                    .by(0.25, { scale: v3(0.5, 0.5, 0) }, { easing: \"quadOut\" })\r\n                                    .by(0.25, { scale: v3(-0.5, -0.5, 0) }, { easing: \"quadOut\" })\r\n                                    .start();\r\n                                await Tool_Animation.instance.Async_Wait(0.05);\r\n                            }\r\n                        } else {\r\n                            this.ValueMoveing = false;\r\n                        }\r\n                        await Tool_Animation.instance.Async_Wait(0.2);\r\n                        this.ValueMoveing = false;\r\n                        if (this.ValueIndex == Key.children.length) {\r\n                            console.log(\"成语胜利\");\r\n                            this.GameVictory();\r\n                        }\r\n                    } else {\r\n                        /**错误 */\r\n                        this.Resoure_Data.Sound_Play(\"Audio/Sound/Error\");\r\n                        Tool_UI.instance.Set_Color_Sprite(Value.children[i].getChildByName(\"Bg\"), color(255, 0, 0, 255));\r\n                        tween(Value.children[i])\r\n                            .by(0.05, { position: v3(-25, 0, 0) }, { easing: \"quadOut\" })\r\n                            .by(0.1, { position: v3(50, 0, 0) }, { easing: \"quadOut\" })\r\n                            .by(0.05, { position: v3(-25, 0, 0) }, { easing: \"quadOut\" })\r\n                            .call(() => {\r\n                                Tool_UI.instance.Set_Color_Sprite(Value.children[i].getChildByName(\"Bg\"), color(255, 227, 167, 255));\r\n                                Tool_Animation.instance.Animation_Node_Move_Time(Value.children[i], PosStart, 0.25, () => {\r\n                                    this.ValueMoveing = false;\r\n                                });\r\n                                tween(Value.children[i])\r\n                                    .to(0.25, { scale: v3(1, 1, 1) }, { easing: \"quadOut\" })\r\n                                    .start();\r\n                            })\r\n                            .start();\r\n                    }\r\n                });\r\n                tween(Value.children[i])\r\n                    .to(0.25, { scale: v3(0.8, 0.8, 1) }, { easing: \"quadOut\" })\r\n                    .start();\r\n            });\r\n        }\r\n    }\r\n\r\n    /**游戏开始 */\r\n    async GameStart() {\r\n        /**初始化数据 */\r\n        await this.InitData();\r\n        this.Game_Script.IsHint = false;\r\n        this.Game_Script.IsContinue = false;\r\n        this.PanelVictory.active = false;\r\n        this.PanelTip.active = false;\r\n        this.TipState = false;\r\n        this.GetState = false;\r\n        this.UpdatePropUI();\r\n        if (this.KeyData == null || this.KeyData == undefined) {\r\n            this.Game_Script.OnMessage(\"暂时没有新题目了\");\r\n            return;\r\n        }\r\n        this.node.getChildByName(\"Title\").getChildByName(\"Leves\").getComponent(Label).string = `成语大王·第${this.Game_Script.IdiomLevel + 1}关`;\r\n        let Text: string[] = [];\r\n        for (let i = 0; i < this.KeyData.length; i++) {\r\n            for (let j = 0; j < this.KeyData[i].length; j++) {\r\n                Text.push(this.KeyData[i].substring(j, j + 1));\r\n            }\r\n        }\r\n        /**初始化提示界面 */\r\n        let Grid = find(\"Window/Grid\", this.PanelTip);\r\n        for (let i = 0; i < Grid.children.length; i++) {\r\n            Grid.children[i].getChildByName(\"Label\").getComponent(Label).string = Text[i];\r\n            Grid.children[i].getChildByName(\"Lock\").active = i >= 8 ? true : false;\r\n            Grid.children[i].getChildByName(\"Label\").active = !Grid.children[i].getChildByName(\"Lock\").active;\r\n        }\r\n        Tool_Other.instance.Sort_Random(Text);\r\n        console.log(Text);\r\n        let Key = find(\"Key\", this.node);\r\n        let Value = find(\"Value\", this.node);\r\n        Tool_UI.instance.Component_On(Value, Layout);\r\n        Value.getComponent(Layout).updateLayout();\r\n        for (let i = 0; i < Key.children.length; i++) {\r\n            Tool_Animation.instance.Tween_Stop_Target(Key.children[i]);\r\n            Key.children[i].getChildByName(\"Label\").getComponent(Label).string = \"\";\r\n            Key.children[i].scale = v3(1, 1, 1);\r\n        }\r\n        for (let i = 0; i < Value.children.length; i++) {\r\n            Tool_Animation.instance.Tween_Stop_Target(Value.children[i]);\r\n            Value.children[i].getChildByName(\"Label\").getComponent(Label).string = Text[i];\r\n            Tool_UI.instance.Set_UIOpacity(Value.children[i], 255);\r\n            Tool_UI.instance.Set_Color_Sprite(Value.children[i].getChildByName(\"Bg\"), color(255, 227, 167, 255));\r\n            Value.children[i].scale = v3(1, 1, 1);\r\n            Value.children[i].active = true;\r\n            Tool_UI.instance.Set_UIOpacity(Value.children[i], 0);\r\n        }\r\n        /**入场节点 */\r\n        let EntryNodes: Node[] = [];\r\n        let PosEnd: Vec3[] = [];\r\n        this.scheduleOnce(async () => {\r\n            for (let i = 0; i < Value.children.length; i++) {\r\n                PosEnd.push(Value.children[i].position.clone());\r\n                EntryNodes.push(Value.children[i]);\r\n            }\r\n            Tool_UI.instance.Component_Off(Value, Layout);\r\n            for (let i = 0; i < EntryNodes.length; i++) {\r\n                Tool_UI.instance.Set_Pos_X(EntryNodes[i], -640);\r\n                Tool_UI.instance.Set_UIOpacity(EntryNodes[i], 255);\r\n                // Tool_UI.instance.Node_Index_Set(EntryNodes[i], 0);\r\n                Tool_Animation.instance.Animation_Node_Move_Time(EntryNodes[i], PosEnd[i], 0.25);\r\n                await Tool_Animation.instance.Async_Wait(0.05);\r\n            }\r\n        });\r\n    }\r\n\r\n    /**游戏胜利 */\r\n    async GameVictory() {\r\n        /**胜利音效 */\r\n        this.Resoure_Data.Sound_Play(\"Audio/Sound/Victory\");\r\n        PlatformApi.instance.showInterstitialAd();\r\n        this.Game_Script.IdiomLevel++;\r\n        this.Game_Script.IdiomScore += this.Game_Script.IsHint ? 1 : 2;\r\n        /**保存数据 */\r\n        this.Game_Script.DataSet();\r\n        this.Game_Script.UpdateScene();\r\n        find(\"WinBanner/Condition1/Correct\", this.PanelVictory).active = !this.Game_Script.IsHint\r\n        find(\"WinBanner/Condition1/Wrong\", this.PanelVictory).active = this.Game_Script.IsHint;\r\n        find(\"WinBanner/Stars/StarR\", this.PanelVictory).getComponent(Sprite).grayscale = this.Game_Script.IsHint;\r\n        find(\"Light\", this.PanelVictory).getComponent(Animation).play();\r\n        this.PanelVictory.active = true;\r\n    }\r\n\r\n    /**刷新道具UI */\r\n    UpdatePropUI() {\r\n        const BtnTipLabel = this.BtnTip.getChildByName(\"PropNum\").getChildByName(\"Label\").getComponent(Label);\r\n        const BtnTipNull = this.BtnTip.getChildByName(\"PropNum\").getChildByName(\"PropNumNull\");\r\n        BtnTipLabel.string = `${this.Game_Script.PropNum}`;\r\n        if (this.Game_Script.PropNum > 0) {\r\n            BtnTipNull.active = false;\r\n        } else {\r\n            BtnTipNull.active = true;\r\n        }\r\n    }\r\n\r\n\r\n    /**初始数据 */\r\n    async InitData() {\r\n        await this.GetData();\r\n        this.ValueStr = \"\";\r\n        this.ValueIndex = 0;\r\n        this.ValueMoveing = false;\r\n    }\r\n\r\n    /**获取数据 */\r\n    async GetData() {\r\n        const Json = await this.Resoure_Data.Load_Json(\"Json/dioms\");\r\n        const JsonData = Json[\"Data\"];\r\n        if (this.Game_Script.IdiomLevel >= JsonData.length) {\r\n            this.KeyData = JsonData[JsonData.length - 1];\r\n        } else {\r\n            this.KeyData = JsonData[this.Game_Script.IdiomLevel];\r\n        }\r\n    }\r\n\r\n    /**获取结果 */\r\n    GetResult(Char: string): { isValid: boolean, isComplete: boolean } {\r\n        // 拼接新字符形成候选字符串\r\n        const Candidate = this.ValueStr + Char;\r\n        // 检查是否是完整成语\r\n        const isComplete = this.KeyData.indexOf(Candidate);\r\n        // 检查是否有成语以这个候选字符串开头\r\n        const isValid = this.KeyData.some(Idiom => Idiom.startsWith(Candidate));\r\n        if (isValid) {\r\n            this.ValueIndex++;\r\n        }\r\n        if (isComplete !== -1) {\r\n            // 如果是完整成语，重置当前拼接状态\r\n            this.ValueStr = \"\";\r\n            return { isValid: true, isComplete: true };\r\n        } else if (isValid) {\r\n            // 如果是有效部分，更新当前拼接状态\r\n            this.ValueStr = Candidate;\r\n            return { isValid: true, isComplete: false };\r\n        } else {\r\n            // 无效输入，重置当前拼接状态\r\n            return { isValid: false, isComplete: false };\r\n        }\r\n    }\r\n\r\n\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n"]}