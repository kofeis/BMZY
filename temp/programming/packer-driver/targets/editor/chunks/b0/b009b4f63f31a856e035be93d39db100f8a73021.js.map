{"version":3,"sources":["file:///Users/jingfaxie/Documents/UGit/minigame3/Aby/assets/scripts/framework/utils/TweenUtil.ts"],"names":["Quat","tween","Tween","UIOpacity","v3","view","cocosUtil","tweenUtil","tweenScaleOut","node","time","endCb","to","scale","call","start","tweenHitScale","stopAllByTarget","getScale","x","y","tweenScaleShake","angle","quat1","fromEuler","quat2","quat3","rotation","tweenBubbling","setScale","union","repeatForever","getScreenMidWorldPos","size","getVisibleSize","pos","width","height","tweenUIShow","tweenBounceAction","scaleX","scaleY","easing","delay","tweenShakeNode","position","tweenFallDown","getPosition","setNodePositionY","tweenTopFadeOut","uiOpacity","getComponent","addComponent","opacity","by","onUpdate","target","ratio","tweenScaleEffect","tweenFlyToPos","Promise","resolve","reject","quat","getQuatByAngleZ","t1","t2","setRotation","parallel","tweenTopRightPao","callbck","dx1","dx2","dy1","dy2","Math","random","ds","tweenScaleIn","tweenScaleIn2","tweenBlink","cb","addComponentOnce","tweenRotate","da","tweenUpDown","dy","pos1","pos2","tweenFadeIn","tweenFadeOut","tweenBreath","tweenShake","delayTime","isRepeat","undefined","tweenRet","drawCurvePath","end","curveness","percent","cp","tweenArr","push","curx","cury","t","quadraticBezier","abs","sequence","p0","p1","p2","k"],"mappings":";;;;;;;;;;;;;;;;AAA6EA,MAAAA,I,OAAAA,I;AAAWC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,S,OAAAA,S;AAAoCC,MAAAA,E,OAAAA,E;AAAgBC,MAAAA,I,OAAAA,I;;AACjJC,MAAAA,S,iBAAAA,S;;;;;;;;;2BAEIC,S,GAAY;AAErBC,QAAAA,aAAa,CAACC,IAAD,EAAaC,IAAb,EAA2BC,KAA3B,EAA4C;AACrDV,UAAAA,KAAK,CAACQ,IAAD,CAAL,CAAYG,EAAZ,CAAeF,IAAf,EAAqB;AAAEG,YAAAA,KAAK,EAAET,EAAE,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP;AAAX,WAArB,EAA6CU,IAA7C,CAAkD,MAAM;AACpDH,YAAAA,KAAK;AACR,WAFD,EAEGI,KAFH;AAGH,SANoB;;AAQrB;AACAC,QAAAA,aAAa,CAACP,IAAD,EAAaC,IAAY,GAAG,GAA5B,EAAiCC,KAAjC,EAAmD;AAC5DT,UAAAA,KAAK,CAACe,eAAN,CAAsBR,IAAtB;AACA,cAAII,KAAK,GAAGJ,IAAI,CAACS,QAAL,EAAZ;AACAjB,UAAAA,KAAK,CAACQ,IAAD,CAAL,CACKG,EADL,CACQF,IADR,EACc;AAAEG,YAAAA,KAAK,EAAET,EAAE,CAACS,KAAK,CAACM,CAAN,GAAU,IAAX,EAAiBN,KAAK,CAACO,CAAN,GAAU,GAA3B,EAAgC,CAAhC;AAAX,WADd,EAEKR,EAFL,CAEQF,IAAI,GAAG,CAFf,EAEkB;AAAEG,YAAAA,KAAK,EAAET,EAAE,CAACS,KAAK,CAACM,CAAP,EAAUN,KAAK,CAACO,CAAN,GAAU,GAApB,EAAyB,CAAzB;AAAX,WAFlB,EAGKR,EAHL,CAGQF,IAAI,GAAG,CAHf,EAGkB;AAAEG,YAAAA,KAAK,EAAET,EAAE,CAACS,KAAK,CAACM,CAAN,GAAU,IAAX,EAAiBN,KAAK,CAACO,CAAN,GAAU,GAA3B,EAAgC,CAAhC;AAAX,WAHlB,EAIKR,EAJL,CAIQF,IAJR,EAIc;AAAEG,YAAAA,KAAK,EAAET,EAAE,CAACS,KAAK,CAACM,CAAP,EAAUN,KAAK,CAACO,CAAhB,EAAmB,CAAnB;AAAX,WAJd,EAKKN,IALL,CAKU,MAAM;AACR,gBAAIH,KAAJ,EAAW;AACPA,cAAAA,KAAK;AACR;AACJ,WATL,EAUKI,KAVL;AAWH,SAvBoB;;AAyBrBM,QAAAA,eAAe,CAACZ,IAAD,EAAaE,KAAb,EAA+B;AAC1C,cAAIW,KAAK,GAAG,EAAZ;AACA,cAAIC,KAAK,GAAG,IAAIvB,IAAJ,EAAZ;AACAA,UAAAA,IAAI,CAACwB,SAAL,CAAeD,KAAf,EAAsB,CAAtB,EAAyB,CAAzB,EAA4BD,KAA5B;AACA,cAAIG,KAAK,GAAG,IAAIzB,IAAJ,EAAZ;AACAA,UAAAA,IAAI,CAACwB,SAAL,CAAeC,KAAf,EAAsB,CAAtB,EAAyB,CAAzB,EAA4B,CAACH,KAA7B;AACA,cAAII,KAAK,GAAG,IAAI1B,IAAJ,EAAZ;AACAA,UAAAA,IAAI,CAACwB,SAAL,CAAeE,KAAf,EAAsB,CAAtB,EAAyB,CAAzB,EAA4B,CAA5B;AAEAzB,UAAAA,KAAK,CAACQ,IAAD,CAAL,CACKG,EADL,CACQ,GADR,EACa;AAAEC,YAAAA,KAAK,EAAET,EAAE,CAAC,GAAD,EAAM,GAAN,EAAW,CAAX;AAAX,WADb,EAEKQ,EAFL,CAEQ,GAFR,EAEa;AAAEe,YAAAA,QAAQ,EAAEJ;AAAZ,WAFb,EAGKX,EAHL,CAGQ,GAHR,EAGa;AAAEe,YAAAA,QAAQ,EAAEF;AAAZ,WAHb,EAIKb,EAJL,CAIQ,GAJR,EAIa;AAAEe,YAAAA,QAAQ,EAAED;AAAZ,WAJb,EAKKd,EALL,CAKQ,GALR,EAKa;AAAEC,YAAAA,KAAK,EAAET,EAAE,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP;AAAX,WALb,EAMKU,IANL,CAMU,MAAM;AACR,gBAAIH,KAAJ,EAAW;AACPA,cAAAA,KAAK;AACR;AACJ,WAVL,EAUOI,KAVP;AAWH,SA7CoB;;AA+CrB;AACAa,QAAAA,aAAa,CAACnB,IAAD,EAAa;AACtBP,UAAAA,KAAK,CAACe,eAAN,CAAsBR,IAAtB;AACAA,UAAAA,IAAI,CAACoB,QAAL,CAAczB,EAAE,CAAC,GAAD,EAAM,GAAN,EAAW,CAAX,CAAhB;AACAH,UAAAA,KAAK,CAACQ,IAAD,CAAL,CAAYG,EAAZ,CAAe,GAAf,EAAoB;AAChBC,YAAAA,KAAK,EAAET,EAAE,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP;AADO,WAApB,EAEGQ,EAFH,CAEM,GAFN,EAEW;AACPC,YAAAA,KAAK,EAAET,EAAE,CAAC,GAAD,EAAM,GAAN,EAAW,CAAX;AADF,WAFX,EAIG0B,KAJH,GAIWC,aAJX,GAI2BhB,KAJ3B;AAKH,SAxDoB;;AA0DrBiB,QAAAA,oBAAoB,GAAG;AACnB,cAAIC,IAAI,GAAG5B,IAAI,CAAC6B,cAAL,EAAX;AACA,cAAIC,GAAG,GAAG/B,EAAE,CAAC6B,IAAI,CAACG,KAAL,GAAa,GAAd,EAAmBH,IAAI,CAACI,MAAL,GAAc,GAAjC,EAAsC,CAAtC,CAAZ;AAEA,iBAAOF,GAAP;AACH,SA/DoB;;AAiErBG,QAAAA,WAAW,CAAC7B,IAAD,EAAa;AACpBP,UAAAA,KAAK,CAACe,eAAN,CAAsBR,IAAtB;AACA,cAAII,KAAK,GAAGJ,IAAI,CAACS,QAAL,EAAZ;AACAT,UAAAA,IAAI,CAACoB,QAAL,CAAczB,EAAE,CAAC,GAAD,EAAM,GAAN,EAAW,CAAX,CAAhB;AACAH,UAAAA,KAAK,CAACQ,IAAD,CAAL,CAAYG,EAAZ,CAAe,GAAf,EAAoB;AAChBC,YAAAA,KAAK,EAAEA;AADS,WAApB,EAEGE,KAFH;AAGH,SAxEoB;;AA0ErB;AACAwB,QAAAA,iBAAiB,CAAC9B,IAAD,EAAa;AAC1BP,UAAAA,KAAK,CAACe,eAAN,CAAsBR,IAAtB;AACA,cAAI+B,MAAM,GAAG/B,IAAI,CAACS,QAAL,GAAgBC,CAA7B;AACA,cAAIsB,MAAM,GAAGhC,IAAI,CAACS,QAAL,GAAgBE,CAA7B;AACAnB,UAAAA,KAAK,CAACQ,IAAD,CAAL,CACKG,EADL,CACQ,IADR,EACc;AAAEC,YAAAA,KAAK,EAAET,EAAE,CAACoC,MAAM,GAAG,GAAV,EAAeC,MAAM,GAAG,GAAxB,EAA6B,CAA7B;AAAX,WADd,EAC4D;AAAEC,YAAAA,MAAM,EAAE;AAAV,WAD5D,EAEK9B,EAFL,CAEQ,IAFR,EAEc;AAAEC,YAAAA,KAAK,EAAET,EAAE,CAACoC,MAAM,GAAG,GAAV,EAAeC,MAAM,GAAG,GAAxB,EAA6B,CAA7B;AAAX,WAFd,EAE4D;AAAEC,YAAAA,MAAM,EAAE;AAAV,WAF5D,EAGK9B,EAHL,CAGQ,GAHR,EAGa;AAAEC,YAAAA,KAAK,EAAET,EAAE,CAACoC,MAAD,EAASC,MAAT,EAAiB,CAAjB;AAAX,WAHb,EAG+C;AAAEC,YAAAA,MAAM,EAAE;AAAV,WAH/C,EAIKC,KAJL,CAIW,GAJX,EAKKb,KALL,GAMKC,aANL,GAOKhB,KAPL;AAQH,SAvFoB;;AAyFrB;AACA6B,QAAAA,cAAc,CAACnC,IAAD,EAAa;AACvB,cAAIC,IAAI,GAAG,GAAX;AACAT,UAAAA,KAAK,CAACQ,IAAD,CAAL,CACKG,EADL,CACQF,IADR,EACc;AAAEmC,YAAAA,QAAQ,EAAEzC,EAAE,CAAC,CAAD,EAAI,CAAC,CAAL;AAAd,WADd,EAEKQ,EAFL,CAEQF,IAFR,EAEc;AAAEmC,YAAAA,QAAQ,EAAEzC,EAAE,CAAC,CAAC,CAAF,EAAK,CAAL;AAAd,WAFd,EAGKQ,EAHL,CAGQF,IAHR,EAGc;AAAEmC,YAAAA,QAAQ,EAAEzC,EAAE,CAAC,CAAD,EAAI,CAAJ;AAAd,WAHd,EAIKQ,EAJL,CAIQF,IAJR,EAIc;AAAEmC,YAAAA,QAAQ,EAAEzC,EAAE,CAAC,CAAC,CAAF,EAAK,CAAC,CAAN;AAAd,WAJd,EAKKQ,EALL,CAKQF,IALR,EAKc;AAAEmC,YAAAA,QAAQ,EAAEzC,EAAE,CAAC,CAAD,EAAI,CAAJ;AAAd,WALd,EAMKW,KANL;AAOH,SAnGoB;;AAqGrB;AACA+B,QAAAA,aAAa,CAACrC,IAAD,EAAaE,KAAb,EAA+B;AACxCF,UAAAA,IAAI,CAACoB,QAAL,CAAc,GAAd,EAAmB,GAAnB,EAAwB,CAAxB;AACA,cAAIM,GAAG,GAAG1B,IAAI,CAACsC,WAAL,EAAV;AACA;AAAA;AAAA,sCAAUC,gBAAV,CAA2BvC,IAA3B,EAAiC0B,GAAG,CAACf,CAAJ,GAAQ,GAAzC;AACAnB,UAAAA,KAAK,CAACQ,IAAD,CAAL,CAAYG,EAAZ,CAAe,GAAf,EAAoB;AAChBiC,YAAAA,QAAQ,EAAEV;AADM,WAApB,EAEGvB,EAFH,CAEM,GAFN,EAEW;AACPC,YAAAA,KAAK,EAAET,EAAE,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP;AADF,WAFX,EAIGU,IAJH,CAIQ,MAAM;AACV,gBAAIH,KAAJ,EAAW;AACPA,cAAAA,KAAK;AACR;AACJ,WARD,EAQGI,KARH;AASH,SAnHoB;;AAqHrB;AACAkC,QAAAA,eAAe,CAACxC,IAAD,EAAaE,KAAb,EAA+B;AAC1C,cAAIuC,SAAS,GAAGzC,IAAI,CAAC0C,YAAL,CAAkBhD,SAAlB,CAAhB;;AACA,cAAI,CAAC+C,SAAL,EAAgB;AACZA,YAAAA,SAAS,GAAGzC,IAAI,CAAC2C,YAAL,CAAkBjD,SAAlB,CAAZ;AACH;;AACD+C,UAAAA,SAAS,CAACG,OAAV,GAAoB,GAApB;AACA5C,UAAAA,IAAI,CAACoB,QAAL,CAAc,CAAd,EAAiB,CAAjB,EAAoB,CAApB;AACA5B,UAAAA,KAAK,CAACQ,IAAD,CAAL,CACKG,EADL,CACQ,IADR,EACc;AACNC,YAAAA,KAAK,EAAET,EAAE,CAAC,GAAD,EAAM,GAAN,EAAW,CAAX;AADH,WADd,EAIKQ,EAJL,CAIQ,GAJR,EAIa;AACLC,YAAAA,KAAK,EAAET,EAAE,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP;AADJ,WAJb,EAOKkD,EAPL,CAOQ,GAPR,EAOa;AACLT,YAAAA,QAAQ,EAAEzC,EAAE,CAAC,CAAD,EAAI,EAAJ;AADP,WAPb,EAUKkD,EAVL,CAUQ,CAVR,EAUW;AACHT,YAAAA,QAAQ,EAAEzC,EAAE,CAAC,CAAD,EAAI,CAAJ;AADT,WAVX,EAYO;AACCmD,YAAAA,QAAQ,CAACC,MAAD,EAAeC,KAAf,EAA8B;AAClCP,cAAAA,SAAS,CAACG,OAAV,GAAoB,CAAC,IAAII,KAAL,IAAc,GAAlC;AACH;;AAHF,WAZP,EAgBO3B,KAhBP,GAgBehB,IAhBf,CAgBoB,MAAM;AAClB,gBAAIH,KAAJ,EAAW;AACPA,cAAAA,KAAK;AACR;AACJ,WApBL,EAoBOI,KApBP;AAqBH,SAlJoB;;AAoJrB;AACA2C,QAAAA,gBAAgB,CAACjD,IAAD,EAAaC,IAAb,EAA4BC,KAA5B,EAA8C;AAC1D,cAAI,CAACD,IAAL,EAAW;AACPA,YAAAA,IAAI,GAAG,GAAP;AACH;;AACDD,UAAAA,IAAI,CAACoB,QAAL,CAAc,CAAd,EAAiB,CAAjB,EAAoB,CAApB;AACA5B,UAAAA,KAAK,CAACQ,IAAD,CAAL,CAAYG,EAAZ,CAAeF,IAAf,EAAqB;AACjBG,YAAAA,KAAK,EAAET,EAAE,CAAC,GAAD,EAAM,GAAN,EAAW,CAAX;AADQ,WAArB,EAEGQ,EAFH,CAEMF,IAFN,EAEY;AACRG,YAAAA,KAAK,EAAET,EAAE,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP;AADD,WAFZ,EAIGU,IAJH,CAIQ,MAAM;AACV,gBAAIH,KAAJ,EAAW;AACPA,cAAAA,KAAK;AACR;AACJ,WARD,EAQGI,KARH;AASH,SAnKoB;;AAqKrB;AACA,cAAM4C,aAAN,CAAoBlD,IAApB,EAAgC0B,GAAhC,EAA2CxB,KAA3C,EAA6D;AACzDT,UAAAA,KAAK,CAACe,eAAN,CAAsBR,IAAtB;AAEA,iBAAO,IAAImD,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACpC,gBAAIpD,IAAI,GAAG,GAAX;AAEA,gBAAIY,KAAK,GAAG,GAAZ;AACA,gBAAIyC,IAAI,GAAG;AAAA;AAAA,wCAAUC,eAAV,CAA0B1C,KAA1B,CAAX;AAEA,gBAAI2C,EAAE,GAAGhE,KAAK,CAACQ,IAAD,CAAL,CAAYG,EAAZ,CAAeF,IAAf,EAAqB;AAC1BmC,cAAAA,QAAQ,EAAEV;AADgB,aAArB,CAAT;AAIA,gBAAI+B,EAAE,GAAGjE,KAAK,CAACQ,IAAD,CAAL,CAAY6C,EAAZ,CAAe5C,IAAf,EAAqB;AAC1BiB,cAAAA,QAAQ,EAAEoC;AADgB,aAArB,EAEN;AACCrB,cAAAA,MAAM,EAAE,SADT;;AAECa,cAAAA,QAAQ,CAACC,MAAD,EAAeC,KAAf,EAA8B;AAClChD,gBAAAA,IAAI,CAAC0D,WAAL,CAAiB;AAAA;AAAA,4CAAUH,eAAV,CAA0B1C,KAAK,GAAGmC,KAAlC,CAAjB;AACH;;AAJF,aAFM,CAAT;AASAxD,YAAAA,KAAK,CAACQ,IAAD,CAAL,CAAY2D,QAAZ,CAAqBH,EAArB,EAAyBC,EAAzB,EAA6BpD,IAA7B,CAAkC,MAAM;AACpCL,cAAAA,IAAI,CAAC0D,WAAL,CAAiB;AAAA;AAAA,0CAAUH,eAAV,CAA0B,CAA1B,CAAjB,EADoC,CAEpC;;AACAH,cAAAA,OAAO;;AACP,kBAAIlD,KAAJ,EAAW;AACPA,gBAAAA,KAAK;AACR;AACJ,aAPD,EAOGI,KAPH;AAQH,WA3BM,CAAP;AA4BH,SArMoB;;AAuMrB;AACAsD,QAAAA,gBAAgB,CAAC5D,IAAD,EAAa6D,OAAb,EAAiC;AAC7C,cAAIC,GAAG,GAAG,EAAV;AACA,cAAIC,GAAG,GAAG,EAAV;AACA,cAAIC,GAAG,GAAG,GAAV;AACA,cAAIC,GAAG,GAAG,CAAC,EAAX;AACAH,UAAAA,GAAG,IAAII,IAAI,CAACC,MAAL,KAAgB,EAAvB;AACAnE,UAAAA,IAAI,CAACoB,QAAL,CAAczB,EAAE,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAAhB;AACAH,UAAAA,KAAK,CAACQ,IAAD,CAAL,CACK6C,EADL,CACQ,GADR,EACa;AACLT,YAAAA,QAAQ,EAAEzC,EAAE,CAACmE,GAAD,EAAME,GAAN;AADP,WADb,EAGO;AACC/B,YAAAA,MAAM,EAAE,SADT;AACoBa,YAAAA,QAAQ,EAAE,CAACC,MAAD,EAAeC,KAAf,KAAiC;AAC1D,kBAAIoB,EAAE,GAAG,MAAMpB,KAAf;AACAhD,cAAAA,IAAI,CAACoB,QAAL,CAAczB,EAAE,CAAC,IAAIyE,EAAL,EAAS,IAAIA,EAAb,EAAiB,CAAjB,CAAhB;AACH;AAJF,WAHP,EASKvB,EATL,CASQ,GATR,EASa;AACLT,YAAAA,QAAQ,EAAEzC,EAAE,CAACoE,GAAD,EAAME,GAAN;AADP,WATb,EAWO;AACChC,YAAAA,MAAM,EAAE,QADT;AACmBa,YAAAA,QAAQ,EAAE,CAACC,MAAD,EAAeC,KAAf,KAAiC;AACzD,kBAAIoB,EAAE,GAAG,MAAMpB,KAAf;AACAhD,cAAAA,IAAI,CAACoB,QAAL,CAAczB,EAAE,CAAC,MAAMyE,EAAP,EAAW,MAAMA,EAAjB,EAAqB,CAArB,CAAhB;AACH;AAJF,WAXP,EAiBK/C,KAjBL,GAkBKhB,IAlBL,CAkBU,MAAM;AACR,gBAAIwD,OAAJ,EAAa;AACTA,cAAAA,OAAO;AACV;AACJ,WAtBL,EAsBOvD,KAtBP;AAuBH,SAtOoB;;AAwOrB;AACA+D,QAAAA,YAAY,CAACrE,IAAD,EAAaC,IAAb,EAA4BC,KAA5B,EAA8C;AACtD,cAAI,CAACD,IAAL,EAAW;AACPA,YAAAA,IAAI,GAAG,GAAP;AACH;;AACDD,UAAAA,IAAI,CAACoB,QAAL,CAAc,CAAd,EAAiB,CAAjB,EAAoB,CAApB;AACA5B,UAAAA,KAAK,CAACQ,IAAD,CAAL,CAAYG,EAAZ,CAAeF,IAAf,EAAqB;AACjBG,YAAAA,KAAK,EAAET,EAAE,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP;AADQ,WAArB,EAEGU,IAFH,CAEQ,MAAM;AACV,gBAAIH,KAAJ,EAAW;AACPA,cAAAA,KAAK;AACR;AACJ,WAND,EAMGI,KANH;AAOH,SArPoB;;AAuPrB;AACAgE,QAAAA,aAAa,CAACtE,IAAD,EAAaC,IAAb,EAA4BC,KAA5B,EAA8C;AACvD,cAAI,CAACD,IAAL,EAAW;AACPA,YAAAA,IAAI,GAAG,GAAP;AACH;;AACDD,UAAAA,IAAI,CAACoB,QAAL,CAAc,CAAd,EAAiB,CAAjB,EAAoB,CAApB;AACA5B,UAAAA,KAAK,CAACQ,IAAD,CAAL,CAAYG,EAAZ,CAAeF,IAAf,EAAqB;AACjBG,YAAAA,KAAK,EAAET,EAAE,CAAC,GAAD,EAAM,GAAN,EAAW,CAAX;AADQ,WAArB,EAEGQ,EAFH,CAEMF,IAAI,GAAG,CAFb,EAEgB;AACZG,YAAAA,KAAK,EAAET,EAAE,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP;AADG,WAFhB,EAIG0B,KAJH,GAIWhB,IAJX,CAIgB,MAAM;AAClB,gBAAIH,KAAJ,EAAW;AACPA,cAAAA,KAAK;AACR;AACJ,WARD,EAQGI,KARH;AASH,SAtQoB;;AAwQrB;AACAiE,QAAAA,UAAU,CAACvE,IAAD,EAAaC,IAAb,EAA4BuE,EAA5B,EAA2C;AACjD,cAAI,CAACvE,IAAL,EAAW;AACPA,YAAAA,IAAI,GAAG,GAAP;AACH;;AACD,cAAIwC,SAAS,GAAG;AAAA;AAAA,sCAAUgC,gBAAV,CAA2BzE,IAA3B,EAAiCN,SAAjC,CAAhB;AACA+C,UAAAA,SAAS,CAACG,OAAV,GAAoB,GAApB;AACApD,UAAAA,KAAK,CAACiD,SAAD,CAAL,CAAiBtC,EAAjB,CAAoBF,IAApB,EAA0B;AACtB2C,YAAAA,OAAO,EAAE;AADa,WAA1B,EAEGzC,EAFH,CAEMF,IAFN,EAEY;AACR2C,YAAAA,OAAO,EAAE;AADD,WAFZ,EAIGvC,IAJH,CAIQ,MAAM;AACV,gBAAImE,EAAJ,EAAQ;AACJA,cAAAA,EAAE;AACL;AACJ,WARD,EAQGnD,KARH,GAQWC,aARX,GAQ2BhB,KAR3B;AASH,SAxRoB;;AA0RrB;AACAoE,QAAAA,WAAW,CAAC1E,IAAD,EAAaC,IAAb,EAA4B;AACnC,cAAI,CAACA,IAAL,EAAW;AACPA,YAAAA,IAAI,GAAG,CAAP;AACH;;AACD,cAAIY,KAAK,GAAG,GAAZ;AACA,cAAIyC,IAAI,GAAG;AAAA;AAAA,sCAAUC,eAAV,CAA0B1C,KAA1B,CAAX;AACArB,UAAAA,KAAK,CAACQ,IAAD,CAAL,CAAY6C,EAAZ,CAAe5C,IAAf,EAAqB;AAAEiB,YAAAA,QAAQ,EAAEoC;AAAZ,WAArB,EAAyC;AACrCrB,YAAAA,MAAM,EAAE,QAD6B;AAErCa,YAAAA,QAAQ,EAAE,CAACC,MAAD,EAAeC,KAAf,KAAiC;AACvC,kBAAI2B,EAAE,GAAG9D,KAAK,GAAGmC,KAAjB;AACAD,cAAAA,MAAM,CAACW,WAAP,CAAmB;AAAA;AAAA,0CAAUH,eAAV,CAA0BoB,EAA1B,CAAnB;AACH;AALoC,WAAzC,EAMGrD,aANH,GAMmBhB,KANnB;AAOH,SAxSoB;;AA0SrB;AACAsE,QAAAA,WAAW,CAAC5E,IAAD,EAAa6E,EAAb,EAA0B5E,IAA1B,EAAyC;AAChD,cAAI,CAAC4E,EAAL,EAAS;AACLA,YAAAA,EAAE,GAAG,CAAL;AACH;;AACD,cAAI,CAAC5E,IAAL,EAAW;AACPA,YAAAA,IAAI,GAAG,GAAP;AACH;;AACD,cAAI6E,IAAI,GAAG9E,IAAI,CAACsC,WAAL,EAAX;AACAwC,UAAAA,IAAI,CAACnE,CAAL,IAAUkE,EAAV;AACA,cAAIE,IAAI,GAAG/E,IAAI,CAACsC,WAAL,EAAX;AACA9C,UAAAA,KAAK,CAACQ,IAAD,CAAL,CAAYG,EAAZ,CAAeF,IAAf,EAAqB;AACjBmC,YAAAA,QAAQ,EAAE0C;AADO,WAArB,EAEG3E,EAFH,CAEMF,IAFN,EAEY;AACRmC,YAAAA,QAAQ,EAAE2C;AADF,WAFZ,EAIG1D,KAJH,GAIWC,aAJX,GAI2BhB,KAJ3B;AAKH,SA1ToB;;AA4TrB;AACA,cAAM0E,WAAN,CAAkBhF,IAAlB,EAA8BC,IAA9B,EAA6CuE,EAA7C,EAA4D;AACxD,iBAAO,IAAIrB,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACpC,gBAAI,CAACpD,IAAL,EAAW;AACPA,cAAAA,IAAI,GAAG,CAAP;AACH;;AACD,gBAAIwC,SAAS,GAAG;AAAA;AAAA,wCAAUgC,gBAAV,CAA2BzE,IAA3B,EAAiCN,SAAjC,CAAhB;AACA+C,YAAAA,SAAS,CAACG,OAAV,GAAoB,CAApB;AACApD,YAAAA,KAAK,CAACiD,SAAD,CAAL,CAAiBtC,EAAjB,CAAoBF,IAApB,EAA0B;AACtB2C,cAAAA,OAAO,EAAE;AADa,aAA1B,EAEGvC,IAFH,CAEQ,MAAM;AACV;AACA+C,cAAAA,OAAO;;AACP,kBAAIoB,EAAJ,EAAQ;AACJA,gBAAAA,EAAE;AACL;AACJ,aARD,EAQGlE,KARH;AASH,WAfM,CAAP;AAgBH,SA9UoB;;AAgVrB;AACA,cAAM2E,YAAN,CAAmBjF,IAAnB,EAA+BC,IAA/B,EAA8CuE,EAA9C,EAA6D;AACzD,iBAAO,IAAIrB,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACpC,gBAAI,CAACpD,IAAL,EAAW;AACPA,cAAAA,IAAI,GAAG,GAAP;AACH;;AACD,gBAAIwC,SAAS,GAAG;AAAA;AAAA,wCAAUgC,gBAAV,CAA2BzE,IAA3B,EAAiCN,SAAjC,CAAhB;AACA+C,YAAAA,SAAS,CAACG,OAAV,GAAoB,GAApB;AACApD,YAAAA,KAAK,CAACiD,SAAD,CAAL,CAAiBtC,EAAjB,CAAoBF,IAApB,EAA0B;AACtB2C,cAAAA,OAAO,EAAE;AADa,aAA1B,EAEGvC,IAFH,CAEQ,MAAM;AACV;AACA+C,cAAAA,OAAO;;AACP,kBAAIoB,EAAJ,EAAQ;AACJA,gBAAAA,EAAE;AACL;AACJ,aARD,EAQGlE,KARH;AASH,WAfM,CAAP;AAgBH,SAlWoB;;AAoWrB;AACJ;AACA;AACA;AACA;AACA;AACI4E,QAAAA,WAAW,CAAClF,IAAD,EAAaC,IAAb,EAA4BG,KAA5B,EAA4C;AACnD,cAAI,CAACH,IAAL,EAAW;AACPA,YAAAA,IAAI,GAAG,GAAP;AACH;;AACD,cAAI,CAACG,KAAL,EAAY;AACRA,YAAAA,KAAK,GAAG,GAAR;AACH;;AAEDZ,UAAAA,KAAK,CAACQ,IAAD,CAAL,CACKG,EADL,CAEQF,IAFR,EAEc;AACNG,YAAAA,KAAK,EAAET,EAAE,CAACS,KAAD,EAAQA,KAAR,EAAe,CAAf;AADH,WAFd,EAKKD,EALL,CAMQF,IANR,EAMc;AACNG,YAAAA,KAAK,EAAET,EAAE,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP;AADH,WANd,EASM0B,KATN,GAScC,aATd,GAS8BhB,KAT9B;AAUH,SA5XoB;;AA8XrB;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACI6E,QAAAA,UAAU,CAACnF,IAAD,EAAaC,IAAb,EAA4BiB,QAA5B,EAA+CkE,SAA/C,EAAmEC,QAAnE,EAAuF;AAC7F5F,UAAAA,KAAK,CAACe,eAAN,CAAsBR,IAAtB;;AAEA,cAAI,CAACC,IAAL,EAAW;AACPA,YAAAA,IAAI,GAAG,GAAP;AACH;;AACD,cAAI,CAACiB,QAAL,EAAe;AACXA,YAAAA,QAAQ,GAAG,CAAX;AACH;;AACD,cAAIkE,SAAS,IAAIE,SAAjB,EAA4B;AACxBF,YAAAA,SAAS,GAAGnF,IAAI,GAAG,CAAnB;AACH;;AAED,cAAIa,KAAW,GAAG,IAAIvB,IAAJ,EAAlB;AACAA,UAAAA,IAAI,CAACwB,SAAL,CAAeD,KAAf,EAAsB,CAAtB,EAAyB,CAAzB,EAA4BI,QAA5B;AAEA,cAAIF,KAAW,GAAG,IAAIzB,IAAJ,EAAlB;AACAA,UAAAA,IAAI,CAACwB,SAAL,CAAeC,KAAf,EAAsB,CAAtB,EAAyB,CAAzB,EAA4B,CAACE,QAA7B;AAEA,cAAID,KAAW,GAAG,IAAI1B,IAAJ,EAAlB;AACAA,UAAAA,IAAI,CAACwB,SAAL,CAAeE,KAAf,EAAsB,CAAtB,EAAyB,CAAzB,EAA4B,CAA5B;AAEA,cAAIsE,QAAQ,GAAG/F,KAAK,CAACQ,IAAD,CAAL,CAAYG,EAAZ,CAAeF,IAAf,EAAqB;AAChCiB,YAAAA,QAAQ,EAAEJ;AADsB,WAArB,EAEZX,EAFY,CAETF,IAAI,GAAG,CAFE,EAEC;AACZiB,YAAAA,QAAQ,EAAEF;AADE,WAFD,EAIZb,EAJY,CAITF,IAJS,EAIH;AACRiB,YAAAA,QAAQ,EAAED;AADF,WAJG,CAAf;;AAQA,cAAIoE,QAAQ,IAAIC,SAAhB,EAA2B;AACvBC,YAAAA,QAAQ,CAACrD,KAAT,CAAekD,SAAf,EAA0B/D,KAA1B,GAAkCC,aAAlC,GAAkDhB,KAAlD;AACH,WAFD,MAEO;AACHiF,YAAAA,QAAQ,CAACjF,KAAT;AACH;AAEJ,SA1aoB;;AA4arB;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACIkF,QAAAA,aAAa,CAACxF,IAAD,EAAOM,KAAP,EAAcmF,GAAd,EAAmBC,SAAnB,EAA8BC,OAA9B,EAAuCzD,KAAK,GAAG,CAA/C,EAAkD;AAE3D,cAAI0D,EAAE,GAAG,CACL,CAACtF,KAAK,CAAC,CAAD,CAAL,GAAWmF,GAAG,CAAC,CAAD,CAAf,IAAsB,CAAtB,GAA0B,CAACnF,KAAK,CAAC,CAAD,CAAL,GAAWmF,GAAG,CAAC,CAAD,CAAf,IAAsBC,SAD3C,EAEL,CAACpF,KAAK,CAAC,CAAD,CAAL,GAAWmF,GAAG,CAAC,CAAD,CAAf,IAAsB,CAAtB,GAA0B,CAACA,GAAG,CAAC,CAAD,CAAH,GAASnF,KAAK,CAAC,CAAD,CAAf,IAAsBoF,SAF3C,CAAT,CAF2D,CAO3D;;AACA,cAAIG,QAAQ,GAAG,EAAf;AACAA,UAAAA,QAAQ,CAACC,IAAT,CAActG,KAAK,CAACQ,IAAD,CAAL,CAAYkC,KAAZ,CAAkBA,KAAlB,CAAd;AACA,cAAI6D,IAAI,GAAGzF,KAAK,CAAC,CAAD,CAAhB;AACA,cAAI0F,IAAI,GAAG1F,KAAK,CAAC,CAAD,CAAhB;;AACA,eAAK,IAAI2F,CAAC,GAAG,CAAb,EAAgBA,CAAC,IAAIN,OAAO,GAAG,GAA/B,EAAoCM,CAAC,IAAI,IAAzC,EAA+C;AAE3C,gBAAIvF,CAAC,GAAG,KAAKwF,eAAL,CAAqB5F,KAAK,CAAC,CAAD,CAA1B,EAA+BsF,EAAE,CAAC,CAAD,CAAjC,EAAsCH,GAAG,CAAC,CAAD,CAAzC,EAA8CQ,CAA9C,CAAR;AACA,gBAAItF,CAAC,GAAG,KAAKuF,eAAL,CAAqB5F,KAAK,CAAC,CAAD,CAA1B,EAA+BsF,EAAE,CAAC,CAAD,CAAjC,EAAsCH,GAAG,CAAC,CAAD,CAAzC,EAA8CQ,CAA9C,CAAR;AACA,gBAAIhG,IAAI,GAAG,CAACiE,IAAI,CAACiC,GAAL,CAASzF,CAAC,GAAGqF,IAAb,IAAqB7B,IAAI,CAACiC,GAAL,CAASxF,CAAC,GAAGqF,IAAb,CAAtB,IAA4C,IAAvD;AACAH,YAAAA,QAAQ,CAACC,IAAT,CAActG,KAAK,CAACQ,IAAD,CAAL,CAAYG,EAAZ,CAAeF,IAAf,EAAqB;AAAEmC,cAAAA,QAAQ,EAAEzC,EAAE,CAACe,CAAD,EAAIC,CAAJ,EAAO,CAAP;AAAd,aAArB,CAAd;AAEAoF,YAAAA,IAAI,GAAGrF,CAAP;AACAsF,YAAAA,IAAI,GAAGrF,CAAP;AACH;;AACD,cAAIV,IAAI,GAAG,CAACiE,IAAI,CAACiC,GAAL,CAASV,GAAG,CAAC,CAAD,CAAH,GAASM,IAAlB,IAA0B7B,IAAI,CAACiC,GAAL,CAASV,GAAG,CAAC,CAAD,CAAH,GAASO,IAAlB,CAA3B,IAAsD,IAAjE;AAEAH,UAAAA,QAAQ,CAACC,IAAT,CAActG,KAAK,CAACQ,IAAD,CAAL,CAAYG,EAAZ,CAAeF,IAAf,EAAqB;AAAEmC,YAAAA,QAAQ,EAAEzC,EAAE,CAAC8F,GAAG,CAAC,CAAD,CAAJ,EAASA,GAAG,CAAC,CAAD,CAAZ,EAAiB,CAAjB;AAAd,WAArB,CAAd;AAEAjG,UAAAA,KAAK,CAACQ,IAAD,CAAL,CAAYoG,QAAZ,CAAqB,GAAGP,QAAxB,EAAkCvF,KAAlC;AACH,SA/coB;;AAidrB4F,QAAAA,eAAe,CAACG,EAAD,EAAKC,EAAL,EAASC,EAAT,EAAaN,CAAb,EAAgB;AAC3B,cAAIO,CAAC,GAAG,IAAIP,CAAZ;AACA,iBAAOO,CAAC,GAAGA,CAAJ,GAAQH,EAAR,GAAa,KAAK,IAAIJ,CAAT,IAAcA,CAAd,GAAkBK,EAA/B,GAAoCL,CAAC,GAAGA,CAAJ,GAAQM,EAAnD,CAF2B,CAE+B;AAC7D;;AApdoB,O","sourcesContent":["import { Button, Color, Component, Input, input, instantiate, isValid, Node, Quat, sys, tween, Tween, UIOpacity, UIRenderer, UITransform, v3, Vec2, Vec3, view } from \"cc\";\nimport { cocosUtil } from \"./CocosUtil\";\n\nexport const tweenUtil = {\n\n    tweenScaleOut(node: Node, time: number, endCb: Function) {\n        tween(node).to(time, { scale: v3(0, 0, 0) }).call(() => {\n            endCb();\n        }).start();\n    },\n\n    // 受击缩放特效\n    tweenHitScale(node: Node, time: number = 0.1, endCb?: Function) {\n        Tween.stopAllByTarget(node);\n        let scale = node.getScale();\n        tween(node)\n            .to(time, { scale: v3(scale.x * 0.95, scale.y * 1.1, 1) })\n            .to(time * 2, { scale: v3(scale.x, scale.y * 0.9, 1) })\n            .to(time * 2, { scale: v3(scale.x * 0.95, scale.y * 1.1, 1) })\n            .to(time, { scale: v3(scale.x, scale.y, 1) })\n            .call(() => {\n                if (endCb) {\n                    endCb();\n                }\n            })\n            .start();\n    },\n\n    tweenScaleShake(node: Node, endCb?: Function) {\n        let angle = 10;\n        let quat1 = new Quat();\n        Quat.fromEuler(quat1, 0, 0, angle);\n        let quat2 = new Quat();\n        Quat.fromEuler(quat2, 0, 0, -angle);\n        let quat3 = new Quat();\n        Quat.fromEuler(quat3, 0, 0, 0);\n\n        tween(node)\n            .to(0.3, { scale: v3(1.3, 1.3, 1) })\n            .to(0.2, { rotation: quat1 })\n            .to(0.4, { rotation: quat2 })\n            .to(0.2, { rotation: quat3 })\n            .to(0.2, { scale: v3(1, 1, 1) })\n            .call(() => {\n                if (endCb) {\n                    endCb();\n                }\n            }).start();\n    },\n\n    // 快速呼吸效果\n    tweenBubbling(node: Node) {\n        Tween.stopAllByTarget(node);\n        node.setScale(v3(0.4, 0.4, 1));\n        tween(node).to(0.5, {\n            scale: v3(1, 1, 1)\n        }).to(0.5, {\n            scale: v3(0.4, 0.4, 1)\n        }).union().repeatForever().start();\n    },\n\n    getScreenMidWorldPos() {\n        let size = view.getVisibleSize();\n        let pos = v3(size.width * 0.5, size.height * 0.5, 0);\n\n        return pos;\n    },\n\n    tweenUIShow(node: Node) {\n        Tween.stopAllByTarget(node);\n        let scale = node.getScale();\n        node.setScale(v3(0.5, 0.5, 1));\n        tween(node).to(0.1, {\n            scale: scale\n        }).start();\n    },\n\n    // 软弹簧效果\n    tweenBounceAction(node: Node) {\n        Tween.stopAllByTarget(node);\n        let scaleX = node.getScale().x;\n        let scaleY = node.getScale().y;\n        tween(node)\n            .to(0.15, { scale: v3(scaleX * 0.4, scaleY * 1.2, 1) }, { easing: 'bounceInOut' })\n            .to(0.15, { scale: v3(scaleX * 1.4, scaleY * 0.8, 1) }, { easing: 'bounceInOut' })\n            .to(0.2, { scale: v3(scaleX, scaleY, 1) }, { easing: 'smooth' })\n            .delay(0.7)\n            .union()\n            .repeatForever()\n            .start();\n    },\n\n    // 节点抖动\n    tweenShakeNode(node: Node) {\n        let time = 0.1;\n        tween(node)\n            .to(time, { position: v3(5, -5) })\n            .to(time, { position: v3(-5, 5) })\n            .to(time, { position: v3(5, 5) })\n            .to(time, { position: v3(-5, -5) })\n            .to(time, { position: v3(0, 0) })\n            .start();\n    },\n\n    // 往下掉落的效果\n    tweenFallDown(node: Node, endCb?: Function) {\n        node.setScale(0.5, 0.5, 1);\n        let pos = node.getPosition();\n        cocosUtil.setNodePositionY(node, pos.y + 100);\n        tween(node).to(0.3, {\n            position: pos\n        }).to(0.2, {\n            scale: v3(1, 1, 1)\n        }).call(() => {\n            if (endCb) {\n                endCb();\n            }\n        }).start();\n    },\n\n    // 显现后，往上移动并慢慢隐去\n    tweenTopFadeOut(node: Node, endCb?: Function) {\n        let uiOpacity = node.getComponent(UIOpacity);\n        if (!uiOpacity) {\n            uiOpacity = node.addComponent(UIOpacity);\n        }\n        uiOpacity.opacity = 255;\n        node.setScale(1, 1, 1);\n        tween(node)\n            .to(0.05, {\n                scale: v3(1.2, 1.2, 1)\n            })\n            .to(0.1, {\n                scale: v3(1, 1, 1)\n            })\n            .by(0.5, {\n                position: v3(0, 40)\n            })\n            .by(1, {\n                position: v3(0, 0)\n            }, {\n                onUpdate(target: Node, ratio: number) {\n                    uiOpacity.opacity = (1 - ratio) * 255;\n                }\n            }).union().call(() => {\n                if (endCb) {\n                    endCb();\n                }\n            }).start();\n    },\n\n    // 放大再缩小的一个效果\n    tweenScaleEffect(node: Node, time?: number, endCb?: Function) {\n        if (!time) {\n            time = 0.2;\n        }\n        node.setScale(1, 1, 1);\n        tween(node).to(time, {\n            scale: v3(1.5, 1.5, 1)\n        }).to(time, {\n            scale: v3(1, 1, 1)\n        }).call(() => {\n            if (endCb) {\n                endCb();\n            }\n        }).start();\n    },\n\n    // 边旋转，边飞向目标位置\n    async tweenFlyToPos(node: Node, pos: Vec3, endCb?: Function) {\n        Tween.stopAllByTarget(node);\n\n        return new Promise((resolve, reject) => {\n            let time = 0.5;\n\n            let angle = 360;\n            let quat = cocosUtil.getQuatByAngleZ(angle);\n\n            let t1 = tween(node).to(time, {\n                position: pos\n            });\n\n            let t2 = tween(node).by(time, {\n                rotation: quat\n            }, {\n                easing: \"quadOut\",\n                onUpdate(target: Node, ratio: number) {\n                    node.setRotation(cocosUtil.getQuatByAngleZ(angle * ratio));\n                }\n            });\n\n            tween(node).parallel(t1, t2).call(() => {\n                node.setRotation(cocosUtil.getQuatByAngleZ(0));\n                // @ts-ignore\n                resolve();\n                if (endCb) {\n                    endCb();\n                }\n            }).start();\n        });\n    },\n\n    // 往右上方做类似抛物线运动\n    tweenTopRightPao(node: Node, callbck?: Function) {\n        let dx1 = 40;\n        let dx2 = 40;\n        let dy1 = 100;\n        let dy2 = -80;\n        dx1 += Math.random() * 20;\n        node.setScale(v3(1, 1, 1));\n        tween(node)\n            .by(0.3, {\n                position: v3(dx1, dy1)\n            }, {\n                easing: \"quadOut\", onUpdate: (target: Node, ratio: number) => {\n                    let ds = 0.5 * ratio;\n                    node.setScale(v3(1 + ds, 1 + ds, 1));\n                }\n            })\n            .by(0.3, {\n                position: v3(dx2, dy2)\n            }, {\n                easing: \"quadIn\", onUpdate: (target: Node, ratio: number) => {\n                    let ds = 0.5 * ratio;\n                    node.setScale(v3(1.5 - ds, 1.5 - ds, 1));\n                }\n            })\n            .union()\n            .call(() => {\n                if (callbck) {\n                    callbck();\n                }\n            }).start();\n    },\n\n    // 从小到放大\n    tweenScaleIn(node: Node, time?: number, endCb?: Function) {\n        if (!time) {\n            time = 0.2;\n        }\n        node.setScale(0, 0, 1);\n        tween(node).to(time, {\n            scale: v3(1, 1, 1)\n        }).call(() => {\n            if (endCb) {\n                endCb();\n            }\n        }).start();\n    },\n\n    // 从小到放大，再恢复到原始大小\n    tweenScaleIn2(node: Node, time?: number, endCb?: Function) {\n        if (!time) {\n            time = 0.2;\n        }\n        node.setScale(0, 0, 1);\n        tween(node).to(time, {\n            scale: v3(1.3, 1.3, 1)\n        }).to(time / 2, {\n            scale: v3(1, 1, 1)\n        }).union().call(() => {\n            if (endCb) {\n                endCb();\n            }\n        }).start();\n    },\n\n    // 闪烁动画\n    tweenBlink(node: Node, time?: number, cb?: Function) {\n        if (!time) {\n            time = 0.5;\n        }\n        let uiOpacity = cocosUtil.addComponentOnce(node, UIOpacity);\n        uiOpacity.opacity = 255;\n        tween(uiOpacity).to(time, {\n            opacity: 80\n        }).to(time, {\n            opacity: 255\n        }).call(() => {\n            if (cb) {\n                cb();\n            }\n        }).union().repeatForever().start();\n    },\n\n    // 循环旋转动画\n    tweenRotate(node: Node, time?: number) {\n        if (!time) {\n            time = 2;\n        }\n        let angle = 360;\n        let quat = cocosUtil.getQuatByAngleZ(angle);\n        tween(node).by(time, { rotation: quat }, {\n            easing: \"linear\",\n            onUpdate: (target: Node, ratio: number) => {\n                let da = angle * ratio;\n                target.setRotation(cocosUtil.getQuatByAngleZ(da));\n            }\n        }).repeatForever().start();\n    },\n\n    // 上下漂浮\n    tweenUpDown(node: Node, dy?: number, time?: number) {\n        if (!dy) {\n            dy = 6;\n        }\n        if (!time) {\n            time = 1.5;\n        }\n        let pos1 = node.getPosition();\n        pos1.y += dy;\n        let pos2 = node.getPosition();\n        tween(node).to(time, {\n            position: pos1\n        }).to(time, {\n            position: pos2\n        }).union().repeatForever().start();\n    },\n\n    // 淡入动画\n    async tweenFadeIn(node: Node, time?: number, cb?: Function) {\n        return new Promise((resolve, reject) => {\n            if (!time) {\n                time = 1;\n            }\n            let uiOpacity = cocosUtil.addComponentOnce(node, UIOpacity);\n            uiOpacity.opacity = 0;\n            tween(uiOpacity).to(time, {\n                opacity: 255\n            }).call(() => {\n                // @ts-ignore\n                resolve();\n                if (cb) {\n                    cb();\n                }\n            }).start();\n        });\n    },\n\n    // 淡出动画\n    async tweenFadeOut(node: Node, time?: number, cb?: Function) {\n        return new Promise((resolve, reject) => {\n            if (!time) {\n                time = 1.5;\n            }\n            let uiOpacity = cocosUtil.addComponentOnce(node, UIOpacity);\n            uiOpacity.opacity = 255;\n            tween(uiOpacity).to(time, {\n                opacity: 0\n            }).call(() => {\n                // @ts-ignore\n                resolve();\n                if (cb) {\n                    cb();\n                }\n            }).start();\n        });\n    },\n\n    /**\n     * 放大缩小呼吸效果\n     * @param node 节点\n     * @param time 缩放时长，单位：秒\n     * @param scale 缩放大小\n     */\n    tweenBreath(node: Node, time?: number, scale?: number) {\n        if (!time) {\n            time = 0.4;\n        }\n        if (!scale) {\n            scale = 1.2;\n        }\n\n        tween(node)\n            .to(\n                time, {\n                scale: v3(scale, scale, 1)\n            })\n            .to(\n                time, {\n                scale: v3(1, 1, 1)\n            }\n            ).union().repeatForever().start();\n    },\n\n    /**\n     * 间接性晃动效果\n     * @param node 节点\n     * @param time 时长，单位：秒\n     * @param rotation 旋转角度，单位：度数\n     * @param delayTime 中间暂停时长，单位：秒\n     * @param isRepeat 是否循环播放，默认：是\n     */\n    tweenShake(node: Node, time?: number, rotation?: number, delayTime?: number, isRepeat?: boolean) {\n        Tween.stopAllByTarget(node);\n\n        if (!time) {\n            time = 0.2;\n        }\n        if (!rotation) {\n            rotation = 6;\n        }\n        if (delayTime == undefined) {\n            delayTime = time * 5;\n        }\n\n        let quat1: Quat = new Quat();\n        Quat.fromEuler(quat1, 0, 0, rotation);\n\n        let quat2: Quat = new Quat();\n        Quat.fromEuler(quat2, 0, 0, -rotation);\n\n        let quat3: Quat = new Quat();\n        Quat.fromEuler(quat3, 0, 0, 0);\n\n        let tweenRet = tween(node).to(time, {\n            rotation: quat1\n        }).to(time * 2, {\n            rotation: quat2\n        }).to(time, {\n            rotation: quat3\n        });\n\n        if (isRepeat == undefined) {\n            tweenRet.delay(delayTime).union().repeatForever().start();\n        } else {\n            tweenRet.start();\n        }\n\n    },\n\n    /**\n     * 绘制一条曲线路径\n     * @param  {Object} node canvas渲染上下文\n     * @param  {Array<number>} start 起点\n     * @param  {Array<number>} end 终点\n     * @param  {number} curveness 曲度(0-1)\n     * @param  {number} percent 绘制百分比(0-100)\n     */\n    drawCurvePath(node, start, end, curveness, percent, delay = 0) {\n\n        var cp = [\n            (start[0] + end[0]) / 2 - (start[1] - end[1]) * curveness,\n            (start[1] + end[1]) / 2 - (end[0] - start[0]) * curveness\n        ];\n\n        // node.position = v3(start[0], start[1], 0);\n        let tweenArr = []\n        tweenArr.push(tween(node).delay(delay))\n        let curx = start[0]\n        let cury = start[1]\n        for (var t = 0; t <= percent / 100; t += 0.01) {\n\n            var x = this.quadraticBezier(start[0], cp[0], end[0], t);\n            var y = this.quadraticBezier(start[1], cp[1], end[1], t);\n            let time = (Math.abs(x - curx) + Math.abs(y - cury)) / 1500\n            tweenArr.push(tween(node).to(time, { position: v3(x, y, 0) }))\n\n            curx = x\n            cury = y\n        }\n        let time = (Math.abs(end[0] - curx) + Math.abs(end[1] - cury)) / 1500\n\n        tweenArr.push(tween(node).to(time, { position: v3(end[0], end[1], 0) }))\n\n        tween(node).sequence(...tweenArr).start();\n    },\n\n    quadraticBezier(p0, p1, p2, t) {\n        var k = 1 - t;\n        return k * k * p0 + 2 * (1 - t) * t * p1 + t * t * p2;    // 这个方程就是二次贝赛尔曲线方程\n    }\n}\n"]}