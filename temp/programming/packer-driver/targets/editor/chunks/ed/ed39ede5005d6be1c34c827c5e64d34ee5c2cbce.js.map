{"version":3,"sources":["file:///Users/jingfaxie/Documents/UGit/minigame3/Aby/assets/Script/Tool/Tool_Animation.ts"],"names":["_decorator","Component","Animation","Sprite","Tween","tween","v3","Vec2","Vec3","Material","UIOpacity","color","isValid","Tool_Other","Tool_UI","ccclass","property","Tool_Animation","Async_Wait","Delay_Time","Promise","resolve","reject","scheduleOnce","Async_Function_Id","Id","Call","Obj_Start","num","Obj_End","to","progress","start","end","current","ratio","tag","call","Async_Function_Target","Async_Function_For","Count","Fun_Start","Fun_End","i","Tween_Pause_Target","Target","pauseAllByTarget","Tween_Resume_Target","resumeAllByTarget","Tween_Stop_Target","stopAllByTarget","Tween_Stop_Tag","stopAllByTag","Tween_Stop_All","stopAll","Animation_Num_Jump_Time","Component_Label","Value_Start","Value_Change","Time","Lenth","Easing","easing","string","toFixed","Animation_Num_Jump_Speed","Speed","Length","Math","abs","Get_Move_Time","Start_Pos","Pos_Finish","Dis","Get_Distance","Number","Get_Angle","Pos_Start","Delta_X","x","Delta_Y","y","AngleIn_Degrees","atan2","PI","instance","Get_Type_Is_Abnormal","console","warn","distance","Get_Distance_Limited","Distance","clone","Direction","subtract","normalize","Intermediate_Position","add","multiplyScalar","Position_Restricted","Target_Position","Min_Position","Max_Position","Ortho_Height_Multiple","Design_Width","Get_Width_Design","Design_Height","Get_Height_Design","clamp","value","min","max","Animation_Node_Move_Speed","Node_Set","Position","Move_Time","position","Animation_Node_Move_Time","Animation_Nodes_Swap_Pos_Speed","Node_A","Node_B","Position_A","Position_B","Animation_Nodes_Move_Swap_Time","Animation_Node_Move_Bezier_Time","Target_Pos","PointA_Pos","PointB_Pos","Control_Point1","Control_Point2","End_Position","Bezier","t","pow","Animation_Node_Move_Bezier_Speed","Animation_Node_Move_Bezier_Time1","Animation_Node_Move_Parabola_Time","Control_Point","Animation_Nodes_Move_Speed","forEach","element","Pos","Animation_Nodes_Move_Time","index","length","Animation_Node_Move_Follow_Speed","Target_Node","Next_Pos","Animation_Hit","Hit_time","Color","Component_Sprite","getComponent","addComponent","Original_Color","a","g","b","log","Animation_Hit_Opacity","Min_Opacity","Max_Opacity","Component_UIOpacity","opacity","Animation_Death_Effect","Duration","Min_Scale","Max_Scale","Initial_Scale","scale","Initial_Opacity","parallel","Anim_Show_Node","Anim_Hide_Node","Anim_Show_Window","Scale_Current","z","Anim_Frame_Play","Anim","Name","error","defaultClip","name","State","getState","speed","play","once","EventType","FINISHED","Anim_Frame_Play_Plus","Min_Range","Max_Range","WrapMode","RepeatCount","Delay","wrapMode","repeatCount","playbackRange","delay","Anim_Frame_CrossFade","crossFade","Anim_Frame_Resume","isPlaying","isPaused","resume","Anim_Frame_Pause","Anim_Frame_Resume_Plus","pause","off","Anim_Frame_Stop","stop","Anim_Frame_Speed","Anim_Skeleton_Play","Skeleton","Skin","Track_Index","Anim_Name","Loop","setSkin","_updateSkeletonData","setAnimation","setCompleteListener","Animation_Heartbeat","repeatForever","Anim_On","Component_Get","Anim_Off","Anim_Dissolve","Set_Material","res","Sp","customMaterial","copy","setProperty","Current_Num","Get_Min_Distance_Pos_Arr","Position_World","Target_Position_World_Arr","Min_Index","Min_Distance","MAX_VALUE","Index","Get_Min_Distance_Node","Target_Parent_Node","Children","children","Child_Position","worldPosition"],"mappings":"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","sourcesContent":["import { __private, _decorator, AnimationState, Component, Animation, Node, sp, Sprite, Tween, tween, v3, Vec2, Vec3, Material, director, Skeleton, macro, UIOpacity, Color, color, Label, instantiate, easing, Widget, isValid, TweenEasing } from 'cc';\nimport { Tool_Other } from './Tool_Other';\nimport { Tool_UI } from './Tool_UI';\nconst { ccclass, property } = _decorator;\n\n@ccclass('Tool_Animation')\nexport class Tool_Animation extends Component {\n\n    public static readonly instance = new Tool_Animation();\n\n    /**异步等待 */\n    Async_Wait(Delay_Time: number): Promise<void> {\n        return new Promise((resolve, reject) => {\n            this.scheduleOnce(() => {\n                resolve();\n            }, Delay_Time);\n        })\n    }\n\n    /**\n     * 异步函数 Id \n     * @param Delay_Time 延时时间\n     * @param Id 缓动标签\n     * @param Call 回调函数\n     */\n    Async_Function_Id(Delay_Time: number, Id: number, Call: Function = () => { }) {\n        let Obj_Start = { num: 0 };\n        const Obj_End = { num: 100 };\n        tween(Obj_Start)\n            .to(Delay_Time, Obj_End, {\n                progress: (start: number, end: number, current: number, ratio: number): number => {\n                    return ratio;\n                }\n            })\n            .tag(Id)\n            .call(() => {\n                Call?.();\n            })\n            .start();\n        return Obj_Start;\n    }\n\n    /**\n     *  异步函数 Target\n     * @param Delay_Time 延时时间\n     * @param Obj_Start 开始对象\n     * @param Call 回调函数\n     */\n    Async_Function_Target(Delay_Time: number, Obj_Start: { num: number }, Call: Function = () => { }) {\n        const Obj_End = { num: 100 };\n        tween(Obj_Start)\n            .to(Delay_Time, Obj_End, {\n                progress: (start: number, end: number, current: number, ratio: number): number => {\n                    return ratio;\n                }\n            })\n            .call(() => {\n                Call?.();\n            })\n            .start();\n    }\n\n\n    /**异步函数循环 */\n    Async_Function_For(Count: number, Fun_Start: Function = () => { }, Fun_End: Function = () => { }): Promise<void> {\n        return new Promise((resolve, reject) => {\n            for (let i = 0; i < Count; i++) {\n                if (i == Count - 1) {\n                    Fun_End?.(i);\n                } else {\n                    Fun_Start?.(i);\n                }\n            }\n        })\n    }\n\n    /**暂停缓动对象 */\n    Tween_Pause_Target(Target: object, Call = () => { }) {\n        Tween.pauseAllByTarget(Target);\n        Call?.();\n    }\n\n    /**恢复缓动对象 */\n    Tween_Resume_Target(Target: object, Call = () => { }) {\n        Tween.resumeAllByTarget(Target);\n        Call?.();\n    }\n\n    /**停止缓动对象 */\n    Tween_Stop_Target(Target: object, Call = () => { }) {\n        Tween.stopAllByTarget(Target);\n        Call?.();\n    }\n\n    /**停止缓动标签 */\n    Tween_Stop_Tag(Id: number, Call = () => { }) {\n        Tween.stopAllByTag(Id);\n        Call?.();\n    }\n\n    /**停止所有缓动 */\n    Tween_Stop_All() {\n        Tween.stopAll();\n    }\n\n    /**\n     * 数字跳动（基于时间）\n     * @param Label Label 组件\n     * @param Value_Start 初始值\n     * @param Value_Change 改变值\n     * @param Time 时间\n     * @param Obj_Start 开始对象\n     * @param Id ID\n     * @param Call 回调\n     * @param Lenth 小数位数\n     * @param Easing \"linear\" | \"smooth\" | \"fade\" | \"constant\" | \"quadIn\" | \"quadOut\" | \"quadInOut\" | \"quadOutIn\" | \"cubicIn\" | \"cubicOut\" | \"cubicInOut\" | \"cubicOutIn\" | \"quartIn\" | \"quartOut\" | \"quartInOut\" | \"quartOutIn\" | \"quintIn\" | \"quintOut\" | \"quintInOut\" | \"quintOutIn\" | \"sineIn\" | \"sineOut\" | \"sineInOut\" | \"sineOutIn\" | \"expoIn\" | \"expoOut\" | \"expoInOut\" | \"expoOutIn\" | \"circIn\" | \"circOut\" | \"circInOut\" | \"circOutIn\" | \"elasticIn\" | \"elasticOut\" | \"elasticInOut\" | \"elasticOutIn\" | \"backIn\" | \"backOut\" | \"backInOut\" | \"backOutIn\" | \"bounceIn\" | \"bounceOut\" | \"bounceInOut\" | \"bounceOutIn\";\n     */\n    Animation_Num_Jump_Time(\n        Component_Label: Label,\n        Value_Start: number,\n        Value_Change: number,\n        Time: number,\n        Obj_Start: { num: number },\n        Id: number, Call = () => { },\n        Lenth: number = 2, Easing: TweenEasing = \"linear\"\n    ) {\n        const Obj_End = { num: 100 };\n        tween(Obj_Start)\n            .to(Time, Obj_End, {\n                easing: Easing,\n                progress: (start: number, end: number, current: number, ratio: number): number => {\n                    Component_Label.string = (Value_Start + ratio * Value_Change).toFixed(Lenth);\n                    return ratio;\n                }\n            })\n            .tag(Id)\n            .call(() => Call?.())\n            .start();\n    }\n    /**\n     * 数字跳动（基于速度）\n     * @param Component_Label Label 组件\n     * @param Value_Start 初始值\n     * @param Value_Change 改变值\n     * @param Speed 变化速度（值/秒）\n     * @param Obj_Start 开始对象\n     * @param Id ID\n     * @param Call 回调\n     * @param Length 小数位数\n     * @param Easing \"linear\" | \"smooth\" | \"fade\" | \"constant\" | \"quadIn\" | \"quadOut\" | \"quadInOut\" | \"quadOutIn\" | \"cubicIn\" | \"cubicOut\" | \"cubicInOut\" | \"cubicOutIn\" | \"quartIn\" | \"quartOut\" | \"quartInOut\" | \"quartOutIn\" | \"quintIn\" | \"quintOut\" | \"quintInOut\" | \"quintOutIn\" | \"sineIn\" | \"sineOut\" | \"sineInOut\" | \"sineOutIn\" | \"expoIn\" | \"expoOut\" | \"expoInOut\" | \"expoOutIn\" | \"circIn\" | \"circOut\" | \"circInOut\" | \"circOutIn\" | \"elasticIn\" | \"elasticOut\" | \"elasticInOut\" | \"elasticOutIn\" | \"backIn\" | \"backOut\" | \"backInOut\" | \"backOutIn\" | \"bounceIn\" | \"bounceOut\" | \"bounceInOut\" | \"bounceOutIn\";\n     */\n    Animation_Num_Jump_Speed(Component_Label: Label, Value_Start: number, Value_Change: number, Speed: number, Obj_Start: { num: number }, Id: number, Call = () => { }, Length: number = 2, Easing: TweenEasing = \"linear\") {\n        // 计算动画时间（时间 = 变化量 / 速度）\n        const Time = (Math.abs(Value_Change) / Speed) * 1000; // 转为毫秒\n        const Obj_End = { num: 100 };\n        tween(Obj_Start)\n            .to(Time, Obj_End, {\n                easing: Easing,\n                progress: (start: number, end: number, current: number, ratio: number): number => {\n                    Component_Label.string = (Value_Start + ratio * Value_Change).toFixed(Length);\n                    return ratio;\n                }\n            })\n            .tag(Id)\n            .call(() => {\n                Call?.();\n            })\n            .start();\n    }\n\n    /**获得移动时间 */\n    Get_Move_Time(Speed: number, Start_Pos: Vec3, Pos_Finish: Vec3) {\n        if (Speed <= 0) {\n            return;\n        }\n        let Dis = this.Get_Distance(Start_Pos, Pos_Finish);\n        let Time = Number((Dis / Speed).toFixed(2));\n        return Time;\n    }\n\n    /**获取两点角度\n    *@param Pos_Start 起点坐标\n    *@param Pos_Finish 终点坐标\n    */\n    Get_Angle(Pos_Start: Vec3, Pos_Finish: Vec3): number {\n        const Delta_X = Pos_Finish.x - Pos_Start.x;\n        const Delta_Y = Pos_Finish.y - Pos_Start.y;\n        const AngleIn_Degrees = Math.atan2(Delta_Y, Delta_X) * (180 / Math.PI);\n        return AngleIn_Degrees;\n    }\n\n    /**获取两点距离\n    *@param Pos_Start 起点坐标\n    *@param Pos_Finish 终点坐标\n    */\n    Get_Distance(Pos_Start: Vec3, Pos_Finish: Vec3) {\n        if (!Tool_Other.instance.Get_Type_Is_Abnormal(Pos_Start) || !Tool_Other.instance.Get_Type_Is_Abnormal(Pos_Finish)) {\n            console.warn(\"类型异常\");\n            return;\n        }\n        return Number(Vec2.distance(Pos_Start, Pos_Finish).toFixed(2));\n    }\n\n    /**\n     *根据两点坐标和距离,计算距离开始位置Dis的坐标\n     *@param p1 起始点坐标\n     *@param p2 目标点坐标\n     *@param dis 距离起始点的距离\n     *@returns 中间位置坐标\n     */\n    Get_Distance_Limited(Pos_Start: Vec3, Pos_Finish: Vec3, Dis: number): Vec3 {\n        // 计算两点之间的距离\n        const Distance = this.Get_Distance(Pos_Start.clone(), Pos_Finish.clone());\n        // 如果两点之间的距离小于或等于目标距离,则返回目标点坐标\n        if (Distance <= Dis) {\n            return Pos_Finish.clone();\n        }\n        // 计算方向向量并归一化\n        const Direction = Pos_Finish.clone().subtract(Pos_Start.clone()).normalize();\n        // 计算中间位置坐标\n        const Intermediate_Position = Pos_Start.clone().add(Direction.multiplyScalar(Dis));\n        return Intermediate_Position;\n    }\n\n\n    /**\n     * 位置限制\n     * @param {Vec3} Target_Position - 目标坐标\n     * @param {Vec3} Min_Position - 最小坐标\n     * @param {Vec3} Max_Position - 最大坐标\n     * @param {number} Ortho_Height_Multiple - 正交高度倍数\n     * @returns {Vec3} - 限制后的目标坐标       \n     */\n    Position_Restricted(Target_Position: Vec3, Min_Position: Vec3, Max_Position: Vec3, Ortho_Height_Multiple: number = 1) {\n        /** 设计分辨率 */\n        const Design_Width = Tool_UI.instance.Get_Width_Design() * Ortho_Height_Multiple;\n        const Design_Height = Tool_UI.instance.Get_Height_Design() * Ortho_Height_Multiple;\n        // 调整最小和最大坐标\n        Min_Position = v3(Min_Position.x + Design_Width, Min_Position.y + Design_Height, 0);\n        Max_Position = v3(Max_Position.x - Design_Width, Max_Position.y - Design_Height, 0);\n        // 限制坐标的辅助函数\n        const clamp = (value: number, min: number, max: number) => Math.max(min, Math.min(value, max));\n        // 限制目标坐标\n        Target_Position.x = clamp(Target_Position.x, Min_Position.x, Max_Position.x);\n        Target_Position.y = clamp(Target_Position.y, Min_Position.y, Max_Position.y);\n\n        return Target_Position;\n    }\n\n\n\n\n    /**动画_节点_移动_速度\n    *@Node 节点\n    *@Position 坐标\n    *@Speed 速度\n    *@Call 回调函数\n    *@Easing \"linear\" | \"smooth\" | \"fade\" | \"constant\" | \"quadIn\" | \"quadOut\" | \"quadInOut\" | \"quadOutIn\" | \"cubicIn\" | \"cubicOut\" | \"cubicInOut\" | \"cubicOutIn\" | \"quartIn\" | \"quartOut\" | \"quartInOut\" | \"quartOutIn\" | \"quintIn\" | \"quintOut\" | \"quintInOut\" | \"quintOutIn\" | \"sineIn\" | \"sineOut\" | \"sineInOut\" | \"sineOutIn\" | \"expoIn\" | \"expoOut\" | \"expoInOut\" | \"expoOutIn\" | \"circIn\" | \"circOut\" | \"circInOut\" | \"circOutIn\" | \"elasticIn\" | \"elasticOut\" | \"elasticInOut\" | \"elasticOutIn\" | \"backIn\" | \"backOut\" | \"backInOut\" | \"backOutIn\" | \"bounceIn\" | \"bounceOut\" | \"bounceInOut\" | \"bounceOutIn\";\n    */\n    Animation_Node_Move_Speed(Node_Set: Node, Position: Vec3, Speed: number = 1000, Call: Function = () => { }, Easing: TweenEasing = \"linear\") {\n        if (Speed <= 0) {\n            return;\n        }\n        let Move_Time: number = this.Get_Move_Time(Speed, Node_Set.position, Position);\n        this.Tween_Stop_Target(Node_Set);\n        tween(Node_Set)\n            .to(Move_Time, { position: Position }, { easing: Easing })\n            .call(() => {\n                Call?.();\n            })\n            .start();\n    }\n    /**动画_节点_移动_时间\n    *@Node 节点\n    *@Position 坐标\n    *@Time 时间\n    *@Call 回调函数\n    *@Easing \"linear\" | \"smooth\" | \"fade\" | \"constant\" | \"quadIn\" | \"quadOut\" | \"quadInOut\" | \"quadOutIn\" | \"cubicIn\" | \"cubicOut\" | \"cubicInOut\" | \"cubicOutIn\" | \"quartIn\" | \"quartOut\" | \"quartInOut\" | \"quartOutIn\" | \"quintIn\" | \"quintOut\" | \"quintInOut\" | \"quintOutIn\" | \"sineIn\" | \"sineOut\" | \"sineInOut\" | \"sineOutIn\" | \"expoIn\" | \"expoOut\" | \"expoInOut\" | \"expoOutIn\" | \"circIn\" | \"circOut\" | \"circInOut\" | \"circOutIn\" | \"elasticIn\" | \"elasticOut\" | \"elasticInOut\" | \"elasticOutIn\" | \"backIn\" | \"backOut\" | \"backInOut\" | \"backOutIn\" | \"bounceIn\" | \"bounceOut\" | \"bounceInOut\" | \"bounceOutIn\";\n    */\n    Animation_Node_Move_Time(Node_Set: Node, Position: Vec3, Time: number = 1, Call: Function = () => { }, Easing: TweenEasing = \"linear\") {\n        if (Time < 0) {\n            return;\n        }\n        this.Tween_Stop_Target(Node_Set);\n        tween(Node_Set)\n            .to(Time, { position: Position }, { easing: Easing })\n            .call(() => {\n                Call?.();\n            })\n            .start();\n    }\n\n    /**动画_节点_交换_坐标_速度 */\n    Animation_Nodes_Swap_Pos_Speed(Node_A: Node, Node_B: Node, Speed: number = 1000, Call: Function = () => { }, Easing: TweenEasing = \"linear\") {\n        if (Speed <= 0) {\n            return;\n        }\n        const Position_A = Node_A.position.clone();\n        const Position_B = Node_B.position.clone();\n        this.Animation_Node_Move_Speed(Node_A, Position_B, Speed, null, Easing);\n        this.Animation_Node_Move_Speed(Node_B, Position_A, Speed, () => {\n            Call?.();\n        }, Easing);\n    }\n    /**动画_节点_交换_坐标_时间 */\n    Animation_Nodes_Move_Swap_Time(Node_A: Node, Node_B: Node, Time: number = 1, Call: Function = () => { }, Easing: TweenEasing = \"linear\") {\n        if (Time < 0) {\n            return;\n        }\n        const Position_A = Node_A.position.clone();\n        const Position_B = Node_B.position.clone();\n        this.Animation_Node_Move_Time(Node_A, Position_B, Time, null, Easing);\n        this.Animation_Node_Move_Time(Node_B, Position_A, Time, () => {\n            Call?.();\n        }, Easing);\n    }\n\n    /**动画_节点_移动_贝塞尔_时间\n    *@Node 节点\n    *@Target_Pos 目标坐标\n    *@Id 缓动标签\n    *@PointA_Pos 控制点坐标\n    *@PointB_Pos 控制点坐标\n    *@Time 时间\n    *@Call 回调函数\n    */\n    Animation_Node_Move_Bezier_Time(Node_Set: Node, Target_Pos: Vec3, Id: number, PointA_Pos: Vec3, PointB_Pos: Vec3, Time: number = 1, Call: Function = () => { }) {\n        if (Time < 0) {\n            return;\n        }\n        // 定义贝塞尔曲线的控制点\n        /**开始坐标 */\n        const Pos_Start = Node_Set.position.clone();\n        /**控制点1坐标 */\n        const Control_Point1 = Pos_Start.clone().add(PointA_Pos); // 控制点1\n        /**控制点2坐标 */\n        const Control_Point2 = Target_Pos.clone().add(PointB_Pos); // 控制点2\n        const End_Position = Target_Pos.clone();\n        // 创建贝塞尔曲线函数\n        const Bezier = (t) => {\n            return Pos_Start.clone().multiplyScalar(Math.pow(1 - t, 3))\n                .add(Control_Point1.clone().multiplyScalar(3 * Math.pow(1 - t, 2) * t))\n                .add(Control_Point2.clone().multiplyScalar(3 * (1 - t) * Math.pow(t, 2)))\n                .add(End_Position.clone().multiplyScalar(Math.pow(t, 3)));\n        };\n        let Obj_Start = { num: 0 };\n        const Obj_End = { num: 100 };\n        tween(Obj_Start)\n            .to(Time, Obj_End, {\n                progress: (start: number, end: number, current: number, ratio: number): number => {\n                    if (isValid(Node_Set, true)) {\n                        Node_Set.position = Bezier(ratio);\n                    } else {\n                        this.Tween_Stop_Target(Obj_Start);\n                    }\n                    return ratio;\n                }\n            })\n            .tag(Id)\n            .call(() => {\n                Call?.();\n            })\n            .start();\n    }\n\n    /**\n     * 动画_节点_移动_贝塞尔_速度\n     * @Node 节点\n     * @Target_Pos 目标坐标\n     * @PointA_Pos 控制点坐标\n     * @PointB_Pos 控制点坐标\n     * @Speed 速度\n     * @Call 回调函数\n     */\n    Animation_Node_Move_Bezier_Speed(Node_Set: Node, Target_Pos: Vec3, Id: number, PointA_Pos: Vec3, PointB_Pos: Vec3, Speed: number = 520, Call: Function = () => { }) {\n        // 获取当前节点位置\n        const Pos_Start = Node_Set.position.clone();\n        const End_Position = Target_Pos.clone();\n        let Time = this.Get_Move_Time(Speed, Pos_Start, End_Position);\n        if (Time < 0) {\n            return;\n        }\n        // 定义贝塞尔曲线的控制点\n        const Control_Point1 = Pos_Start.clone().add(PointA_Pos); // 控制点1\n        const Control_Point2 = Target_Pos.clone().add(PointB_Pos); // 控制点2\n        // 创建贝塞尔曲线函数\n        const Bezier = (t) => {\n            return Pos_Start.clone().multiplyScalar(Math.pow(1 - t, 3))\n                .add(Control_Point1.clone().multiplyScalar(3 * Math.pow(1 - t, 2) * t))\n                .add(Control_Point2.clone().multiplyScalar(3 * (1 - t) * Math.pow(t, 2)))\n                .add(End_Position.clone().multiplyScalar(Math.pow(t, 3)));\n        };\n        let Obj_Start = { num: 0 };\n        const Obj_End = { num: 100 };\n        tween(Obj_Start)\n            .to(Time, Obj_End, {\n                progress: (start: number, end: number, current: number, ratio: number): number => {\n                    if (isValid(Node_Set, true)) {\n                        Node_Set.position = Bezier(ratio);\n                    } else {\n                        this.Tween_Stop_Target(Obj_Start);\n                    }\n                    return ratio;\n                }\n            })\n            .tag(Id)\n            .call(() => {\n                Call?.();\n            })\n            .start();\n    }\n    /**动画_节点_移动_贝塞尔_时间\n    *@Node 节点\n    *@Target_Pos 目标坐标\n    *@Id 缓动标签\n    *@PointA_Pos 控制点坐标\n    *@PointB_Pos 控制点坐标\n    *@Time 时间\n    *@Call 回调函数\n    */\n    Animation_Node_Move_Bezier_Time1(Node_Set: Node, Target_Pos: Vec3, Obj_Start: { num: number }, Id: number, PointA_Pos: Vec3, PointB_Pos: Vec3, Time: number = 1, Call: Function = () => { }) {\n        if (Time < 0) {\n            return;\n        }\n        // 定义贝塞尔曲线的控制点\n        /**开始坐标 */\n        const Pos_Start = Node_Set.position.clone();\n        /**控制点1坐标 */\n        const Control_Point1 = Pos_Start.clone().add(PointA_Pos); // 控制点1\n        /**控制点2坐标 */\n        const Control_Point2 = Target_Pos.clone().add(PointB_Pos); // 控制点2\n        const End_Position = Target_Pos.clone();\n        // 创建贝塞尔曲线函数\n        const Bezier = (t) => {\n            return Pos_Start.clone().multiplyScalar(Math.pow(1 - t, 3))\n                .add(Control_Point1.clone().multiplyScalar(3 * Math.pow(1 - t, 2) * t))\n                .add(Control_Point2.clone().multiplyScalar(3 * (1 - t) * Math.pow(t, 2)))\n                .add(End_Position.clone().multiplyScalar(Math.pow(t, 3)));\n        };\n        // let Obj_Start = { num: 0 };\n        const Obj_End = { num: 100 };\n        tween(Obj_Start)\n            .to(Time, Obj_End, {\n                progress: (start: number, end: number, current: number, ratio: number): number => {\n                    if (isValid(Node_Set, true)) {\n                        Node_Set.position = Bezier(ratio);\n                    } else {\n                        this.Tween_Stop_Target(Obj_Start);\n                    }\n                    return ratio;\n                }\n            })\n            .tag(Id)\n            .call(() => {\n                Call?.();\n            })\n            .start();\n    }\n\n    /**\n     * 动画_节点_移动_抛物线_时间\n     * @param Node_Set 节点\n     * @param Target_Pos 目标坐标\n     * @param Time 时间\n     * @param Obj_Start 开始对象 let Obj_Start = { num: 0 };\n     * @param Id 缓动标签\n     * @param Call 回调函数\n     * @returns\n     */\n    Animation_Node_Move_Parabola_Time(Node_Set: Node, Target_Pos: Vec3, Time: number = 1, Obj_Start: { num: number }, Id: number, Call: Function = () => { }) {\n        if (Time < 0) {\n            return;\n        }\n        // 定义起始坐标和目标坐标\n        const Pos_Start = Node_Set.position.clone();\n        const End_Position = Target_Pos.clone();\n        // 计算控制点，形成抛物线\n        const Control_Point = new Vec3(\n            (Pos_Start.x + End_Position.x) / 2,\n            Math.max(Pos_Start.y, End_Position.y) + Math.abs(Target_Pos.y - Pos_Start.y) * 0.5, // 向上偏移\n            0\n        );\n        // 创建贝塞尔曲线函数\n        const Bezier = (t) => {\n            return Pos_Start.clone().multiplyScalar(Math.pow(1 - t, 2))\n                .add(Control_Point.clone().multiplyScalar(2 * (1 - t) * t))\n                .add(End_Position.clone().multiplyScalar(Math.pow(t, 2)));\n        };\n        const Obj_End = { num: 100 };\n        tween(Obj_Start)\n            .to(Time, Obj_End, {\n                progress: (start: number, end: number, current: number, ratio: number): number => {\n                    if (isValid(Node_Set, true)) {\n                        Node_Set.position = Bezier(ratio);\n                    } else {\n                        this.Tween_Stop_Target(Obj_Start);\n                    }\n                    return ratio;\n                }\n            })\n            .tag(Id)\n            .call(() => {\n                Call?.();\n            })\n            .start();\n    }\n    /**动画_节点数组_移动_速度\n     *@Node 节点\n     *@Position 坐标\n     *@Time 速度\n     *@Call 回调函数\n     */\n    Animation_Nodes_Move_Speed(Node_Set: Node[], Position: Vec3, Speed: number = 1000, Call: Function = () => { }) {\n        if (Speed <= 0) {\n            return;\n        }\n        Node_Set.forEach(element => {\n            let Pos = element.position.clone().add(Position)\n            this.Animation_Node_Move_Speed(element, Pos, Speed);\n        });\n    }\n    /**动画_节点数组_移动_时间\n     *@Node 节点\n     *@Position 坐标\n     *@Time 速度\n     *@Call 回调函数\n     */\n    Animation_Nodes_Move_Time(Node_Set: Node[], Position: Vec3, Time: number = 1, Call: Function = () => { }) {\n        Node_Set.forEach((element, index) => {\n            let Pos = element.position.clone().add(Position)\n            if (index === Node_Set.length - 1) {\n                this.Animation_Node_Move_Time(element, Pos, Time, Call, \"smooth\");\n            } else {\n                this.Animation_Node_Move_Time(element, Pos, Time, null, \"smooth\");\n            }\n        });\n\n    }\n\n\n\n\n\n    /**动画_节点数组_移动_跟随\n     * \n     */\n    Animation_Node_Move_Follow_Speed(Node_Set: Node, Target_Node: Node, Speed: number = 1000, Call: Function = () => { }) {\n        let Next_Pos = this.Get_Distance_Limited(Node_Set.position, Target_Node.position, 25);\n        /**修正坐标 */\n        if (this.Get_Distance(Next_Pos, Target_Node.position) <= 25) {\n            Next_Pos = Target_Node.position.clone();\n            this.Animation_Node_Move_Speed(Node_Set, Next_Pos, Speed, Call);\n        } else {\n            this.Animation_Node_Move_Speed(Node_Set, Next_Pos, Speed, () => {\n                this.Animation_Node_Move_Follow_Speed(Node_Set, Target_Node, Speed, Call);\n            });\n        }\n    }\n\n\n\n\n    /**动画_受击效果\n     *@pNode 节点\n     *@Hit_time 受击时间\n     *@Original_Color 初始颜色\n     */\n    Animation_Hit(Node_Set: Node, Hit_time: number, Call: Function = () => { }, Color: Color = color(255, 255, 255, 255)) {\n        let Component_Sprite = Node_Set.getComponent(Sprite);\n        if (!Component_Sprite) {\n            Node_Set.addComponent(Sprite);\n            Component_Sprite = Node_Set.getComponent(Sprite);\n        }\n        let Original_Color: Color = color(Component_Sprite.color.a, Component_Sprite.color.g, Component_Sprite.color.b, Component_Sprite.color.a);\n        console.log(Original_Color);\n        tween(Component_Sprite)\n            .to(Hit_time, { color: color(255, 0, 0, 255) })\n            .call(() => {\n                if (Color == null) {\n                    Component_Sprite.color = Original_Color;\n                } else {\n                    Component_Sprite.color = Color;\n                }\n                Call?.();\n            })\n            .start();\n    }\n\n\n\n\n    Animation_Hit_Opacity(Node_Set: Node, Hit_time: number, Call: Function = () => { }, Min_Opacity: number = 155, Max_Opacity: number = 255) {\n        let Component_UIOpacity = Node_Set.getComponent(UIOpacity);\n        if (!Component_UIOpacity) {\n            Component_UIOpacity = Node_Set.addComponent(UIOpacity);\n        }\n        Component_UIOpacity.opacity = Max_Opacity;\n        tween(Component_UIOpacity)\n            .to(Hit_time / 2, { opacity: Min_Opacity })\n            .to(Hit_time / 2, { opacity: Max_Opacity })\n            .call(() => {\n                Call?.();\n            })\n            .start();\n    }\n\n    /**\n * 实现节点的死亡效果（缩放 + 透明度 + 爆炸效果）\n * @param Node_Set 目标节点\n * @param Duration 动画总时长\n * @param Call 动画完成后的回调函数\n * @param Min_Scale 最小缩放值（默认 0）\n * @param Max_Scale 最大缩放值（默认 1.5，用于爆炸效果）\n * @param Min_Opacity 最小透明度（默认 0）\n * @param Max_Opacity 最大透明度（默认 255）\n */\n    Animation_Death_Effect(Node_Set: Node, Duration: number, Call: Function = () => { }, Min_Scale: number = 0, Max_Scale: number = 1.5, Min_Opacity: number = 0, Max_Opacity: number = 255) {\n        // 获取或添加 UIOpacity 组件\n        let Component_UIOpacity = Node_Set.getComponent(UIOpacity);\n        if (!Component_UIOpacity) {\n            Component_UIOpacity = Node_Set.addComponent(UIOpacity);\n        }\n        // 初始状态\n        const Initial_Scale = Node_Set.scale.clone();\n        const Initial_Opacity = Max_Opacity;\n\n        // 设置初始透明度\n        Component_UIOpacity.opacity = Initial_Opacity;\n\n        // 缩放 + 透明度 + 爆炸效果\n        tween(Node_Set)\n            .to(Duration * 0.3, { scale: v3(Max_Scale, Max_Scale, 1) }) // 爆炸效果：快速放大\n            .to(Duration * 0.2, { scale: v3(Min_Scale, Min_Scale, 1) }) // 缩小到最小\n            .parallel( // 并行动画：透明度变化\n                tween(Component_UIOpacity)\n                    .to(Duration * 0.5, { opacity: Min_Opacity }) // 透明度逐渐降低\n            )\n            .call(() => {\n                // 恢复初始状态（可选）\n                Node_Set.scale = Initial_Scale;\n                Component_UIOpacity.opacity = Initial_Opacity;\n                console.log(555);\n                // 动画完成后调用回调函数\n                Call?.();\n            })\n            .start();\n    }\n\n    //Easing \"linear\" | \"smooth\" | \"fade\" | \"constant\" | \"quadIn\" | \"quadOut\" | \"quadInOut\" | \"quadOutIn\" | \"cubicIn\" | \"cubicOut\" | \"cubicInOut\" | \"cubicOutIn\" | \"quartIn\" | \"quartOut\" | \"quartInOut\" | \"quartOutIn\" | \"quintIn\" | \"quintOut\" | \"quintInOut\" | \"quintOutIn\" | \"sineIn\" | \"sineOut\" | \"sineInOut\" | \"sineOutIn\" | \"expoIn\" | \"expoOut\" | \"expoInOut\" | \"expoOutIn\" | \"circIn\" | \"circOut\" | \"circInOut\" | \"circOutIn\" | \"elasticIn\" | \"elasticOut\" | \"elasticInOut\" | \"elasticOutIn\" | \"backIn\" | \"backOut\" | \"backInOut\" | \"backOutIn\" | \"bounceIn\" | \"bounceOut\" | \"bounceInOut\" | \"bounceOutIn\";\n\n    /**动画显示节点 */\n    Anim_Show_Node(Node_Set: Node, Time: number = 0.5, Call: Function = () => { }) {\n        let Component = Node_Set.getComponent(UIOpacity);\n        if (!Component) {\n            Node_Set.addComponent(UIOpacity);\n            Component = Node_Set.getComponent(UIOpacity);\n        }\n        Component.opacity = 0;\n        tween(Component)\n            .to(Time, { opacity: 255 }, { easing: \"smooth\" })\n            .call(() => {\n                Call?.();\n            })\n            .start();\n    }\n    /**动画_隐藏节点 */\n    Anim_Hide_Node(Node_Set: Node, Time: number = 0.5, Call: Function = () => { }) {\n        let Component = Node_Set.getComponent(UIOpacity);\n        if (!Component) {\n            Node_Set.addComponent(UIOpacity);\n            Component = Node_Set.getComponent(UIOpacity);\n        }\n        Component.opacity = 255;\n        tween(Component)\n            .to(Time, { opacity: 0 }, { easing: \"smooth\" })\n            .call(() => {\n                Call?.();\n            })\n            .start();\n    }\n\n\n    /**动画弹窗 */\n    Anim_Show_Window(Node_Set: Node, Time: number = 0.5, Call: Function = () => { }) {\n        let Scale_Current: Vec3 = v3(Node_Set.scale.x, Node_Set.scale.y, Node_Set.scale.z);\n        Node_Set.scale = v3(0, 0, 1);\n        tween(Node_Set)\n            .to(Time, { scale: Scale_Current }, { easing: \"backOut\" })\n            .call(()=>{\n                Call?.();\n            })\n            .start();\n    }\n\n\n\n\n    /**播放帧动画 */\n    Anim_Frame_Play(Anim: Animation, Name: string = null, Speed: number = 1, Call: Function = () => { }) {\n        if (Anim == null) {\n            console.error(\"动画缺失\");\n            return;\n        }\n        if (Name == null || Name == \"\") {\n            if (Anim.defaultClip) {\n                Name = Anim.defaultClip.name;\n            } else {\n                console.error(\"动画缺失\");\n                return;\n            }\n        }\n        let State: AnimationState = Anim.getState(Name);\n        State.speed = Speed;\n        Anim.play(Name);\n        Anim.once(Animation.EventType.FINISHED, () => {\n            Call?.();\n        });\n    }\n    /**播放帧动画\n     * @param Name 动画组件\n     * @param Name 动画名字\n     * @param Speed 播放速率\n     * @param Min_Range 播放范围\n     * @param Max_Range 播放范围\n     * @param WrapMode 循环方式\n     * @param RepeatCount 重复次数\n     * @param Delay 延时时间\n     * @param Call 回调\n     *  Tool_Animation.instance.Anim_Frame_Play( Animation, null, 1, null, null, null, null, null, () => {\n     \n        })\n     */\n    Anim_Frame_Play_Plus(Anim: Animation, Name: string = null, Speed: number = 1, Min_Range: number = null, Max_Range: number = null, WrapMode: __private._cocos_animation_types__WrapMode = null, RepeatCount: number = null, Delay: number = 0, Call: Function = () => { }) {\n        if (Anim == null) {\n            console.error(\"动画缺失\");\n            return;\n        }\n        if (Name == null || Name == \"\") {\n            if (Anim.defaultClip) {\n                Name = Anim.defaultClip.name;\n            } else {\n                console.error(\"动画缺失\");\n                return;\n            }\n        }\n        let State: AnimationState = Anim.getState(Name);\n        if (WrapMode != null) {\n            State.wrapMode = WrapMode;\n        }\n        if (RepeatCount != null) {\n            State.repeatCount = RepeatCount;\n        }\n        if (Min_Range != null && Max_Range != null && Min_Range <= Max_Range) {\n            State.playbackRange = {\n                min: Min_Range,\n                max: Max_Range\n            }\n        }\n        State.delay = Delay;\n        State.speed = Speed;\n\n        Anim.play(Name);\n        Anim.once(Animation.EventType.FINISHED, () => {\n            Call?.();\n        });\n    }\n    /**切换帧动画 */\n    Anim_Frame_CrossFade(Anim: Animation, Name: string = null, Duration: number = 0, Call: Function = () => { }) {\n        if (Anim == null) {\n            console.error(\"动画缺失\");\n            return;\n        }\n        Anim.crossFade(Name, Duration);\n        Anim.once(Animation.EventType.FINISHED, () => {\n            Call?.();\n        });\n    }\n    /**恢复帧动画 */\n    Anim_Frame_Resume(Anim: Animation, Name: string = null, Speed: number = 1, Call: Function = () => { }) {\n        if (Anim == null) {\n            console.error(\"动画缺失\");\n            return;\n        }\n        if (Name == null) {\n            if (Anim.defaultClip) {\n                Name = Anim.defaultClip.name;\n            } else {\n                console.error(\"动画缺失\");\n                return;\n            }\n        }\n        let State: AnimationState = Anim.getState(Name);\n        State.speed = Speed;\n        if (State.isPlaying) {\n            if (State.isPaused) {\n                Anim.resume();\n                Anim.once(Animation.EventType.FINISHED, () => {\n                    Call?.();\n                });\n            } else {\n                this.Anim_Frame_Pause(Anim);\n            }\n        } else {\n            this.Anim_Frame_Play(Anim, Name, Speed, Call);\n        }\n    }\n    /**恢复帧动画 */\n    Anim_Frame_Resume_Plus(Anim: Animation, Name: string = null, Speed: number = 1, Min_Range: number = null, Max_Range: number = null, WrapMode: __private._cocos_animation_types__WrapMode = null, RepeatCount: number = null, Delay: number = 0, Call: Function = () => { }) {\n        if (Anim == null) {\n            console.error(\"动画缺失\");\n            return;\n        }\n        if (Name == null) {\n            if (Anim.defaultClip) {\n                Name = Anim.defaultClip.name;\n            } else {\n                console.error(\"动画缺失\");\n                return;\n            }\n        }\n        let State: AnimationState = Anim.getState(Name);\n        // console.log(\"是否已被暂停或停止:\", State.isMotionless);\n        // console.log(\"是否已被暂停:\", State.isPaused);\n        // console.log(\" 是否正在播放状态\", State.isPlaying);\n        if (WrapMode != null) {\n            State.wrapMode = WrapMode;\n        }\n        if (RepeatCount != null) {\n            State.repeatCount = RepeatCount;\n        }\n        if (Min_Range != null && Max_Range != null && Min_Range <= Max_Range) {\n            State.playbackRange = {\n                min: Min_Range,\n                max: Max_Range\n            }\n        }\n        State.delay = Delay;\n        State.speed = Speed;\n        if (State.isPlaying) {\n            if (State.isPaused) {\n                Anim.resume();\n                Anim.once(Animation.EventType.FINISHED, () => {\n                    Call?.();\n                });\n            } else {\n                this.Anim_Frame_Pause(Anim);\n            }\n        } else {\n            this.Anim_Frame_Play_Plus(Anim, Name, Speed, Min_Range, Max_Range, WrapMode, RepeatCount, Delay, Call);\n        }\n    }\n    /**暂停帧动画 */\n    Anim_Frame_Pause(Anim: Animation, Call: Function = () => { }) {\n        if (Anim == null) {\n            console.error(\"动画缺失\");\n            return;\n        }\n        Anim.pause();\n        Anim.off(Animation.EventType.FINISHED);\n        Call?.();\n    }\n    /**停止帧动画 */\n    Anim_Frame_Stop(Anim: Animation, Call: Function = () => { }) {\n        if (Anim == null) {\n            console.error(\"动画缺失\");\n            return;\n        }\n        Anim.stop();\n        Anim.off(Animation.EventType.FINISHED);\n        Call?.();\n    }\n    /**帧动画速度修改 */\n    Anim_Frame_Speed(Anim: Animation, Name: string = null, Speed: number = 1) {\n        if (Anim == null) {\n            console.error(\"动画缺失\");\n            return;\n        }\n        if (Name == null || Name == \"\") {\n            if (Anim.defaultClip) {\n                Name = Anim.defaultClip.name;\n            } else {\n                console.error(\"动画缺失\");\n                return;\n            }\n        }\n        let State: AnimationState = Anim.getState(Name);\n        State.speed = Speed;\n    }\n\n\n    /**播放骨骼动画 */\n    Anim_Skeleton_Play(Skeleton: sp.Skeleton, Skin: string, Track_Index: number, Anim_Name: string, Loop: boolean, Call: Function = () => { }) {\n        if (Skin == \"\") {\n            Skin = \"default\"\n        }\n        Skeleton.setSkin(Skin);\n        //@ts-ignore\n        Skeleton._updateSkeletonData();\n        Skeleton.setAnimation(Track_Index, Anim_Name, Loop);\n        Skeleton.setCompleteListener(() => {\n            Skeleton.setCompleteListener(null);\n            Call?.();\n        })\n    }\n\n\n    /**动画_心跳效果 */\n    Animation_Heartbeat(Node_Set: Node) {\n        tween(Node_Set)\n            .repeatForever(\n                tween()\n                    .to(0.5, { scale: v3(0.8, 0.8, 1) })\n                    .to(0.3, { scale: v3(0.9, 0.9, 1) })\n                    .to(0.45, { scale: v3(0.75, 0.75, 1) })\n                    .to(0.3, { scale: v3(1, 1, 1) })\n            )\n            .start()\n    }\n\n    Anim_On(Node_Set: Node, Call: Function = () => { }) {\n        let Component_UIOpacity = Tool_UI.instance.Component_Get(Node_Set, UIOpacity);\n        // let Time = 0.25;\n        // tween(Node_Set)\n        //     .to(Time, { scale: v3(0.8, 0.8, 1) })\n        //     .start();\n        // tween(Component_UIOpacity)\n        //     .to(Time, { opacity: 100 })\n        //     .call(() => {\n        //         Call?.();\n        //     })\n        //     .start();\n\n        let Time = 0.15;\n        tween(Node_Set)\n            .to(Time, { scale: v3(0.95, 0.95, 1) })\n            .start();\n        tween(Component_UIOpacity)\n            .to(Time, { opacity: 200 })\n            .call(() => {\n                Call?.();\n            })\n            .start();\n    }\n\n    Anim_Off(Node_Set: Node) {\n        let Component_UIOpacity = Tool_UI.instance.Component_Get(Node_Set, UIOpacity);\n        // tween(Node_Set)\n        //     .to(0.17, { scale: v3(1.05, 1.05, 1) })\n        //     .to(0.08, { scale: v3(1, 1, 1) })\n        //     .start();\n        // tween(Component_UIOpacity)\n        //     .to(0.25, { opacity: 255 })\n        //     .start();\n\n        tween(Node_Set)\n            .to(0.1, { scale: v3(1.05, 1.05, 1) })\n            .to(0.05, { scale: v3(1, 1, 1) })\n            .start();\n        tween(Component_UIOpacity)\n            .to(0.15, { opacity: 255 })\n            .start();\n    }\n\n\n\n    /**\n     * 溶解动画\n     * @param Node_Set 溶解节点\n     * @param Set_Material 溶解材质 let Set_Material = await this.Resoure_Data.Load_Material(\"Effect/dissolve\");\n     * @param Time 时间\n     * @param Call 回调\n     */\n    async Anim_Dissolve(Node_Set: Node, Set_Material: Material, Time: number = 1, Call: Function = () => { }) {\n        if (!Tool_Other.instance.Get_Type_Is_Abnormal(Set_Material)) {\n            return;\n        }\n        return new Promise<void>(res => {\n            const Sp = Node_Set.getComponent(Sprite);\n            // 确保为每个节点创建独立的材质实例\n            if (!Sp.customMaterial) {\n                Sp.customMaterial = new Material();// 克隆材质\n                Sp.customMaterial.copy(Set_Material);\n            } else {\n                Sp.customMaterial.copy(Set_Material); // 如果已经存在，重新复制\n            }\n            Sp.customMaterial.setProperty('dissolveThreshold', 0);\n            let Obj_Start = { num: 0 };\n            const Obj_End = { num: 100 };\n            tween(Obj_Start)\n                .to(Time, Obj_End, {\n                    progress: (start: number, end: number, current: number, ratio: number): number => {\n                        const Current_Num = 1 * ratio;//1 * ratio     0.3 + 0.7 * ratio\n                        Sp.customMaterial.setProperty('dissolveThreshold', Current_Num);\n                        return Current_Num;\n                    }\n                })\n                .call(() => {\n                    res();\n                    Call?.();\n                })\n                .start();\n        });\n    }\n\n\n    /**\n     * 获取距离目标坐标最近的点的索引和距离\n     * @param Position_World 世界坐标\n     * @param Target_Position_World_Arr 目标世界坐标数组\n     * @returns 返回最近点的索引和距离，如果数组为空则返回 null\n     */\n    Get_Min_Distance_Pos_Arr(Position_World: Vec3, Target_Position_World_Arr: Vec3[]): { Index: number; Distance: number } | null {\n        // 参数校验\n        if (!Tool_Other.instance.Get_Type_Is_Abnormal(Position_World) || !Tool_Other.instance.Get_Type_Is_Abnormal(Target_Position_World_Arr)) {\n            console.warn(\"类型异常\");\n            return null;\n        }\n        // 检查数组是否为空\n        if (Target_Position_World_Arr.length === 0) {\n            return null;\n        }\n        // 初始化最小距离和索引\n        let Min_Index = 0;\n        let Min_Distance = Number.MAX_VALUE;\n        // 遍历数组，找到距离最小的点\n        for (let i = 0; i < Target_Position_World_Arr.length; i++) {\n            const Distance = this.Get_Distance(Position_World, Target_Position_World_Arr[i]);\n            if (Distance < Min_Distance) {\n                Min_Distance = Distance;\n                Min_Index = i;\n            }\n        }\n        return {\n            Index: Min_Index,\n            Distance: Min_Distance\n        };\n    }\n    /**\n     * 获取距离目标坐标最近的点的索引和距离\n     * @param Position_World 世界坐标\n     * @param Target_Parent_Node 父节点\n     * @returns 返回最近子节点的索引和距离，如果没有子节点则返回 null\n     */\n    Get_Min_Distance_Node(Position_World: Vec3, Target_Parent_Node: Node): { Index: number; Distance: number } | null {\n        // 参数校验\n        if (!Tool_Other.instance.Get_Type_Is_Abnormal(Position_World) || !Tool_Other.instance.Get_Type_Is_Abnormal(Target_Parent_Node)) {\n            console.warn(\"类型异常\");\n            return null;\n        }\n        // 检查子节点数量\n        const Children = Target_Parent_Node.children;\n        if (Children.length === 0) {\n            return null;\n        }\n        // 初始化最小距离和索引\n        let Min_Index = 0;\n        let Min_Distance = Number.MAX_VALUE;\n        // 遍历子节点，找到距离最小的节点\n        for (let i = 0; i < Children.length; i++) {\n            const Child_Position = Children[i].worldPosition;\n            const Distance = this.Get_Distance(Position_World, Child_Position);\n            if (Distance < Min_Distance) {\n                Min_Distance = Distance;\n                Min_Index = i;\n            }\n        }\n        return {\n            Index: Min_Index,\n            Distance: Min_Distance\n        };\n    }\n\n\n}\n\n\n"]}