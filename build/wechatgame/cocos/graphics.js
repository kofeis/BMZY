System.register(["./base.js","./graphics-DOPUPQIA.js","./global-exports-CR3GRnjt.js","./index-C5lmLqDW.js","./gc-object-CKHc4SnS.js","./component-BaGvu7EF.js","./debug-view-CKetkq9d.js","./device-manager-BvjvoelW.js","./buffer-barrier-CuX_5NUR.js","./pipeline-state-manager-Cdpe3is6.js","./scene-7MDSMR3j.js","./node-event-DTNosVQv.js","./touch-DB0AR-Sc.js","./factory-D9_8ZCqM.js","./deprecated-Ca3AjUwj.js","./deprecated-D4QUWou_.js","./render-types-DTmbYHic.js","./pipeline-scene-data-B9tBPl1_.js","./rendering-sub-mesh-CowWLfXC.js","./prefab-DH0xadMc.js","./deprecated-C8l6Kwy8.js","./camera-component-Df61RNZm.js","./model-renderer-BcRDUYby.js","./renderer-9hfAnqUF.js","./deprecated-T2yM9nsJ.js","./director-DIlqD2Nd.js","./instantiate-Bj9mBEzA.js","./move-BmfpEZyZ.js","./ui-renderer-DuhVjkfF.js"],(function(t){"use strict";var e,n,r,i,a,l,s,v;return{setters:[null,function(l){e=l.L,n=l.a,r=l.P,i=l.b,a=l.G,t("Graphics",l.G)},function(t){l=t.c},function(t){s=t.C,v=t.b},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){var u=function(t,e,n){this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1,this.i=t,this.x=e,this.y=n};function x(t,e,n,r,i){var a=0,l=null;if(i===P(t,e,n,r)>0)for(a=e;a<n;a+=r)l=N(a,t[a],t[a+1],l);else for(a=n-r;a>=e;a-=r)l=N(a,t[a],t[a+1],l);return l&&b(l,l.next)&&(O(l),l=l.next),l}function o(t,e){if(void 0===e&&(e=null),!t)return t;e||(e=t);var n=t,r=!1;do{if(r=!1,n.steiner||!b(n,n.next)&&0!==E(n.prev,n,n.next))n=n.next;else{if(O(n),(n=e=n.prev)===n.next)return null;r=!0}}while(r||n!==e);return e}function f(t,e,n,r,i,a,l){if(void 0===l&&(l=0),t){!l&&a&&y(t,r,i,a);for(var s=t,v=null,u=null;t.prev!==t.next;)if(v=t.prev,u=t.next,a?p(t,r,i,a):h(t))e.push(v.i/n),e.push(t.i/n),e.push(u.i/n),O(t),t=u.next,s=u.next;else if((t=u)===s){l?1===l?f(t=d(t,e,n),e,n,r,i,a,2):2===l&&c(t,e,n,r,i,a):f(o(t),e,n,r,i,a,1);break}}}function h(t){var e=t.prev,n=t,r=t.next;if(E(e,n,r)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(g(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&E(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function p(t,e,n,r){var i=t.prev,a=t,l=t.next;if(E(i,a,l)>=0)return!1;for(var s=i.x<a.x?i.x<l.x?i.x:l.x:a.x<l.x?a.x:l.x,v=i.y<a.y?i.y<l.y?i.y:l.y:a.y<l.y?a.y:l.y,u=i.x>a.x?i.x>l.x?i.x:l.x:a.x>l.x?a.x:l.x,x=i.y>a.y?i.y>l.y?i.y:l.y:a.y>l.y?a.y:l.y,o=S(s,v,e,n,r),f=S(u,x,e,n,r),h=t.nextZ;h&&h.z<=f;){if(h!==t.prev&&h!==t.next&&g(i.x,i.y,a.x,a.y,l.x,l.y,h.x,h.y)&&E(h.prev,h,h.next)>=0)return!1;h=h.nextZ}for(h=t.prevZ;h&&h.z>=o;){if(h!==t.prev&&h!==t.next&&g(i.x,i.y,a.x,a.y,l.x,l.y,h.x,h.y)&&E(h.prev,h,h.next)>=0)return!1;h=h.prevZ}return!0}function d(t,e,n){var r=t;do{var i=r.prev,a=r.next.next;!b(i,a)&&j(i,r,r.next,a)&&R(i,a)&&R(a,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(a.i/n),O(r),O(r.next),r=t=a),r=r.next}while(r!==t);return r}function c(t,e,n,r,i,a){var l=t;do{for(var s=l.next.next;s!==l.prev;){if(l.i!==s.i&&m(l,s)){var v=T(l,s);return l=o(l,l.next),v=o(v,v.next),f(l,e,n,r,i,a),void f(v,e,n,r,i,a)}s=s.next}l=l.next}while(l!==t)}function y(t,e,n,r){var i=t;do{null===i.z&&(i.z=S(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,_(i)}function _(t){var e=0,n=null,r=null,i=null,a=null,l=0,s=0,v=0,u=1;do{for(n=t,t=null,a=null,l=0;n;){for(l++,r=n,s=0,e=0;e<u&&(s++,r=r.nextZ);e++);for(v=u;s>0||v>0&&r;)0===s?(i=r,r=r.nextZ,v--):0!==v&&r?n.z<=r.z?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,v--):(i=n,n=n.nextZ,s--),a?a.nextZ=i:t=i,i.prevZ=a,a=i;n=r}a.nextZ=null,u*=2}while(l>1);return t}function S(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)/i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)/i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function g(t,e,n,r,i,a,l,s){return(i-l)*(e-s)-(t-l)*(a-s)>=0&&(t-l)*(r-s)-(n-l)*(e-s)>=0&&(n-l)*(a-s)-(i-l)*(r-s)>=0}function m(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!Z(t,e)&&R(t,e)&&R(e,t)&&L(t,e)}function E(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function b(t,e){return t.x===e.x&&t.y===e.y}function j(t,e,n,r){return!!(b(t,e)&&b(n,r)||b(t,r)&&b(n,e))||E(t,e,n)>0!=E(t,e,r)>0&&E(n,r,t)>0!=E(n,r,e)>0}function Z(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&j(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function R(t,e){return E(t.prev,t,t.next)<0?E(t,e,t.next)>=0&&E(t,t.prev,e)>=0:E(t,e,t.prev)<0||E(t,t.next,e)<0}function L(t,e){var n=t,r=!1,i=(t.x+e.x)/2,a=(t.y+e.y)/2;do{n.y>a!=n.next.y>a&&i<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}function T(t,e){var n=new u(t.i,t.x,t.y),r=new u(e.i,e.x,e.y),i=t.next,a=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,a.next=r,r.prev=a,r}function N(t,e,n,r){var i=new u(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function O(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function P(t,e,n,r){for(var i=0,a=e,l=n-r;a<n;a+=r)i+=(t[l]-t[a])*(t[a+1]+t[l+1]),l=a;return i}function B(t,e,n){n=n||3;var r=t.length,i=x(t,0,r,n,!0),a=[];if(!i)return a;var l=0,s=0,v=0,u=0,o=0,h=0,p=0;if(t.length>80*n){l=v=t[0],s=u=t[1];for(var d=n;d<r;d+=n)(o=t[d])<l&&(l=o),(h=t[d+1])<s&&(s=h),o>v&&(v=o),h>u&&(u=h);p=Math.max(v-l,u-s)}return f(i,a,n,l,s,p),a}for(var D=Math.PI,w=Math.min,C=Math.max,U=Math.ceil,V=Math.acos,z=Math.cos,I=Math.sin,M=Math.atan2,J=null,k=null,A=new s,F=[],q=0;q<4;q++)F.push(new v);function G(t,e,n){return t<e?e:t>n?n:t}var Q=new(function(){function t(){}var a=t.prototype;return a.updateRenderData=function(){},a.getRenderData=function(t,e){if(!k)return null;var n=k.getRenderDataList(),r=n[k.dataOffset];if(!r)return null;var i=r,a=i?i.vertexStart+e:0;return(a>65535||3*a>131070)&&(++k.dataOffset,k.dataOffset<n.length?r=n[k.dataOffset]:(r=k.requestRenderData(),n[k.dataOffset]=r),i=r),i&&i.vertexCount<a&&i.request(e,3*e),r},a.stroke=function(t){s.copy(A,t.strokeColor),t.impl&&(this._flattenPaths(t.impl),this._expandStroke(t),t.impl.updatePathOffset=!0,this.end(t))},a.fill=function(t){s.copy(A,t.fillColor),this._expandFill(t),t.impl&&(t.impl.updatePathOffset=!0),this.end(t)},a.end=function(t){t._markForUpdateRenderData()},a._expandStroke=function(t){var a=.5*t.lineWidth,l=t.lineCap,s=t.lineJoin,v=t.miterLimit;if(k=t.impl){var u,x,o,f,h=(u=a,x=D,o=k.tessTol,f=2*V(u/(u+o)),C(2,U(x/f)));this._calculateJoins(k,a,s,v);for(var p=k.paths,d=0,c=k.pathOffset,y=k.pathLength;c<y;c++){var _=p[c],S=_.points.length;s===e.ROUND?d+=2*(S+_.bevel*(h+2)+1):d+=2*(S+5*_.bevel+1),_.closed||(l===n.ROUND?d+=2*(2*h+2):d+=12)}var g=J=this.getRenderData(t,d);if(g){for(var m=g.vData,E=g.iData,b=k.pathOffset,j=k.pathLength;b<j;b++){var Z=p[b],R=Z.points,L=R.length,T=g.vertexStart,N=void 0,O=void 0,P=0,B=0,w=Z.closed;if(w?(N=R[L-1],O=R[0],P=0,B=L):(N=R[0],O=R[1],P=1,B=L-1),O=O||N,!w){var z=new r(O.x,O.y);z.subtract(N),z.normalize();var I=z.x,M=z.y;l===n.BUTT?this._buttCapStart(N,I,M,a,0):l===n.SQUARE?this._buttCapStart(N,I,M,a,a):l===n.ROUND&&this._roundCapStart(N,I,M,a,h)}for(var A=P;A<B;++A)s===e.ROUND?this._roundJoin(N,O,a,a,h):O.flags&(i.PT_BEVEL|i.PT_INNERBEVEL)?this._bevelJoin(N,O,a,a):(this._vSet(O.x+O.dmx*a,O.y+O.dmy*a,1),this._vSet(O.x-O.dmx*a,O.y-O.dmy*a,-1)),N=O,O=R[A+1];if(w){var F=8*T;this._vSet(m[F],m[F+1],1),this._vSet(m[F+8],m[F+8+1],-1)}else{var q=new r(O.x,O.y);q.subtract(N),q.normalize();var G=q.x,Q=q.y;l===n.BUTT?this._buttCapEnd(O,G,Q,a,0):l===n.SQUARE?this._buttCapEnd(O,G,Q,a,a):l===n.ROUND&&this._roundCapEnd(O,G,Q,a,h)}for(var W=g.indexStart,K=T+2,H=g.vertexStart;K<H;K++)E[W++]=K-2,E[W++]=K-1,E[W++]=K;g.indexStart=W}J=null,k=null}}},a._expandFill=function(t){if(k=t.impl){for(var e=k.paths,n=0,r=k.pathOffset,i=k.pathLength;r<i;r++)n+=e[r].points.length;var a=J=this.getRenderData(t,n);if(a){for(var l=a,s=l.vData,v=l.iData,u=k.pathOffset,x=k.pathLength;u<x;u++){var o=e[u],f=o.points,h=f.length;if(0!==h){for(var p=a.vertexStart,d=0;d<h;++d)this._vSet(f[d].x,f[d].y);var c=a.indexStart;if(o.complex){for(var y=[],_=p,S=a.vertexStart;_<S;_++){var g=8*_;y.push(s[g++]),y.push(s[g++]),y.push(s[g++])}var m=B(y,0,3);if(!m||0===m.length)continue;for(var E=0,b=m.length;E<b;E++)v[c++]=m[E]+p}else for(var j=p,Z=p+2,R=l.vertexStart;Z<R;Z++)v[c++]=j,v[c++]=Z-1,v[c++]=Z;l.indexStart=c}}J=null,k=null}}},a._calculateJoins=function(t,n,r,a){var l=0;n>0&&(l=1/n);for(var s=t.paths,v=t.pathOffset,u=t.pathLength;v<u;v++){var x=s[v],o=x.points,f=o.length,h=o[f-1],p=o[0];x.bevel=0;for(var d=0;d<f;d++){var c,y,_=h.dy,S=-h.dx,g=p.dy,m=-p.dx;if(p.dmx=.5*(_+g),p.dmy=.5*(S+m),(c=p.dmx*p.dmx+p.dmy*p.dmy)>1e-6){var E=1/c;E>600&&(E=600),p.dmx*=E,p.dmy*=E}p.dx*h.dy-h.dx*p.dy>0&&(p.flags|=i.PT_LEFT),c*(y=C(11,w(h.len,p.len)*l))*y<1&&(p.flags|=i.PT_INNERBEVEL),p.flags&i.PT_CORNER&&(c*a*a<1||r===e.BEVEL||r===e.ROUND)&&(p.flags|=i.PT_BEVEL),p.flags&(i.PT_BEVEL|i.PT_INNERBEVEL)&&x.bevel++,h=p,p=o[d+1]}}},a._flattenPaths=function(t){for(var e=t.paths,n=t.pathOffset,i=t.pathLength;n<i;n++){var a=e[n],l=a.points,s=l[l.length-1],v=l[0];l.length>2&&s.equals(v)&&(a.closed=!0,l.pop(),s=l[l.length-1]);for(var u=0,x=l.length;u<x;u++){var o=new r(v.x,v.y);o.subtract(s),s.len=o.length(),(o.x||o.y)&&o.normalize(),s.dx=o.x,s.dy=o.y,s=v,v=l[u+1]}}},a._chooseBevel=function(t,e,n,r){var i=n.x,a=n.y,l=0,s=0,v=0,u=0;return 0!==t?(l=i+e.dy*r,s=a-e.dx*r,v=i+n.dy*r,u=a-n.dx*r):(l=v=i+n.dmx*r,s=u=a+n.dmy*r),[l,s,v,u]},a._buttCapStart=function(t,e,n,r,i){var a=t.x-e*i,l=t.y-n*i,s=n,v=-e;this._vSet(a+s*r,l+v*r,1),this._vSet(a-s*r,l-v*r,-1)},a._buttCapEnd=function(t,e,n,r,i){var a=t.x+e*i,l=t.y+n*i,s=n,v=-e;this._vSet(a+s*r,l+v*r,1),this._vSet(a-s*r,l-v*r,-1)},a._roundCapStart=function(t,e,n,r,i){for(var a=t.x,l=t.y,s=n,v=-e,u=0;u<i;u++){var x=u/(i-1)*D,o=z(x)*r,f=I(x)*r;this._vSet(a-s*o-e*f,l-v*o-n*f,1),this._vSet(a,l,0)}this._vSet(a+s*r,l+v*r,1),this._vSet(a-s*r,l-v*r,-1)},a._roundCapEnd=function(t,e,n,r,i){var a=t.x,l=t.y,s=n,v=-e;this._vSet(a+s*r,l+v*r,1),this._vSet(a-s*r,l-v*r,-1);for(var u=0;u<i;u++){var x=u/(i-1)*D,o=z(x)*r,f=I(x)*r;this._vSet(a,l,0),this._vSet(a-s*o+e*f,l-v*o+n*f,1)}},a._roundJoin=function(t,e,n,r,a){var l=t.dy,s=-t.dx,v=e.dy,u=-e.dx,x=e.x,o=e.y;if(e.flags&i.PT_LEFT){var f=this._chooseBevel(e.flags&i.PT_INNERBEVEL,t,e,n),h=f[0],p=f[1],d=f[2],c=f[3],y=M(-s,-l),_=M(-u,-v);_>y&&(_-=2*D),this._vSet(h,p,1),this._vSet(x-l*r,e.y-s*r,-1);for(var S=G(U((y-_)/D)*a,2,a),g=0;g<S;g++){var m=y+g/(S-1)*(_-y),E=x+z(m)*r,b=o+I(m)*r;this._vSet(x,o,0),this._vSet(E,b,-1)}this._vSet(d,c,1),this._vSet(x-v*r,o-u*r,-1)}else{var j=this._chooseBevel(e.flags&i.PT_INNERBEVEL,t,e,-r),Z=j[0],R=j[1],L=j[2],T=j[3],N=M(s,l),O=M(u,v);O<N&&(O+=2*D),this._vSet(x+l*r,o+s*r,1),this._vSet(Z,R,-1);for(var P=G(U((O-N)/D)*a,2,a),B=0;B<P;B++){var w=N+B/(P-1)*(O-N),C=x+z(w)*n,V=o+I(w)*n;this._vSet(C,V,1),this._vSet(x,o,0)}this._vSet(x+v*r,o+u*r,1),this._vSet(L,T,-1)}},a._bevelJoin=function(t,e,n,r){var a=0,l=0,s=0,v=0,u=0,x=0,o=0,f=0,h=t.dy,p=-t.dx,d=e.dy,c=-e.dx;if(e.flags&i.PT_LEFT){var y=this._chooseBevel(e.flags&i.PT_INNERBEVEL,t,e,n);u=y[0],x=y[1],o=y[2],f=y[3],this._vSet(u,x,1),this._vSet(e.x-h*r,e.y-p*r,-1),this._vSet(o,f,1),this._vSet(e.x-d*r,e.y-c*r,-1)}else{var _=this._chooseBevel(e.flags&i.PT_INNERBEVEL,t,e,-r);a=_[0],l=_[1],s=_[2],v=_[3],this._vSet(e.x+h*n,e.y+p*n,1),this._vSet(a,l,-1),this._vSet(e.x+d*n,e.y+c*n,1),this._vSet(s,v,-1)}},a._vSet=function(t,e,n){if(void 0===n&&(n=0),J){var r=J,i=8*r.vertexStart,a=r.vData;a[i++]=t,a[i++]=e,a[i++]=0,s.toArray(a,A,i),i+=4,a[i++]=n,r.vertexStart++}},t}()),W=t("graphicsAssembler",{getAssembler:function(){return Q}});a.Assembler=W,l.UI.graphicsAssembler=W}}}));
