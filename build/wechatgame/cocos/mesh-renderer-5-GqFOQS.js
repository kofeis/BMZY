System.register(["./gc-object-CKHc4SnS.js","./index-C5lmLqDW.js","./global-exports-CR3GRnjt.js","./mesh-C8knhDLk.js","./debug-view-CKetkq9d.js","./deprecated-Ca3AjUwj.js","./scene-7MDSMR3j.js","./device-manager-BvjvoelW.js","./buffer-barrier-CuX_5NUR.js","./deprecated-D4QUWou_.js","./model-renderer-BcRDUYby.js","./node-event-DTNosVQv.js","./pipeline-state-manager-Cdpe3is6.js"],(function(e){"use strict";var t,i,o,n,s,a,h,r,d,l,c,u,p,_,b,g,f,m,P,S,R,M,B,y,v,w,k,C,E,O,L;return{setters:[function(e){t=e._,i=e.E,o=e.a,n=e.b,s=e.s,a=e.S,h=e.l,r=e.w,d=e.m,l=e.C,c=e.n,u=e.o},function(e){p=e.a,_=e.c,b=e.t,g=e.e,f=e.i,m=e.s,P=e.j},function(e){S=e.c},function(e){R=e.M},null,function(e){M=e.M,B=e.R},function(e){y=e.g,v=e.c,w=e.T,k=e.d,C=e.e},null,null,null,function(e){E=e.M},function(e){O=e.N},function(e){L=e.i}],execute:function(){var I,D,N,T,A,U,G,F,j,H,W,x,K,z,Y,q,V,X,Q,J,Z,$,ee,te,ie,oe,ne,se,ae,he,re,de,le,ce,ue,pe,_e,be,ge,fe,me,Pe,Se=e("a",function(e){function i(){var t;return(t=e.call(this)||this)._morphRenderingInstance=null,t._usedMaterials=new Set,t}t(i,e);var o=i.prototype;return o.getMacroPatches=function(t){var i=e.prototype.getMacroPatches.call(this,t);if(this._morphRenderingInstance){var o=this._morphRenderingInstance.requiredPatches(t);if(o)return o.concat(null!=i?i:[])}return i},o.initSubModel=function(t,i,o){return e.prototype.initSubModel.call(this,t,i,this._launderMaterial(o))},o.destroy=function(){e.prototype.destroy.call(this),this._morphRenderingInstance=null},o.setSubModelMaterial=function(t,i){return e.prototype.setSubModelMaterial.call(this,t,this._launderMaterial(i))},o.setMorphRendering=function(e){this._morphRenderingInstance=e},o._updateLocalDescriptors=function(t,i){e.prototype._updateLocalDescriptors.call(this,t,i),this._morphRenderingInstance&&this._morphRenderingInstance.adaptPipelineState(t,i)},o._launderMaterial=function(e){return e},i}(M)),Re=_,Me=f,Be=b,ye=P,ve=m,we=y("specular-pass");function ke(e){var t=e.passes,i=S.rendering;L()&&(we=i.getPhaseID(i.getPassID("specular-pass"),"default"));for(var o=0;o<t.length;o++)if((!i||!i.enableEffectImport)&&t[o].phase===we||L()&&t[o].phaseID===we)return o;return-1}var Ce,Ee=i({OFF:0,ON:1}),Oe=i({OFF:0,ON:1});!function(e){e.USE_LIGHT_PROBE_CHANGED="use_light_probe_changed",e.REFLECTION_PROBE_CHANGED="reflection_probe_changed",e.BAKE_TO_REFLECTION_PROBE_CHANGED="bake_to_reflection_probe_changed"}(Ce||(Ce={}));var Le=(I=Re("cc.ModelBakeSettings"),D=ye("_recieveShadow"),N=Be(d),T=Be(l),A=Be(l),U=Be(i(B)),G=Be(l),I((J=function(e){function i(){var t;return(t=e.call(this)||this).texture=H&&H(),t.uvParam=W&&W(),t._bakeable=x&&x(),t._castShadow=K&&K(),t._receiveShadow=z&&z(),t._lightmapSize=Y&&Y(),t._useLightProbe=q&&q(),t._bakeToLightProbe=V&&V(),t._reflectionProbeType=X&&X(),t._bakeToReflectionProbe=Q&&Q(),t.probeCubemap=null,t.probeBlendCubemap=null,t.probePlanarmap=null,t}return t(i,e),o(i,[{key:"bakeable",get:function(){return this._bakeable},set:function(e){this._bakeable=e}},{key:"castShadow",get:function(){return this._castShadow},set:function(e){this._castShadow=e}},{key:"receiveShadow",get:function(){return this._receiveShadow},set:function(e){this._receiveShadow=e}},{key:"lightmapSize",get:function(){return this._lightmapSize},set:function(e){this._lightmapSize=e}},{key:"useLightProbe",get:function(){return this._useLightProbe},set:function(e){this._useLightProbe=e,this.emit(Ce.USE_LIGHT_PROBE_CHANGED)}},{key:"bakeToLightProbe",get:function(){return this._bakeToLightProbe},set:function(e){this._bakeToLightProbe=e}},{key:"reflectionProbe",get:function(){return this._reflectionProbeType},set:function(e){this._reflectionProbeType=e,this.emit(Ce.REFLECTION_PROBE_CHANGED)}},{key:"bakeToReflectionProbe",get:function(){return this._bakeToReflectionProbe},set:function(e){this._bakeToReflectionProbe=e,this.emit(Ce.BAKE_TO_REFLECTION_PROBE_CHANGED)}}]),i}(c),J.USE_LIGHT_PROBE_CHANGED=Ce.USE_LIGHT_PROBE_CHANGED,J.REFLECTION_PROBE_CHANGED=Ce.REFLECTION_PROBE_CHANGED,J.BAKE_TO_REFLECTION_PROBE_CHANGED=Ce.BAKE_TO_REFLECTION_PROBE_CHANGED,H=p((j=J).prototype,"texture",[ve],(function(){return null})),W=p(j.prototype,"uvParam",[ve],(function(){return new g})),x=p(j.prototype,"_bakeable",[ve],(function(){return!1})),K=p(j.prototype,"_castShadow",[ve],(function(){return!1})),z=p(j.prototype,"_receiveShadow",[D],(function(){return!1})),Y=p(j.prototype,"_lightmapSize",[ve],(function(){return 64})),q=p(j.prototype,"_useLightProbe",[ve],(function(){return!1})),V=p(j.prototype,"_bakeToLightProbe",[ve],(function(){return!0})),X=p(j.prototype,"_reflectionProbeType",[ve],(function(){return B.NONE})),Q=p(j.prototype,"_bakeToReflectionProbe",[ve],(function(){return!0})),n(j.prototype,"lightmapSize",[N],Object.getOwnPropertyDescriptor(j.prototype,"lightmapSize"),j.prototype),n(j.prototype,"useLightProbe",[T],Object.getOwnPropertyDescriptor(j.prototype,"useLightProbe"),j.prototype),n(j.prototype,"bakeToLightProbe",[A],Object.getOwnPropertyDescriptor(j.prototype,"bakeToLightProbe"),j.prototype),n(j.prototype,"reflectionProbe",[U],Object.getOwnPropertyDescriptor(j.prototype,"reflectionProbe"),j.prototype),n(j.prototype,"bakeToReflectionProbe",[G],Object.getOwnPropertyDescriptor(j.prototype,"bakeToReflectionProbe"),j.prototype),F=j))||F);e("M",(Z=Re("cc.MeshRenderer"),$=Me(100),ee=Be(u),te=Be(u),ie=Be(Ee),oe=Be(Oe),ne=Be(R),se=Be(l),Z(ae=$(((Pe=function(e){t(n,e);var i=n.prototype;function n(){var t;return(t=e.call(this)||this).bakeSettings=re&&re(),t._mesh=de&&de(),t._shadowCastingMode=le&&le(),t._shadowReceivingMode=ce&&ce(),t._shadowBias=ue&&ue(),t._shadowNormalBias=pe&&pe(),t._reflectionProbeId=_e&&_e(),t._reflectionProbeBlendId=be&&be(),t._reflectionProbeBlendWeight=ge&&ge(),t._enabledGlobalStandardSkinObject=fe&&fe(),t._reflectionProbeDataMap=null,t._subMeshShapesWeights=[],t._modelType=M,t._model=null,t._morphInstance=null,t._enableMorph=me&&me(),s.querySettings(a.RENDERING,"highQualityMode")&&(t._shadowCastingMode=Ee.ON,t.bakeSettings.castShadow=!0,t.bakeSettings.receiveShadow=!0),t}return i.onUpdateReceiveDirLight=function(e,t){void 0===t&&(t=!1),this._model&&(t?this._model.receiveDirLight=!1:this.node&&(e&this.node.layer)===this.node.layer||e&this._model.visFlags?this._model.receiveDirLight=!0:this._model.receiveDirLight=!1)},i.clearGlobalStandardSkinObjectFlag=function(){this._enabledGlobalStandardSkinObject=!1},i.onLoad=function(){this._mesh&&this._mesh.initialize(),this._validateShapeWeights()||this._initSubMeshShapesWeights(),this._watchMorphInMesh(),this._updateModels(),this._updateCastShadow(),this._updateReceiveShadow(),this._updateShadowBias(),this._updateShadowNormalBias(),this._updateUseLightProbe(),this._updateBakeToReflectionProbe(),this._updateUseReflectionProbe(),this._updateReceiveDirLight(),this._updateStandardSkin()},i.onRestore=function(){this._updateModels(),this.enabledInHierarchy&&this._attachToScene(),this._updateCastShadow(),this._updateReceiveShadow(),this._updateShadowBias(),this._updateShadowNormalBias(),this._updateUseLightProbe(),this._updateBakeToReflectionProbe(),this._updateUseReflectionProbe(),this._updateReceiveDirLight(),this._updateStandardSkin()},i.onEnable=function(){e.prototype.onEnable.call(this),this.node.on(O.MOBILITY_CHANGED,this.onMobilityChanged,this),this.node.on(O.LIGHT_PROBE_BAKING_CHANGED,this.onLightProbeBakingChanged,this),this.bakeSettings.on(Ce.USE_LIGHT_PROBE_CHANGED,this.onUseLightProbeChanged,this),this.bakeSettings.on(Ce.REFLECTION_PROBE_CHANGED,this.onReflectionProbeChanged,this),this.bakeSettings.on(Ce.BAKE_TO_REFLECTION_PROBE_CHANGED,this.onBakeToReflectionProbeChanged,this),this._model||this._updateModels(),this._model.onGlobalPipelineStateChanged(),this._updateCastShadow(),this._updateReceiveShadow(),this._updateShadowBias(),this._updateShadowNormalBias(),this._updateBakeToReflectionProbe(),this._updateUseReflectionProbe(),this._onUpdateLocalShadowBiasAndProbeId(),this._updateUseLightProbe(),this._updateReceiveDirLight(),this._onUpdateReflectionProbeDataMap(),this._onUpdateLocalReflectionProbeData(),this._updateStandardSkin(),this._attachToScene()},i.onDisable=function(){this._model&&this._detachFromScene(),this.node.off(O.MOBILITY_CHANGED,this.onMobilityChanged,this),this.node.off(O.LIGHT_PROBE_BAKING_CHANGED,this.onLightProbeBakingChanged,this),this.bakeSettings.off(Ce.USE_LIGHT_PROBE_CHANGED,this.onUseLightProbeChanged,this),this.bakeSettings.off(Ce.REFLECTION_PROBE_CHANGED,this.onReflectionProbeChanged,this),this.bakeSettings.off(Ce.BAKE_TO_REFLECTION_PROBE_CHANGED,this.onBakeToReflectionProbeChanged,this)},i.onDestroy=function(){this._model&&(S.director.root.destroyModel(this._model),this._model=null,this._models.length=0),this._morphInstance&&this._morphInstance.destroy()},i.onGeometryChanged=function(){if(this._model&&this._mesh){var e=this._mesh.struct;this._model.createBoundingShape(e.minPosition,e.maxPosition),this._model.updateWorldBound(),this._model.onGeometryChanged()}},i.getWeight=function(e,t){var i=this._subMeshShapesWeights;h(e<i.length);var o=this._subMeshShapesWeights[e];return h(t<o.length),o[t]},i.setWeights=function(e,t){var i=this._subMeshShapesWeights;t>=i.length||i[t].length===e.length&&(i[t]=e.slice(0),this._uploadSubMeshShapesWeights(t))},i.setWeight=function(e,t,i){var o=this._subMeshShapesWeights;if(!(t>=o.length)){var n=o[t];i>=n.length||(n[i]=e,this._uploadSubMeshShapesWeights(t))}},i.setInstancedAttribute=function(e,t){if(this.model)for(var i=this.model.subModels,o=0;o<i.length;o++)for(var n=i[o].instancedAttributeBlock,s=n.attributes,a=n.views,h=0;h<s.length;h++)if(s[h].name===e){a[h].set(t);break}},i._updateLightmap=function(e,t,i,o,n){this.bakeSettings.texture=e,this.bakeSettings.uvParam.x=t,this.bakeSettings.uvParam.y=i,this.bakeSettings.uvParam.z=o,this.bakeSettings.uvParam.w=n,this._onUpdateLightingmap(),this._updateReceiveDirLight()},i.updateProbeCubemap=function(e){this.bakeSettings.probeCubemap&&this.bakeSettings.probeCubemap===e||(this.bakeSettings.probeCubemap=e,null!==this.model&&this.model.updateReflectionProbeCubemap(this.bakeSettings.probeCubemap))},i.updateProbeBlendCubemap=function(e){this.bakeSettings.probeBlendCubemap&&this.bakeSettings.probeBlendCubemap===e||(this.bakeSettings.probeBlendCubemap=e,null!==this.model&&this.model.updateReflectionProbeBlendCubemap(this.bakeSettings.probeBlendCubemap))},i.updateProbePlanarMap=function(e){this.bakeSettings.probePlanarmap!==e&&(this.bakeSettings.probePlanarmap=e,null!==this.model&&this.model.updateReflectionProbePlanarMap(this.bakeSettings.probePlanarmap))},i.updateReflectionProbeDataMap=function(e){this._reflectionProbeDataMap=e,null!==this.model&&this.model.updateReflectionProbeDataMap(e)},i.updateReflectionProbeId=function(e){this._reflectionProbeId=e,this.model&&(this.model.reflectionProbeId=e),this._onUpdateLocalShadowBiasAndProbeId()},i.updateReflectionProbeBlendId=function(e){this._reflectionProbeBlendId=e,this.model&&(this.model.reflectionProbeBlendId=e),this._onUpdateLocalShadowBiasAndProbeId()},i.updateReflectionProbeBlendWeight=function(e){this._reflectionProbeBlendWeight=e,this.model&&(this.model.reflectionProbeBlendWeight=e),this._onUpdateLocalReflectionProbeData()},i._updateReflectionProbeTexture=function(){if(this.model){var e=this.bakeSettings,t=e.reflectionProbe,i=e.probeBlendCubemap,o=e.probePlanarmap,n=e.probeCubemap;t===B.BAKED_CUBEMAP?(this.model.updateReflectionProbeCubemap(n),this.model.updateReflectionProbePlanarMap(null),this.model.updateReflectionProbeBlendCubemap(null)):t===B.BLEND_PROBES||t===B.BLEND_PROBES_AND_SKYBOX?(this.model.updateReflectionProbeCubemap(n),this.model.updateReflectionProbeBlendCubemap(i),this.model.updateReflectionProbePlanarMap(null)):t===B.PLANAR_REFLECTION?(this.model.updateReflectionProbePlanarMap(o),this.model.updateReflectionProbeCubemap(null),this.model.updateReflectionProbeBlendCubemap(null)):(this.model.updateReflectionProbeCubemap(null),this.model.updateReflectionProbePlanarMap(null),this.model.updateReflectionProbeBlendCubemap(null))}},i._updateModels=function(){if(this.enabledInHierarchy){var e=this._model;if(e?(e.destroy(),e.initialize(),e.node=e.transform=this.node):this._createModel(),this._model){if(this._mesh){var t=this._mesh.struct;this._model.createBoundingShape(t.minPosition,t.maxPosition),this._model.updateWorldBound()}this._model.initLightingmap(this.bakeSettings.texture,this.bakeSettings.uvParam),this._updateUseLightProbe(),this._updateUseReflectionProbeType(),this._updateModelParams(),this._onUpdateLightingmap(),this._onUpdateLocalShadowBiasAndProbeId(),this._updateUseReflectionProbe(),this._updateReceiveDirLight(),this._onUpdateReflectionProbeDataMap(),this._onUpdateLocalReflectionProbeData()}}},i._updateReceiveDirLight=function(){if(this._model){var e=this.node.scene;if(e&&e.renderScene){var t=e.renderScene.mainLight;if(t){var i=t.visibility;if(t.node)if(t.node.mobility===v.Static){var o=this.node.scene.globals,n=o.lightProbeInfo.data,s=!1;this.bakeSettings.texture&&!o.disableLightmap&&(s=!0),n&&n.hasCoefficients()&&this._model.useLightProbe&&(s=!0),this.onUpdateReceiveDirLight(i,s)}else this.onUpdateReceiveDirLight(i)}}}},i._createModel=function(){var e=this._morphInstance&&this._modelType===M?Se:this._modelType,t=this._model=S.director.root.createModel(e);t.visFlags=this.visibility,t.node=t.transform=this.node,this._models.length=0,this._models.push(t),this._morphInstance&&t instanceof Se&&t.setMorphRendering(this._morphInstance)},i._attachToScene=function(){if(this.node.scene&&this._model){var e=this._getRenderScene();null!==this._model.scene&&this._detachFromScene(),e.addModel(this._model)}},i._detachFromScene=function(){this._model&&this._model.scene&&this._model.scene.removeModel(this._model)},i._updateModelParams=function(){if(this._mesh&&this._model){this.node.hasChangedFlags|=w.POSITION,this._model.transform.hasChangedFlags|=w.POSITION,this._model.isDynamicBatching=this._isBatchingEnabled();var e=this._mesh?this._mesh.renderingSubMeshes.length:0,t=this._mesh.renderingSubMeshes;if(t)for(var i=0;i<e;++i){var o=this.getRenderMaterial(i);o&&!o.isValid&&(o=null);var n=t[i];n&&this._model.initSubModel(i,n,o||this._getBuiltinMaterial())}this._model.enabled=!0}},i._onUpdateLightingmap=function(){null!==this.model&&this.model.updateLightingmap(this.bakeSettings.texture,this.bakeSettings.uvParam),this.setInstancedAttribute("a_lightingMapUVParam",[this.bakeSettings.uvParam.x,this.bakeSettings.uvParam.y,this.bakeSettings.uvParam.z,this.bakeSettings.uvParam.w])},i._onUpdateLocalShadowBiasAndProbeId=function(){null!==this.model&&(this.model.updateLocalShadowBias(),this.model.updateReflectionProbeId()),this.setInstancedAttribute("a_localShadowBiasAndProbeId",[this._shadowBias,this._shadowNormalBias,this._reflectionProbeId,this._reflectionProbeBlendId])},i._onUpdateLocalReflectionProbeData=function(){this.bakeSettings.reflectionProbe!==B.BAKED_CUBEMAP&&this.bakeSettings.reflectionProbe!==B.BLEND_PROBES&&this.bakeSettings.reflectionProbe!==B.BLEND_PROBES_AND_SKYBOX||(null!==this.model&&this.model.updateReflectionProbeId(),this.setInstancedAttribute("a_reflectionProbeData",[this._reflectionProbeBlendWeight,0,0,0]))},i._onUpdateReflectionProbeDataMap=function(){null!==this.model&&this.model.updateReflectionProbeDataMap(this._reflectionProbeDataMap)},i._onMaterialModified=function(e,t){this._model&&this._model.inited&&(this._onRebuildPSO(e,t||this._getBuiltinMaterial()),this._updateStandardSkin())},i._onRebuildPSO=function(e,t){this._model&&this._model.inited&&(this._model.isDynamicBatching=this._isBatchingEnabled(),this._model.setSubModelMaterial(e,t),this._onUpdateLightingmap(),this._onUpdateLocalShadowBiasAndProbeId(),this._updateReflectionProbeTexture(),this._onUpdateReflectionProbeDataMap(),this._onUpdateLocalReflectionProbeData())},i._onMeshChanged=function(){},i._clearMaterials=function(){if(this._model)for(var e=this._model.subModels,t=0;t<e.length;++t)this._onMaterialModified(t,null)},i._getBuiltinMaterial=function(){return k.get("missing-material")},i._onVisibilityChange=function(e){this._model&&(this._model.visFlags=e)},i._updateShadowBias=function(){this._model&&(this._model.shadowBias=this._shadowBias)},i._updateShadowNormalBias=function(){this._model&&(this._model.shadowNormalBias=this._shadowNormalBias)},i._updateCastShadow=function(){this._model&&(this._shadowCastingMode===Ee.OFF?this._model.castShadow=!1:(h(this._shadowCastingMode===Ee.ON,"ShadowCastingMode "+this._shadowCastingMode+" is not supported."),this._model.castShadow=!0))},i._updateReceiveShadow=function(){this._model&&(this._shadowReceivingMode===Oe.OFF?this._model.receiveShadow=!1:this._model.receiveShadow=!0)},i.onMobilityChanged=function(){this._updateUseLightProbe(),this._updateReceiveDirLight()},i.onLightProbeBakingChanged=function(){this._updateReceiveDirLight()},i.onUseLightProbeChanged=function(){this._updateUseLightProbe()},i.onReflectionProbeChanged=function(){this._updateUseReflectionProbe(),this._onUpdateLocalShadowBiasAndProbeId();var e=S.internal.reflectionProbeManager,t=this._model;this.bakeSettings.reflectionProbe===B.BAKED_CUBEMAP||this.bakeSettings.reflectionProbe===B.BLEND_PROBES||this.bakeSettings.reflectionProbe===B.BLEND_PROBES_AND_SKYBOX?(e.selectReflectionProbe(t),e.getUsedReflectionProbe(t,!1)||r(16302)):this.bakeSettings.reflectionProbe===B.PLANAR_REFLECTION&&(e.selectPlanarReflectionProbe(t),e.getUsedReflectionProbe(t,!0)||r(16302))},i.onBakeToReflectionProbeChanged=function(){this._updateBakeToReflectionProbe()},i._updateUseLightProbe=function(){if(this._model){var e=this.node;this._mesh&&e&&e.mobility===v.Movable&&this.bakeSettings.useLightProbe?this._model.useLightProbe=!0:this._model.useLightProbe=!1}},i._isBatchingEnabled=function(){for(var e=0;e<this._materials.length;++e){var t=this._materials[e];if(t)for(var i=0;i<t.passes.length;++i)if(t.passes[i].batchingScheme)return!0}return!1},i._updateUseReflectionProbe=function(){this._model&&(this._model.reflectionProbeType=this.bakeSettings.reflectionProbe,this._updateReflectionProbeTexture())},i._updateUseReflectionProbeType=function(){this._model&&(this._model.reflectionProbeType=this.bakeSettings.reflectionProbe)},i._updateBakeToReflectionProbe=function(){this._model&&(this._model.bakeToReflectionProbe=this.bakeSettings.bakeToReflectionProbe)},i._watchMorphInMesh=function(){if(this._morphInstance&&(this._morphInstance.destroy(),this._morphInstance=null),this._enableMorph&&this._mesh&&this._mesh.struct.morph&&this._mesh.morphRendering){this._morphInstance=this._mesh.morphRendering.createInstance();for(var e=this._mesh.struct.primitives.length,t=0;t<e;++t)this._uploadSubMeshShapesWeights(t);this._model&&this._model instanceof Se&&this._model.setMorphRendering(this._morphInstance)}},i._initSubMeshShapesWeights=function(){var e=this._mesh;if(this._subMeshShapesWeights.length=0,e){var t=e.struct.morph;if(t){var i=t.weights;this._subMeshShapesWeights=t.subMeshMorphs.map((function(e){return e?e.weights?e.weights.slice(0):i?(h(i.length===e.targets.length),i.slice(0)):new Array(e.targets.length).fill(0):[]}))}}},i._validateShapeWeights=function(){var e=this._mesh,t=this._subMeshShapesWeights;if(!e||!e.struct.morph)return 0===t.length;var i=e.struct.morph;return i.subMeshMorphs.length===t.length&&t.every((function(e,t){var o,n,s=e.length;return(null!==(o=null==(n=i.subMeshMorphs[t])?void 0:n.targets.length)&&void 0!==o?o:0)===s}))},i._uploadSubMeshShapesWeights=function(e){var t;null==(t=this._morphInstance)||t.setWeights(e,this._subMeshShapesWeights[e])},i._updateStandardSkin=function(){var e=C();if(this._enabledGlobalStandardSkinObject&&(e.standardSkinMeshRenderer=this,e.standardSkinModel=this.model),!e.skinMaterialModel&&this._model)for(var t=this._model.subModels,i=0;i<t.length;i++)if(!(ke(t[i])<0))return void(e.skinMaterialModel=this._model)},o(n,[{key:"shadowBias",get:function(){return this._shadowBias},set:function(e){this._shadowBias=e,this._updateShadowBias(),this._onUpdateLocalShadowBiasAndProbeId()}},{key:"shadowNormalBias",get:function(){return this._shadowNormalBias},set:function(e){this._shadowNormalBias=e,this._updateShadowNormalBias(),this._onUpdateLocalShadowBiasAndProbeId()}},{key:"shadowCastingMode",get:function(){return this._shadowCastingMode},set:function(e){this._shadowCastingMode=e,this._updateCastShadow()}},{key:"shadowCastingModeForInspector",get:function(){return this.shadowCastingMode===Ee.ON},set:function(e){this.shadowCastingMode=!0===e?Ee.ON:Ee.OFF}},{key:"receiveShadow",get:function(){return this._shadowReceivingMode},set:function(e){this._shadowReceivingMode=e,this._updateReceiveShadow()}},{key:"receiveShadowForInspector",get:function(){return this._shadowReceivingMode===Oe.ON},set:function(e){this._shadowReceivingMode=!0===e?Oe.ON:Oe.OFF,this._updateReceiveShadow()}},{key:"mesh",get:function(){return this._mesh},set:function(e){var t=this._mesh,i=this._mesh=e;null==i||i.initialize(),this._initSubMeshShapesWeights(),this._watchMorphInMesh(),this._onMeshChanged(t),this._updateModels(),this.enabledInHierarchy&&this._attachToScene(),this._updateCastShadow(),this._updateReceiveShadow(),this._updateUseLightProbe(),this._updateUseReflectionProbe(),this._updateReceiveDirLight()}},{key:"model",get:function(){return this._model}},{key:"enableMorph",get:function(){return this._enableMorph},set:function(e){this._enableMorph=e}},{key:"isGlobalStandardSkinObject",get:function(){return this._enabledGlobalStandardSkinObject},set:function(e){C().standardSkinMeshRenderer=e?this:null,this._enabledGlobalStandardSkinObject=e}}]),n}(E)).ShadowCastingMode=Ee,Pe.ShadowReceivingMode=Oe,re=p((he=Pe).prototype,"bakeSettings",[ve],(function(){return new Le})),de=p(he.prototype,"_mesh",[ve],(function(){return null})),le=p(he.prototype,"_shadowCastingMode",[ve],(function(){return Ee.OFF})),ce=p(he.prototype,"_shadowReceivingMode",[ve],(function(){return Oe.ON})),ue=p(he.prototype,"_shadowBias",[ve],(function(){return 0})),pe=p(he.prototype,"_shadowNormalBias",[ve],(function(){return 0})),_e=p(he.prototype,"_reflectionProbeId",[ve],(function(){return-1})),be=p(he.prototype,"_reflectionProbeBlendId",[ve],(function(){return-1})),ge=p(he.prototype,"_reflectionProbeBlendWeight",[ve],(function(){return 0})),fe=p(he.prototype,"_enabledGlobalStandardSkinObject",[ve],(function(){return!1})),n(he.prototype,"shadowBias",[ee],Object.getOwnPropertyDescriptor(he.prototype,"shadowBias"),he.prototype),n(he.prototype,"shadowNormalBias",[te],Object.getOwnPropertyDescriptor(he.prototype,"shadowNormalBias"),he.prototype),n(he.prototype,"shadowCastingMode",[ie],Object.getOwnPropertyDescriptor(he.prototype,"shadowCastingMode"),he.prototype),n(he.prototype,"receiveShadow",[oe],Object.getOwnPropertyDescriptor(he.prototype,"receiveShadow"),he.prototype),n(he.prototype,"mesh",[ne],Object.getOwnPropertyDescriptor(he.prototype,"mesh"),he.prototype),n(he.prototype,"isGlobalStandardSkinObject",[se],Object.getOwnPropertyDescriptor(he.prototype,"isGlobalStandardSkinObject"),he.prototype),me=p(he.prototype,"_enableMorph",[ve],(function(){return!0})),ae=he))||ae)||ae))}}}));
